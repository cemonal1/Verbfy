"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1088],{11088:function(e,a,t){t.d(a,{Z:function(){return b}});var r=t(85893),s=t(67294),n=t(41664),l=t.n(n),i=t(55797),o=t(11163),d=t(36197),c=t(56158),h=t(46826);function x(e){let{onClick:a,className:t="",showCount:s=!0}=e,{state:n}=(0,h.z)(),{unreadCount:l}=n;return(0,r.jsxs)("button",{onClick:a,className:"relative inline-flex items-center justify-center p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors ".concat(t),"aria-label":"".concat(l," unread notifications"),children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v4.5l2.25 2.25a2.25 2.25 0 0 1-2.25 2.25h-13.5a2.25 2.25 0 0 1-2.25-2.25L6 14.25V9.75a6 6 0 0 1 6-6z"})}),l>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full min-w-[20px] h-5",children:s&&l>99?"99+":l}),l>0&&(0,r.jsxs)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-5 h-5",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]})}let u={message:{label:"Message",icon:"\uD83D\uDCAC",color:"bg-blue-500",textColor:"text-blue-600"},reservation:{label:"Reservation",icon:"\uD83D\uDCC5",color:"bg-green-500",textColor:"text-green-600"},material:{label:"Material",icon:"\uD83D\uDCDA",color:"bg-purple-500",textColor:"text-purple-600"},admin:{label:"Admin",icon:"⚙️",color:"bg-red-500",textColor:"text-red-600"},lesson:{label:"Lesson",icon:"\uD83C\uDF93",color:"bg-yellow-500",textColor:"text-yellow-600"},payment:{label:"Payment",icon:"\uD83D\uDCB0",color:"bg-emerald-500",textColor:"text-emerald-600"},system:{label:"System",icon:"\uD83D\uDD14",color:"bg-gray-500",textColor:"text-gray-600"}},m=e=>u[e]||u.system;function g(e){let{isOpen:a,onClose:t}=e,n=(0,o.useRouter)(),{state:l,fetchNotifications:i,markAsRead:d,markAllAsRead:c,deleteNotification:x}=(0,h.z)(),{notifications:u,loading:g,pagination:y,unreadCount:b}=l,[p,f]=(0,s.useState)("all"),[v,j]=(0,s.useState)("all");(0,s.useEffect)(()=>{if(a){let e={};"unread"===p&&(e.isRead=!1),"read"===p&&(e.isRead=!0),"all"!==v&&(e.type=v),i(e)}},[a,p,v]);let k=async e=>{e.isRead||await d(e._id),e.link&&(n.push(e.link),t())},D=async()=>{await c()},N=async(e,a)=>{e.stopPropagation(),await x(a)},w=e=>{let a=new Date,t=new Date(e),r=Math.floor((a.getTime()-t.getTime())/1e3);return r<60?"Just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<2592e3?"".concat(Math.floor(r/86400),"d ago"):"".concat(Math.floor(r/2592e3),"mo ago")},C=u.filter(e=>("unread"!==p||!e.isRead)&&("read"!==p||!!e.isRead)&&("all"===v||e.type===v));return a?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,r.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),b>0&&(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:b})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[b>0&&(0,r.jsx)("button",{onClick:D,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all read"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[(0,r.jsx)("div",{className:"flex space-x-2",children:["all","unread","read"].map(e=>(0,r.jsx)("button",{onClick:()=>f(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(p===e?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,r.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Types"}),(0,r.jsx)("option",{value:"message",children:"Messages"}),(0,r.jsx)("option",{value:"reservation",children:"Reservations"}),(0,r.jsx)("option",{value:"material",children:"Materials"}),(0,r.jsx)("option",{value:"lesson",children:"Lessons"}),(0,r.jsx)("option",{value:"payment",children:"Payments"}),(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"system",children:"System"})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:g?(0,r.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:5}).map((e,a)=>(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})},a))}):0===C.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDD14"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"all"===p?"You're all caught up!":"No notifications match your filter."})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map(e=>{let a=m(e.type);return(0,r.jsx)("div",{onClick:()=>k(e),className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors ".concat(e.isRead?"":"bg-blue-50 dark:bg-blue-900/20"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full ".concat(a.color," flex items-center justify-center text-white text-sm"),children:a.icon}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(e.isRead?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"),children:e.title}),(0,r.jsx)("button",{onClick:a=>N(a,e._id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete notification",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:e.body}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:w(e.createdAt)}),!e.isRead&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"New"})]})]})]})},e._id)})})}),y.pages>1&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["Page ",y.page," of ",y.pages]}),(0,r.jsxs)("span",{children:[y.total," total"]})]})})]})]}):null}var y=t(54310);function b(e){let{children:a,allowedRoles:t=["student","teacher","admin"],title:n="Dashboard"}=e,{user:u,logout:m,isLoading:b}=(0,d.aC)(),{t:p,locale:f,setLocale:v}=(0,y.Q)(),{success:j}=(0,c.pm)(),k=(0,o.useRouter)(),[D,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{let e=e=>{e.preventDefault(),e.returnValue=""},a=e=>{u&&!b&&(e.preventDefault(),window.history.pushState(null,"",k.asPath))};return u&&!b&&(window.addEventListener("beforeunload",e),window.addEventListener("popstate",a),window.history.pushState(null,"",k.asPath)),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",a)}},[u,b,k.asPath]),b)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading your dashboard..."})]})});if(!u||!t.includes(u.role))return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have permission to access this page."}),(0,r.jsx)("button",{onClick:()=>k.push("/dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})});let L=(()=>{let e=[{name:p("nav.dashboard","Dashboard"),href:"/dashboard",icon:"\uD83C\uDFE0",current:"/dashboard"===k.pathname},{name:"Placement",href:"/placement",icon:"\uD83E\uDDED",current:k.pathname.startsWith("/placement")},{name:"VerbfyGames",href:"/verbfy-games",icon:"\uD83C\uDFAE",current:k.pathname.startsWith("/verbfy-games")},{name:p("nav.profile","Profile"),href:"/profile",icon:"\uD83D\uDC64",current:"/profile"===k.pathname},{name:p("nav.verbfytalk","VerbfyTalk"),href:"/verbfy-talk",icon:"\uD83C\uDFA5",current:k.pathname.startsWith("/verbfy-talk")},{name:p("nav.freeMaterials","Free Materials"),href:"/free-materials",icon:"\uD83D\uDCDA",current:k.pathname.startsWith("/free-materials")},{name:p("nav.verbfyLessons","Verbfy Lessons"),href:"/verbfy-lessons",icon:"\uD83D\uDCD6",current:k.pathname.startsWith("/verbfy-lessons")},{name:p("nav.cefrTests","CEFR Tests"),href:"/cefr-tests",icon:"\uD83D\uDCDD",current:k.pathname.startsWith("/cefr-tests")},{name:p("nav.curriculum","Personalized Curriculum"),href:"/personalized-curriculum",icon:"\uD83C\uDFAF",current:k.pathname.startsWith("/personalized-curriculum")},{name:p("nav.aiLearning","AI Learning Assistant"),href:"/ai-learning",icon:"\uD83E\uDD16",current:k.pathname.startsWith("/ai-learning")},{name:p("nav.adaptive","Adaptive Learning"),href:"/adaptive-learning",icon:"\uD83C\uDFAF",current:k.pathname.startsWith("/adaptive-learning")},{name:p("nav.aiContent","AI Content Generation"),href:"/ai-content-generation",icon:"✨",current:k.pathname.startsWith("/ai-content-generation")},{name:p("nav.chat","Chat"),href:"/chat",icon:"\uD83D\uDCAC",current:k.pathname.startsWith("/chat")},{name:p("nav.materials","Materials"),href:"/materials",icon:"\uD83D\uDCC1",current:k.pathname.startsWith("/materials")},{name:p("nav.payments","Payments"),href:"/payment",icon:"\uD83D\uDCB3",current:k.pathname.startsWith("/payment")}];return"student"===u.role&&(e.splice(1,0,{name:p("student.myLessons","My Lessons"),href:"/lessons",icon:"\uD83D\uDCD6",current:"/lessons"===k.pathname}),e.splice(2,0,{name:p("student.findTeachers","Find Teachers"),href:"/teachers",icon:"\uD83D\uDC68‍\uD83C\uDFEB",current:"/teachers"===k.pathname})),"teacher"===u.role&&(e.splice(1,0,{name:p("teacher.myStudents","My Students"),href:"/students",icon:"\uD83D\uDC65",current:"/students"===k.pathname}),e.splice(2,0,{name:p("teacher.schedule","Schedule"),href:"/schedule",icon:"\uD83D\uDCC5",current:"/schedule"===k.pathname}),e.splice(3,0,{name:p("teacher.earnings","Earnings"),href:"/earnings",icon:"\uD83D\uDCB0",current:"/earnings"===k.pathname}),e.splice(4,0,{name:p("teacher.analyticsAdvanced","Advanced Analytics"),href:"/teacher/analytics-advanced",icon:"\uD83D\uDCCA",current:"/teacher/analytics-advanced"===k.pathname})),"admin"===u.role&&(e.splice(1,0,{name:p("admin.users","Users"),href:"/admin/users",icon:"\uD83D\uDC65",current:"/admin/users"===k.pathname}),e.splice(2,0,{name:p("admin.analytics","Analytics"),href:"/admin/analytics",icon:"\uD83D\uDCCA",current:"/admin/analytics"===k.pathname}),e.splice(3,0,{name:p("admin.settings","Settings"),href:"/admin/settings",icon:"⚙️",current:"/admin/settings"===k.pathname})),e})(),M=async()=>{try{await m(),j("Logged out successfully")}catch(e){console.error("Logout error:",e)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 overflow-x-hidden",children:(0,r.jsxs)(h.J,{children:[D&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden transition-opacity duration-300",onClick:()=>N(!1)}),(0,r.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-xl border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0\n        ".concat(D?"translate-x-0":"-translate-x-full","\n      "),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[(0,r.jsx)(i.Z,{size:44,withTitle:!1}),(0,r.jsx)("button",{onClick:()=>N(!1),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("nav",{className:"flex-1 mt-4 px-3 overflow-y-auto",children:(0,r.jsx)("div",{className:"space-y-1",children:L.map(e=>(0,r.jsxs)(l(),{href:e.href,className:"\n                  group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200\n                  ".concat(e.current?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white","\n                "),onClick:()=>N(!1),children:[(0,r.jsx)("span",{className:"mr-3 text-lg","aria-hidden":!0,children:e.icon}),(0,r.jsx)("span",{children:e.name})]},e.name))})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:u.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:u.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:u.role})]}),(0,r.jsx)("button",{onClick:M,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Logout",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]}),(0,r.jsxs)("div",{className:"lg:pl-64 min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur dark:bg-gray-800/80 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-14 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("button",{onClick:()=>N(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Open sidebar",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,r.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:n}),(0,r.jsx)("p",{className:"hidden sm:block text-[11px] text-gray-500 dark:text-gray-400 -mt-0.5",children:"Verbing Up Your Language Skills!"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)("button",{onClick:()=>v("en"===f?"tr":"en"),className:"px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle language",title:"en"===f?"T\xfcrk\xe7e":"English",children:"en"===f?"TR":"EN"}),(0,r.jsx)(x,{onClick:()=>C(!0),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors"})]})]})}),(0,r.jsx)("main",{className:"flex-1",children:(0,r.jsx)("div",{className:"py-6 sm:py-8 lg:py-10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a})})})]}),(0,r.jsx)(g,{isOpen:w,onClose:()=>C(!1)})]})})}},55797:function(e,a,t){t.d(a,{Z:function(){return o}});var r=t(85893);t(67294);var s=t(41664),n=t.n(s),l=t(25675),i=t.n(l);function o(e){let{size:a=40,withTitle:t=!1,href:s="/",className:l="",titleClassName:o="text-2xl font-extrabold text-gray-900 dark:text-white"}=e;return(0,r.jsxs)(n(),{href:s,className:"flex items-center justify-center ".concat(l),"aria-label":"Verbfy Home",children:[(0,r.jsx)(i(),{src:"/logo.png",alt:"Verbfy logo",width:a,height:a,priority:!0,className:"mx-auto"}),t&&(0,r.jsx)("span",{className:o,children:"Verbfy"})]})}}}]);
//# sourceMappingURL=1088-de7318b7d32432f1.js.map