"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5757],{15757:function(e,a,s){s.r(a),s.d(a,{default:function(){return N}});var t=s(85893),r=s(67294),l=s(72509),d=s(50667),i=s(9984),n=s(67017),o=s(14489),c=s(8123),x=s(31712),g=s(10723),m=s(92054),h=s(63789),u=s(64715),y=s(69290),b=s(25615),j=s(88793),v=s(32798);let p=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function N(){var e;let a;let[s,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!0),[f,D]=(0,r.useState)(null);(0,r.useEffect)(()=>{F()},[]);let F=async()=>{try{k(!0),D(null);let e=await v.ZP.get("/api/analytics/admin");e.data.success&&N(e.data.data)}catch(t){var e,a;let s=(null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to load analytics";D(s),l.Am.error(s)}finally{k(!1)}},S=e=>new Intl.NumberFormat("en-US").format(e),C=(e,a)=>new Date(e,a-1).toLocaleDateString("en-US",{month:"short",year:"numeric"}),T=()=>(null==s?void 0:s.lessonTypeDistribution)?s.lessonTypeDistribution.map(e=>({name:e._id.charAt(0).toUpperCase()+e._id.slice(1),value:e.count,revenue:e.revenue})):[],U=e=>{let{card:a}=e;return(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat(a.color," text-white"),children:(0,t.jsx)("span",{className:"text-2xl",children:a.icon})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:a.title}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.value})]})]})})};return w?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,a)=>(0,t.jsx)("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},a))}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})}):f?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Failed to load analytics"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f}),(0,t.jsx)("button",{onClick:F,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"})]}):s?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Analytics"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Platform overview and performance metrics"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(s?[{title:"Total Users",value:S(s.totalUsers),icon:"\uD83D\uDC65",color:"bg-blue-500"},{title:"Total Revenue",value:(a=s.totalRevenue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)),icon:"\uD83D\uDCB0",color:"bg-green-500"},{title:"Total Payments",value:S(s.totalPayments),icon:"\uD83D\uDCB3",color:"bg-yellow-500"},{title:"Active Teachers",value:(null===(e=s.userStats.find(e=>"teacher"===e._id))||void 0===e?void 0:e.count)||0,icon:"\uD83D\uDC68‍\uD83C\uDFEB",color:"bg-purple-500"}]:[]).map((e,a)=>(0,t.jsx)(U,{card:e},a))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly User Growth"}),(0,t.jsx)(u.h,{width:"100%",height:300,children:(0,t.jsxs)(g.w,{data:(null==s?void 0:s.monthlyGrowth)?s.monthlyGrowth.map(e=>({name:C(e._id.year,e._id.month),users:e.newUsers})):[],children:[(0,t.jsx)(n.q,{strokeDasharray:"3 3"}),(0,t.jsx)(b.K,{dataKey:"name"}),(0,t.jsx)(j.Q,{}),(0,t.jsx)(y.u,{}),(0,t.jsx)(c.D,{}),(0,t.jsx)(x.x,{type:"monotone",dataKey:"users",stroke:"#0088FE",strokeWidth:2,name:"New Users"})]})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Lesson Type Distribution"}),(0,t.jsx)(u.h,{width:"100%",height:300,children:(0,t.jsxs)(h.u,{children:[(0,t.jsx)(m.b,{data:T(),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:a,percent:s}=e;return"".concat(a," ").concat((100*(s||0)).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:T().map((e,a)=>(0,t.jsx)(o.b,{fill:p[a%p.length]},"cell-".concat(a)))}),(0,t.jsx)(y.u,{})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Earning Teachers"}),(0,t.jsx)(u.h,{width:"100%",height:300,children:(0,t.jsxs)(i.v,{data:(null==s?void 0:s.topTeachers)?s.topTeachers.map(e=>({name:e.name,earnings:e.totalEarnings,lessons:e.totalLessons,rating:e.averageRating})):[],children:[(0,t.jsx)(n.q,{strokeDasharray:"3 3"}),(0,t.jsx)(b.K,{dataKey:"name"}),(0,t.jsx)(j.Q,{}),(0,t.jsx)(y.u,{}),(0,t.jsx)(c.D,{}),(0,t.jsx)(d.$,{dataKey:"earnings",fill:"#00C49F",name:"Earnings ($)"})]})})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Most Active Students"}),(0,t.jsx)(u.h,{width:"100%",height:300,children:(0,t.jsxs)(i.v,{data:(null==s?void 0:s.topStudents)?s.topStudents.map(e=>({name:e.name,lessons:e.totalLessons,hours:e.totalHours,spent:e.totalSpent})):[],children:[(0,t.jsx)(n.q,{strokeDasharray:"3 3"}),(0,t.jsx)(b.K,{dataKey:"name"}),(0,t.jsx)(j.Q,{}),(0,t.jsx)(y.u,{}),(0,t.jsx)(c.D,{}),(0,t.jsx)(d.$,{dataKey:"lessons",fill:"#FFBB28",name:"Lessons"})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"User Statistics"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.userStats.map(e=>(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:S(e.count)}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:[e._id,"s"]})]},e._id))})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No analytics data available"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Platform data will appear here once users start using the system."})]})}}}]);