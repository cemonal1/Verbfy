"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{60576:function(e,t,n){n.r(t),n.d(t,{LiveKitRoom:function(){return o}});var r=n(85893),l=n(67294),s=n(60201),c=n(98019),i=n(49486),a=n(53178);n(13618);let o=e=>{let{roomName:t,onError:n,onConnected:o,onDisconnected:u}=e,{room:d,isConnecting:h,error:m,connect:x,disconnect:f}=(0,a.T)();return((0,l.useEffect)(()=>(t&&x(t).then(()=>{console.log("✅ Connected to LiveKit room:",t),null==o||o()}).catch(e=>{console.error("❌ Failed to connect to LiveKit room:",e),null==n||n(e)}),()=>{f(),null==u||u()}),[t,x,f,o,u,n]),h)?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),(0,r.jsx)("p",{className:"mt-4",children:"Connecting to room..."})]})}):m?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center text-red-500",children:[(0,r.jsxs)("p",{children:["Failed to connect: ",m.message]}),(0,r.jsx)("button",{onClick:()=>x(t),className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark",children:"Try Again"})]})}):d?(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)(s.zc,{children:[(0,r.jsx)(c.G,{tracks:(0,i.t)(),children:(0,r.jsx)(c.P,{})}),(0,r.jsx)(c.R,{}),(0,r.jsx)(s.VS,{})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("p",{children:"Room not connected"})})}},53178:function(e,t,n){n.d(t,{T:function(){return a},z:function(){return o}});var r=n(85893),l=n(67294),s=n(95591),c=n(32798);let i=(0,l.createContext)(void 0),a=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("useLiveKit must be used within a LiveKitProvider");return e},o=e=>{let{children:t}=e,[n,a]=(0,l.useState)(null),[o,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),m=(0,l.useCallback)(async e=>{try{u(!0),h(null);let{token:t,url:n}=(await c.ZP.post("/api/livekit/token/".concat(e))).data,r=new s.du({adaptiveStream:!0,dynacast:!0,stopLocalTrackOnUnpublish:!0});await r.connect(n,t),a(r)}catch(e){throw console.error("Failed to connect to LiveKit room:",e),h(e),e}finally{u(!1)}},[]),x=(0,l.useCallback)(()=>{n&&(n.disconnect(),a(null))},[n]);return(0,r.jsx)(i.Provider,{value:{room:n,isConnecting:o,error:d,connect:m,disconnect:x},children:t})}}}]);
//# sourceMappingURL=576.bc264edcb0aa450d.js.map