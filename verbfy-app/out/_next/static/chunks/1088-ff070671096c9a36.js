"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1088],{11088:function(e,a,t){t.d(a,{Z:function(){return b}});var r=t(85893),s=t(67294),n=t(41664),l=t.n(n),i=t(55797),c=t(11163),o=t(36197),d=t(56158),x=t(46826);function h(e){let{onClick:a,className:t="",showCount:s=!0}=e,{state:n}=(0,x.z)(),{unreadCount:l}=n;return(0,r.jsxs)("button",{onClick:a,className:"relative inline-flex items-center justify-center p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors ".concat(t),"aria-label":"".concat(l," unread notifications"),children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v4.5l2.25 2.25a2.25 2.25 0 0 1-2.25 2.25h-13.5a2.25 2.25 0 0 1-2.25-2.25L6 14.25V9.75a6 6 0 0 1 6-6z"})}),l>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full min-w-[20px] h-5",children:s&&l>99?"99+":l}),l>0&&(0,r.jsxs)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center w-5 h-5",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]})}let u={message:{label:"Message",icon:"\uD83D\uDCAC",color:"bg-blue-500",textColor:"text-blue-600"},reservation:{label:"Reservation",icon:"\uD83D\uDCC5",color:"bg-green-500",textColor:"text-green-600"},material:{label:"Material",icon:"\uD83D\uDCDA",color:"bg-purple-500",textColor:"text-purple-600"},admin:{label:"Admin",icon:"⚙️",color:"bg-red-500",textColor:"text-red-600"},lesson:{label:"Lesson",icon:"\uD83C\uDF93",color:"bg-yellow-500",textColor:"text-yellow-600"},payment:{label:"Payment",icon:"\uD83D\uDCB0",color:"bg-emerald-500",textColor:"text-emerald-600"},system:{label:"System",icon:"\uD83D\uDD14",color:"bg-gray-500",textColor:"text-gray-600"}},m=e=>u[e]||u.system;function g(e){let{isOpen:a,onClose:t}=e,n=(0,c.useRouter)(),{state:l,fetchNotifications:i,markAsRead:o,markAllAsRead:d,deleteNotification:h}=(0,x.z)(),{notifications:u,loading:g,pagination:p,unreadCount:b}=l,[y,f]=(0,s.useState)("all"),[v,j]=(0,s.useState)("all");(0,s.useEffect)(()=>{if(a){let e={};"unread"===y&&(e.isRead=!1),"read"===y&&(e.isRead=!0),"all"!==v&&(e.type=v),i(e)}},[a,y,v]);let k=async e=>{e.isRead||await o(e._id),e.link&&(n.push(e.link),t())},D=async()=>{await d()},N=async(e,a)=>{e.stopPropagation(),await h(a)},w=e=>{let a=new Date,t=new Date(e),r=Math.floor((a.getTime()-t.getTime())/1e3);return r<60?"Just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<2592e3?"".concat(Math.floor(r/86400),"d ago"):"".concat(Math.floor(r/2592e3),"mo ago")},C=u.filter(e=>("unread"!==y||!e.isRead)&&("read"!==y||!!e.isRead)&&("all"===v||e.type===v));return a?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,r.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),b>0&&(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:b})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[b>0&&(0,r.jsx)("button",{onClick:D,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all read"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[(0,r.jsx)("div",{className:"flex space-x-2",children:["all","unread","read"].map(e=>(0,r.jsx)("button",{onClick:()=>f(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(y===e?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,r.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Types"}),(0,r.jsx)("option",{value:"message",children:"Messages"}),(0,r.jsx)("option",{value:"reservation",children:"Reservations"}),(0,r.jsx)("option",{value:"material",children:"Materials"}),(0,r.jsx)("option",{value:"lesson",children:"Lessons"}),(0,r.jsx)("option",{value:"payment",children:"Payments"}),(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"system",children:"System"})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:g?(0,r.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:5}).map((e,a)=>(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})},a))}):0===C.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDD14"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"all"===y?"You're all caught up!":"No notifications match your filter."})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map(e=>{let a=m(e.type);return(0,r.jsx)("div",{onClick:()=>k(e),className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors ".concat(e.isRead?"":"bg-blue-50 dark:bg-blue-900/20"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full ".concat(a.color," flex items-center justify-center text-white text-sm"),children:a.icon}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(e.isRead?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"),children:e.title}),(0,r.jsx)("button",{onClick:a=>N(a,e._id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete notification",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:e.body}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:w(e.createdAt)}),!e.isRead&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"New"})]})]})]})},e._id)})})}),p.pages>1&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsxs)("span",{children:["Page ",p.page," of ",p.pages]}),(0,r.jsxs)("span",{children:[p.total," total"]})]})})]})]}):null}var p=t(54310);function b(e){let{children:a,allowedRoles:t=["student","teacher","admin"],title:n="Dashboard"}=e,{user:u,logout:m}=(0,o.aC)(),{t:b,locale:y,setLocale:f}=(0,p.Q)(),{success:v}=(0,d.pm)(),j=(0,c.useRouter)(),[k,D]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1);if(!u||!t.includes(u.role))return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have permission to access this page."}),(0,r.jsx)("button",{onClick:()=>j.push("/dashboard"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})});let C=(()=>{let e=[{name:b("nav.dashboard","Dashboard"),href:"/dashboard",icon:"\uD83C\uDFE0",current:"/dashboard"===j.pathname},{name:"Placement",href:"/placement",icon:"\uD83E\uDDED",current:j.pathname.startsWith("/placement")},{name:"VerbfyGames",href:"/verbfy-games",icon:"\uD83C\uDFAE",current:j.pathname.startsWith("/verbfy-games")},{name:b("nav.profile","Profile"),href:"/profile",icon:"\uD83D\uDC64",current:"/profile"===j.pathname},{name:b("nav.verbfytalk","VerbfyTalk"),href:"/verbfy-talk",icon:"\uD83C\uDFA5",current:j.pathname.startsWith("/verbfy-talk")},{name:b("nav.freeMaterials","Free Materials"),href:"/free-materials",icon:"\uD83D\uDCDA",current:j.pathname.startsWith("/free-materials")},{name:b("nav.verbfyLessons","Verbfy Lessons"),href:"/verbfy-lessons",icon:"\uD83D\uDCD6",current:j.pathname.startsWith("/verbfy-lessons")},{name:b("nav.cefrTests","CEFR Tests"),href:"/cefr-tests",icon:"\uD83D\uDCDD",current:j.pathname.startsWith("/cefr-tests")},{name:b("nav.curriculum","Personalized Curriculum"),href:"/personalized-curriculum",icon:"\uD83C\uDFAF",current:j.pathname.startsWith("/personalized-curriculum")},{name:b("nav.aiLearning","AI Learning Assistant"),href:"/ai-learning",icon:"\uD83E\uDD16",current:j.pathname.startsWith("/ai-learning")},{name:b("nav.adaptive","Adaptive Learning"),href:"/adaptive-learning",icon:"\uD83C\uDFAF",current:j.pathname.startsWith("/adaptive-learning")},{name:b("nav.aiContent","AI Content Generation"),href:"/ai-content-generation",icon:"✨",current:j.pathname.startsWith("/ai-content-generation")},{name:b("nav.chat","Chat"),href:"/chat",icon:"\uD83D\uDCAC",current:j.pathname.startsWith("/chat")},{name:b("nav.materials","Materials"),href:"/materials",icon:"\uD83D\uDCC1",current:j.pathname.startsWith("/materials")},{name:b("nav.payments","Payments"),href:"/payment",icon:"\uD83D\uDCB3",current:j.pathname.startsWith("/payment")}];return"student"===u.role&&(e.splice(1,0,{name:b("student.myLessons","My Lessons"),href:"/lessons",icon:"\uD83D\uDCD6",current:"/lessons"===j.pathname}),e.splice(2,0,{name:b("student.findTeachers","Find Teachers"),href:"/teachers",icon:"\uD83D\uDC68‍\uD83C\uDFEB",current:"/teachers"===j.pathname})),"teacher"===u.role&&(e.splice(1,0,{name:b("teacher.myStudents","My Students"),href:"/students",icon:"\uD83D\uDC65",current:"/students"===j.pathname}),e.splice(2,0,{name:b("teacher.schedule","Schedule"),href:"/schedule",icon:"\uD83D\uDCC5",current:"/schedule"===j.pathname}),e.splice(3,0,{name:b("teacher.earnings","Earnings"),href:"/earnings",icon:"\uD83D\uDCB0",current:"/earnings"===j.pathname}),e.splice(4,0,{name:b("teacher.analyticsAdvanced","Advanced Analytics"),href:"/teacher/analytics-advanced",icon:"\uD83D\uDCCA",current:"/teacher/analytics-advanced"===j.pathname})),"admin"===u.role&&(e.splice(1,0,{name:b("admin.users","Users"),href:"/admin/users",icon:"\uD83D\uDC65",current:"/admin/users"===j.pathname}),e.splice(2,0,{name:b("admin.analytics","Analytics"),href:"/admin/analytics",icon:"\uD83D\uDCCA",current:"/admin/analytics"===j.pathname}),e.splice(3,0,{name:b("admin.settings","Settings"),href:"/admin/settings",icon:"⚙️",current:"/admin/settings"===j.pathname})),e})(),L=async()=>{try{await m(),v("Logged out successfully")}catch(e){console.error("Logout error:",e)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 overflow-x-hidden",children:(0,r.jsxs)(x.J,{children:[k&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>D(!1)}),(0,r.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0\n        ".concat(k?"translate-x-0":"-translate-x-full","\n      "),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(i.Z,{size:44,withTitle:!0}),(0,r.jsx)("button",{onClick:()=>D(!1),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("nav",{className:"mt-4 px-3",children:(0,r.jsx)("div",{className:"space-y-1",children:C.map(e=>(0,r.jsxs)(l(),{href:e.href,className:"\n                  group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors\n                  ".concat(e.current?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white","\n                "),onClick:()=>D(!1),children:[(0,r.jsx)("span",{className:"mr-3 text-lg","aria-hidden":!0,children:e.icon}),(0,r.jsx)("span",{children:e.name})]},e.name))})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:u.name.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:u.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:u.role})]}),(0,r.jsx)("button",{onClick:L,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Logout",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]}),(0,r.jsxs)("div",{className:"lg:pl-64 min-h-screen",children:[(0,r.jsx)("div",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur dark:bg-gray-800/80 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-14 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("button",{onClick:()=>D(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Open sidebar",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,r.jsx)("h1",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:n}),(0,r.jsx)("p",{className:"hidden sm:block text-[11px] text-gray-500 dark:text-gray-400 -mt-0.5",children:"Verbing Up Your Language Skills!"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)("button",{onClick:()=>f("en"===y?"tr":"en"),className:"px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700","aria-label":"Toggle language",title:"en"===y?"T\xfcrk\xe7e":"English",children:"en"===y?"TR":"EN"}),(0,r.jsx)(h,{onClick:()=>w(!0),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})]})]})}),(0,r.jsx)("main",{className:"flex-1",children:(0,r.jsx)("div",{className:"pt-4 pb-6 sm:py-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a})})})]}),(0,r.jsx)(g,{isOpen:N,onClose:()=>w(!1)})]})})}},55797:function(e,a,t){t.d(a,{Z:function(){return c}});var r=t(85893);t(67294);var s=t(41664),n=t.n(s),l=t(25675),i=t.n(l);function c(e){let{size:a=40,withTitle:t=!0,href:s="/",className:l="",titleClassName:c="text-2xl font-extrabold text-gray-900 dark:text-white"}=e;return(0,r.jsxs)(n(),{href:s,className:"flex items-center space-x-2 ".concat(l),"aria-label":"Verbfy Home",children:[(0,r.jsx)(i(),{src:"/logo.png",alt:"Verbfy logo",width:a,height:a,priority:!0}),t&&(0,r.jsx)("span",{className:c,children:"Verbfy"})]})}}}]);
//# sourceMappingURL=1088-ff070671096c9a36.js.map