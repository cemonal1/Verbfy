{"version":3,"file":"static/chunks/pages/materials-8cdbc157991b6433.js","mappings":"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","sources":["webpack://_N_E/?205d","webpack://_N_E/./src/components/materials/Upload.tsx","webpack://_N_E/./src/components/materials/List.tsx","webpack://_N_E/./src/components/materials/Preview.tsx","webpack://_N_E/./pages/materials/index.tsx","webpack://_N_E/./src/hooks/useAuth.ts","webpack://_N_E/./src/types/materials.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/materials\",\n      function () {\n        return require(\"private-next-pages/materials/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/materials\"])\n      });\n    }\n  ","import React, { useState, useCallback, useRef } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { toast } from 'react-hot-toast';\r\nimport { AxiosProgressEvent } from 'axios';\r\nimport api from '../../lib/api';\r\nimport { Material, MaterialUploadData, MAX_FILE_SIZE, FILE_TYPES } from '../../types/materials';\r\n\r\ninterface UploadComponentProps {\r\n  onUploadSuccess: (material: Material) => void;\r\n}\r\n\r\nexport default function UploadComponent({ onUploadSuccess }: UploadComponentProps) {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    tags: '',\r\n    description: '',\r\n    isPublic: false\r\n  });\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Validate file\r\n  const validateFile = (file: File): string | null => {\r\n    // Check file size\r\n    if (file.size > MAX_FILE_SIZE) {\r\n      return `File size exceeds the maximum limit of ${MAX_FILE_SIZE / (1024 * 1024)}MB`;\r\n    }\r\n\r\n    // Check file type\r\n    const allowedMimeTypes = Object.values(FILE_TYPES).flatMap(type => type.mimeTypes);\r\n    if (!allowedMimeTypes.includes(file.type as any)) {\r\n      return 'File type not supported. Please upload PDF, image, video, document, or audio files.';\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  // Handle file selection\r\n  const onDrop = useCallback((acceptedFiles: File[], rejectedFiles: any[]) => {\r\n    if (rejectedFiles.length > 0) {\r\n      const error = rejectedFiles[0].errors[0];\r\n      if (error.code === 'file-too-large') {\r\n        toast.error(`File size exceeds the maximum limit of ${MAX_FILE_SIZE / (1024 * 1024)}MB`);\r\n      } else if (error.code === 'file-invalid-type') {\r\n        toast.error('File type not supported. Please upload PDF, image, video, document, or audio files.');\r\n      } else {\r\n        toast.error('File upload failed. Please try again.');\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (acceptedFiles.length > 0) {\r\n      const file = acceptedFiles[0];\r\n      const validationError = validateFile(file);\r\n      \r\n      if (validationError) {\r\n        toast.error(validationError);\r\n        return;\r\n      }\r\n\r\n      setSelectedFile(file);\r\n    }\r\n  }, []);\r\n\r\n  // Dropzone configuration\r\n  const { getRootProps, getInputProps, isDragActive, isDragReject } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'image/*': ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\r\n      'video/*': ['.mp4', '.webm', '.ogg', '.avi'],\r\n      'application/msword': ['.doc'],\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\r\n      'text/plain': ['.txt'],\r\n      'audio/*': ['.mp3', '.wav', '.ogg']\r\n    },\r\n    maxSize: MAX_FILE_SIZE,\r\n    multiple: false\r\n  });\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedFile) {\r\n      toast.error('Please select a file to upload');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append('file', selectedFile);\r\n      \r\n      if (formData.tags) {\r\n        formDataToSend.append('tags', formData.tags);\r\n      }\r\n      \r\n      if (formData.description) {\r\n        formDataToSend.append('description', formData.description);\r\n      }\r\n      \r\n      formDataToSend.append('isPublic', formData.isPublic.toString());\r\n\r\n      const response = await api.post('/api/materials/upload', formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n        onUploadProgress: (progressEvent: AxiosProgressEvent) => {\r\n          if (progressEvent.total) {\r\n            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            setUploadProgress(progress);\r\n          }\r\n        },\r\n      });\r\n\r\n      if (response.data.success) {\r\n        toast.success('Material uploaded successfully!');\r\n        onUploadSuccess(response.data.data);\r\n        \r\n        // Reset form\r\n        setSelectedFile(null);\r\n        setFormData({\r\n          tags: '',\r\n          description: '',\r\n          isPublic: false\r\n        });\r\n        setUploadProgress(0);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Upload error:', error);\r\n      const errorMessage = error.response?.data?.message || 'Upload failed. Please try again.';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Handle file input change (fallback)\r\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      const validationError = validateFile(file);\r\n      if (validationError) {\r\n        toast.error(validationError);\r\n        return;\r\n      }\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Drag and Drop Zone */}\r\n      <div\r\n        {...getRootProps()}\r\n        className={`\r\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\r\n          ${isDragActive && !isDragReject\r\n            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\r\n            : isDragReject\r\n            ? 'border-red-500 bg-red-50 dark:bg-red-900/20'\r\n            : 'border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500'\r\n          }\r\n        `}\r\n      >\r\n        <input {...getInputProps()} />\r\n        \r\n        <div className=\"space-y-4\">\r\n          <div className=\"text-4xl\">\r\n            {isDragActive && !isDragReject ? '📁' : '📤'}\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n              {isDragActive && !isDragReject\r\n                ? 'Drop your file here'\r\n                : isDragReject\r\n                ? 'File type not supported'\r\n                : 'Drag & drop a file here, or click to select'\r\n              }\r\n            </p>\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n              PDF, Images, Videos, Documents, Audio (max 50MB)\r\n            </p>\r\n          </div>\r\n\r\n          {!isDragActive && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => fileInputRef.current?.click()}\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n            >\r\n              Choose File\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Fallback File Input */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        onChange={handleFileInputChange}\r\n        accept=\".pdf,.jpg,.jpeg,.png,.gif,.webp,.mp4,.webm,.ogg,.avi,.doc,.docx,.txt,.mp3,.wav\"\r\n        className=\"hidden\"\r\n      />\r\n\r\n      {/* Selected File Display */}\r\n      {selectedFile && (\r\n        <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex-shrink-0\">\r\n              <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\r\n                <span className=\"text-blue-600 dark:text-blue-400 text-lg\">\r\n                  {getFileTypeIcon(selectedFile.type)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\r\n                {selectedFile.name}\r\n              </p>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\r\n              </p>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setSelectedFile(null)}\r\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Progress */}\r\n      {uploading && (\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-sm\">\r\n            <span className=\"text-gray-700 dark:text-gray-300\">Uploading...</span>\r\n            <span className=\"text-gray-500 dark:text-gray-400\">{uploadProgress}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\r\n            <div\r\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n              style={{ width: `${uploadProgress}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Form */}\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Tags (optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"grammar, beginner, exercises\"\r\n              value={formData.tags}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, tags: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n              Separate tags with commas\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Description (optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Brief description of the material\"\r\n              value={formData.description}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"isPublic\"\r\n            checked={formData.isPublic}\r\n            onChange={(e) => setFormData(prev => ({ ...prev, isPublic: e.target.checked }))}\r\n            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n          />\r\n          <label htmlFor=\"isPublic\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\r\n            Make this material public (visible to all users)\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setSelectedFile(null);\r\n              setFormData({\r\n                tags: '',\r\n                description: '',\r\n                isPublic: false\r\n              });\r\n            }}\r\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!selectedFile || uploading}\r\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {uploading ? 'Uploading...' : 'Upload Material'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Helper function to get file type icon\r\nfunction getFileTypeIcon(mimeType: string): string {\r\n  if (mimeType.startsWith('image/')) return '🖼️';\r\n  if (mimeType.startsWith('video/')) return '🎥';\r\n  if (mimeType.startsWith('audio/')) return '🎵';\r\n  if (mimeType === 'application/pdf') return '��';\r\n  return '📝';\r\n} ","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport api from '../../lib/api';\r\nimport { Material, MaterialFilters, getFileTypeIcon, getFileTypeLabel, formatFileSize, formatDate } from '../../types/materials';\r\n\r\ninterface ListComponentProps {\r\n  filters: MaterialFilters;\r\n  onMaterialSelect: (material: Material) => void;\r\n  onMaterialDelete: (materialId: string) => void;\r\n  canDelete: boolean;\r\n}\r\n\r\nexport default function ListComponent({ \r\n  filters, \r\n  onMaterialSelect, \r\n  onMaterialDelete, \r\n  canDelete \r\n}: ListComponentProps) {\r\n  const [materials, setMaterials] = useState<Material[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 12,\r\n    total: 0,\r\n    pages: 0\r\n  });\r\n\r\n  // Fetch materials\r\n  const fetchMaterials = async (page = 1) => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      \r\n      // Add filters\r\n      if (filters.type) params.append('type', filters.type);\r\n      if (filters.tags) params.append('tags', filters.tags);\r\n      if (filters.search) params.append('search', filters.search);\r\n      if (filters.isPublic) params.append('isPublic', filters.isPublic);\r\n      if (filters.uploaderId) params.append('uploaderId', filters.uploaderId);\r\n      \r\n      // Add pagination\r\n      params.append('page', page.toString());\r\n      params.append('limit', pagination.limit.toString());\r\n\r\n      const response = await api.get(`/api/materials?${params.toString()}`);\r\n      \r\n      if (response.data.success) {\r\n        setMaterials(response.data.data.materials);\r\n        setPagination(response.data.data.pagination);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching materials:', error);\r\n      const errorMessage = error.response?.data?.message || 'Failed to load materials';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Delete material\r\n  const handleDelete = async (materialId: string) => {\r\n    if (!confirm('Are you sure you want to delete this material?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await api.delete(`/api/materials/${materialId}`);\r\n      \r\n      if (response.data.success) {\r\n        toast.success('Material deleted successfully');\r\n        onMaterialDelete(materialId);\r\n        // Refresh the list\r\n        fetchMaterials(pagination.page);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting material:', error);\r\n      const errorMessage = error.response?.data?.message || 'Failed to delete material';\r\n      toast.error(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Download material\r\n  const handleDownload = async (material: Material) => {\r\n    try {\r\n      const response = await api.get(`/api/materials/${material._id}/download`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      // Create download link\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', material.originalName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      toast.success('Download started');\r\n    } catch (error: any) {\r\n      console.error('Error downloading material:', error);\r\n      const errorMessage = error.response?.data?.message || 'Failed to download material';\r\n      toast.error(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Fetch materials when filters change\r\n  useEffect(() => {\r\n    fetchMaterials(1);\r\n  }, [filters]);\r\n\r\n  // Handle pagination\r\n  const handlePageChange = (page: number) => {\r\n    fetchMaterials(page);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2 text-gray-600 dark:text-gray-400\">Loading materials...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (materials.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-4xl mb-4\">📚</div>\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n          No materials found\r\n        </h3>\r\n        <p className=\"text-gray-500 dark:text-gray-400\">\r\n          {Object.values(filters).some(f => f) \r\n            ? 'Try adjusting your filters to see more results.'\r\n            : 'No materials have been uploaded yet.'\r\n          }\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Materials Grid */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n        {materials.map((material) => (\r\n          <MaterialCard\r\n            key={material._id}\r\n            material={material}\r\n            onSelect={onMaterialSelect}\r\n            onDelete={handleDelete}\r\n            onDownload={handleDownload}\r\n            canDelete={canDelete}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {pagination.pages > 1 && (\r\n        <div className=\"flex justify-center\">\r\n          <nav className=\"flex items-center space-x-2\">\r\n            <button\r\n              onClick={() => handlePageChange(pagination.page - 1)}\r\n              disabled={pagination.page <= 1}\r\n              className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700\"\r\n            >\r\n              Previous\r\n            </button>\r\n            \r\n            {Array.from({ length: pagination.pages }, (_, i) => i + 1).map((page) => (\r\n              <button\r\n                key={page}\r\n                onClick={() => handlePageChange(page)}\r\n                className={`px-3 py-2 text-sm font-medium rounded-md ${\r\n                  page === pagination.page\r\n                    ? 'text-white bg-blue-600 border border-blue-600'\r\n                    : 'text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700'\r\n                }`}\r\n              >\r\n                {page}\r\n              </button>\r\n            ))}\r\n            \r\n            <button\r\n              onClick={() => handlePageChange(pagination.page + 1)}\r\n              disabled={pagination.page >= pagination.pages}\r\n              className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700\"\r\n            >\r\n              Next\r\n            </button>\r\n          </nav>\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Info */}\r\n      <div className=\"text-center text-sm text-gray-500 dark:text-gray-400\">\r\n        Showing {((pagination.page - 1) * pagination.limit) + 1} to{' '}\r\n        {Math.min(pagination.page * pagination.limit, pagination.total)} of{' '}\r\n        {pagination.total} materials\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Material Card Component\r\ninterface MaterialCardProps {\r\n  material: Material;\r\n  onSelect: (material: Material) => void;\r\n  onDelete: (materialId: string) => void;\r\n  onDownload: (material: Material) => void;\r\n  canDelete: boolean;\r\n}\r\n\r\nfunction MaterialCard({ material, onSelect, onDelete, onDownload, canDelete }: MaterialCardProps) {\r\n  const isOwner = material.uploaderId._id === localStorage.getItem('verbfy_user_id');\r\n  const canDeleteThis = canDelete && (isOwner || material.uploaderId.role === 'admin');\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden hover:shadow-md transition-shadow\">\r\n      {/* Card Header */}\r\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-600\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"flex-shrink-0\">\r\n            <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\r\n              <span className=\"text-blue-600 dark:text-blue-400 text-lg\">\r\n                {getFileTypeIcon(material.type)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\r\n              {material.originalName}\r\n            </h3>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n              {getFileTypeLabel(material.type)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Card Body */}\r\n      <div className=\"p-4 space-y-3\">\r\n        {/* File Info */}\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n            <span>Size: {formatFileSize(material.fileSize)}</span>\r\n            <span>Downloads: {material.downloadCount}</span>\r\n          </div>\r\n          \r\n          {material.description && (\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-2\">\r\n              {material.description}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Tags */}\r\n        {material.tags.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {material.tags.slice(0, 3).map((tag, index) => (\r\n              <span\r\n                key={index}\r\n                className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\r\n              >\r\n                {tag}\r\n              </span>\r\n            ))}\r\n            {material.tags.length > 3 && (\r\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200\">\r\n                +{material.tags.length - 3}\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Uploader Info */}\r\n        <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n          <span>By {material.uploaderId.name}</span>\r\n          <span>{formatDate(material.createdAt)}</span>\r\n        </div>\r\n\r\n        {/* Visibility Badge */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n            material.isPublic\r\n              ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n              : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\r\n          }`}>\r\n            {material.isPublic ? 'Public' : 'Private'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Card Actions */}\r\n      <div className=\"px-4 py-3 bg-gray-50 dark:bg-gray-600 border-t border-gray-200 dark:border-gray-500\">\r\n        <div className=\"flex items-center justify-between space-x-2\">\r\n          <button\r\n            onClick={() => onSelect(material)}\r\n            className=\"flex-1 px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-900 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-800\"\r\n          >\r\n            Preview\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => onDownload(material)}\r\n            className=\"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\"\r\n          >\r\n            📥\r\n          </button>\r\n          \r\n          {canDeleteThis && (\r\n            <button\r\n              onClick={() => onDelete(material._id)}\r\n              className=\"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:bg-red-900 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-800\"\r\n            >\r\n              🗑️\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} ","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-hot-toast';\r\nimport api from '../../lib/api';\r\nimport { Material, getFileTypeIcon, getFileTypeLabel, formatFileSize, formatDate } from '../../types/materials';\r\n\r\ninterface PreviewComponentProps {\r\n  material: Material;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function PreviewComponent({ material, isOpen, onClose }: PreviewComponentProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Check if file type is previewable\r\n  const isPreviewable = ['pdf', 'image'].includes(material.type);\r\n\r\n  // Load preview URL\r\n  useEffect(() => {\r\n    if (isOpen && isPreviewable) {\r\n      loadPreview();\r\n    }\r\n  }, [isOpen, material._id]);\r\n\r\n  const loadPreview = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await api.get(`/api/materials/${material._id}/preview`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      const url = URL.createObjectURL(response.data);\r\n      setPreviewUrl(url);\r\n    } catch (error: any) {\r\n      console.error('Error loading preview:', error);\r\n      setError('Failed to load preview. The file may not be available.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Download file\r\n  const handleDownload = async () => {\r\n    try {\r\n      const response = await api.get(`/api/materials/${material._id}/download`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', material.originalName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      toast.success('Download started');\r\n    } catch (error: any) {\r\n      console.error('Error downloading file:', error);\r\n      toast.error('Failed to download file');\r\n    }\r\n  };\r\n\r\n  // Cleanup preview URL on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (previewUrl) {\r\n        URL.revokeObjectURL(previewUrl);\r\n      }\r\n    };\r\n  }, [previewUrl]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        {/* Background overlay */}\r\n        <div \r\n          className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n          onClick={onClose}\r\n        />\r\n\r\n        {/* Modal */}\r\n        <div className=\"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full\">\r\n          {/* Header */}\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-b border-gray-200 dark:border-gray-600\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\r\n                  <span className=\"text-blue-600 dark:text-blue-400 text-sm\">\r\n                    {getFileTypeIcon(material.type)}\r\n                  </span>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                    {material.originalName}\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    {getFileTypeLabel(material.type)} • {formatFileSize(material.fileSize)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                  onClick={handleDownload}\r\n                  className=\"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                >\r\n                  📥 Download\r\n                </button>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\r\n                >\r\n                  <span className=\"sr-only\">Close</span>\r\n                  <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"px-6 py-4\">\r\n            {/* Material Info */}\r\n            <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">File Information</h4>\r\n                <dl className=\"space-y-1\">\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Type:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">{getFileTypeLabel(material.type)}</dd>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Size:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">{formatFileSize(material.fileSize)}</dd>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Downloads:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">{material.downloadCount}</dd>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Uploaded:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">{formatDate(material.createdAt)}</dd>\r\n                  </div>\r\n                </dl>\r\n              </div>\r\n              \r\n              <div>\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Uploader Information</h4>\r\n                <dl className=\"space-y-1\">\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Name:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">{material.uploaderId.name}</dd>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Role:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white capitalize\">{material.uploaderId.role}</dd>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Visibility:</dt>\r\n                    <dd className=\"text-gray-900 dark:text-white\">\r\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                        material.isPublic\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n                          : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\r\n                      }`}>\r\n                        {material.isPublic ? 'Public' : 'Private'}\r\n                      </span>\r\n                    </dd>\r\n                  </div>\r\n                </dl>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Description */}\r\n            {material.description && (\r\n              <div className=\"mb-6\">\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Description</h4>\r\n                <p className=\"text-gray-600 dark:text-gray-300\">{material.description}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Tags */}\r\n            {material.tags.length > 0 && (\r\n              <div className=\"mb-6\">\r\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Tags</h4>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {material.tags.map((tag, index) => (\r\n                    <span\r\n                      key={index}\r\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\r\n                    >\r\n                      {tag}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Preview Content */}\r\n            <div className=\"border-t border-gray-200 dark:border-gray-600 pt-6\">\r\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-4\">Preview</h4>\r\n              \r\n              {loading && (\r\n                <div className=\"flex justify-center items-center py-12\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                  <span className=\"ml-2 text-gray-600 dark:text-gray-400\">Loading preview...</span>\r\n                </div>\r\n              )}\r\n\r\n              {error && (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"text-red-500 mb-2\">⚠️</div>\r\n                  <p className=\"text-gray-600 dark:text-gray-400\">{error}</p>\r\n                  <button\r\n                    onClick={handleDownload}\r\n                    className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                  >\r\n                    Download Instead\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {!loading && !error && isPreviewable && previewUrl && (\r\n                <div className=\"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden\">\r\n                  {material.type === 'pdf' && (\r\n                    <iframe\r\n                      src={previewUrl}\r\n                      className=\"w-full h-96\"\r\n                      title={material.originalName}\r\n                    />\r\n                  )}\r\n                  \r\n                  {material.type === 'image' && (\r\n                    <img\r\n                      src={previewUrl}\r\n                      alt={material.originalName}\r\n                      className=\"w-full h-auto max-h-96 object-contain\"\r\n                    />\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {!loading && !error && !isPreviewable && (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"text-4xl mb-4\">\r\n                    {material.type === 'video' ? '🎥' : material.type === 'audio' ? '🎵' : '📄'}\r\n                  </div>\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n                    Preview Not Available\r\n                  </h3>\r\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                    This file type cannot be previewed in the browser. Please download the file to view it.\r\n                  </p>\r\n                  <button\r\n                    onClick={handleDownload}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                  >\r\n                    📥 Download File\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 px-6 py-3 border-t border-gray-200 dark:border-gray-600\">\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                onClick={onClose}\r\n                className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} ","import React, { useState, useEffect } from 'react';\r\nimport Head from 'next/head';\r\nimport { useAuth, useRoleGuard } from '@/context/AuthContext';\r\nimport { useCanUploadMaterials, useCanManageMaterials } from '@/hooks/useAuth';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport UploadComponent from '@/components/materials/Upload';\r\nimport ListComponent from '@/components/materials/List';\r\nimport PreviewComponent from '@/components/materials/Preview';\r\nimport { Material } from '@/types/materials';\r\n\r\nexport default function MaterialsPage() {\r\n  const { user } = useAuth();\r\n  const { hasAccess, isLoading } = useRoleGuard(['student', 'teacher', 'admin']);\r\n  const canUpload = useCanUploadMaterials();\r\n  const canManage = useCanManageMaterials();\r\n  \r\n  const [materials, setMaterials] = useState<Material[]>([]);\r\n  const [selectedMaterial, setSelectedMaterial] = useState<Material | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [filters, setFilters] = useState({\r\n    type: '',\r\n    tags: '',\r\n    search: '',\r\n    isPublic: ''\r\n  });\r\n\r\n  // Show loading state while checking authentication\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show access denied if user doesn't have permission\r\n  if (!hasAccess) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\r\n            Access Denied\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\r\n            You don't have permission to access the materials page.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleMaterialSelect = (material: Material) => {\r\n    setSelectedMaterial(material);\r\n    setShowPreview(true);\r\n  };\r\n\r\n  const handleUploadSuccess = (newMaterial: Material) => {\r\n    setMaterials(prev => [newMaterial, ...prev]);\r\n  };\r\n\r\n  const handleMaterialDelete = (materialId: string) => {\r\n    setMaterials(prev => prev.filter(m => m._id !== materialId));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Materials - Verbfy</title>\r\n        <meta name=\"description\" content=\"Learning materials and resources\" />\r\n      </Head>\r\n\r\n      <DashboardLayout \r\n        allowedRoles={['student', 'teacher', 'admin']}\r\n        title=\"Learning Materials\"\r\n      >\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\r\n              Learning Materials\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Access and manage educational resources for your English learning journey\r\n            </p>\r\n          </div>\r\n\r\n          {/* Upload Section - Only for teachers and admins */}\r\n          {canUpload && (\r\n            <div className=\"mb-8\">\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n                  Upload New Material\r\n                </h2>\r\n                <UploadComponent onUploadSuccess={handleUploadSuccess} />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Materials List */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\r\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n                Available Materials\r\n              </h2>\r\n              \r\n              {/* Filters */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    File Type\r\n                  </label>\r\n                  <select\r\n                    value={filters.type}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, type: e.target.value }))}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  >\r\n                    <option value=\"\">All Types</option>\r\n                    <option value=\"pdf\">PDF</option>\r\n                    <option value=\"image\">Images</option>\r\n                    <option value=\"video\">Videos</option>\r\n                    <option value=\"document\">Documents</option>\r\n                    <option value=\"audio\">Audio</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Tags\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Filter by tags...\"\r\n                    value={filters.tags}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, tags: e.target.value }))}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Search\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search materials...\"\r\n                    value={filters.search}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Visibility\r\n                  </label>\r\n                  <select\r\n                    value={filters.isPublic}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, isPublic: e.target.value }))}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  >\r\n                    <option value=\"\">All</option>\r\n                    <option value=\"true\">Public</option>\r\n                    <option value=\"false\">Private</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6\">\r\n              <ListComponent\r\n                filters={filters}\r\n                onMaterialSelect={handleMaterialSelect}\r\n                onMaterialDelete={handleMaterialDelete}\r\n                canDelete={canManage}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Preview Modal */}\r\n        {showPreview && selectedMaterial && (\r\n          <PreviewComponent\r\n            material={selectedMaterial}\r\n            isOpen={showPreview}\r\n            onClose={() => {\r\n              setShowPreview(false);\r\n              setSelectedMaterial(null);\r\n            }}\r\n          />\r\n        )}\r\n      </DashboardLayout>\r\n    </>\r\n  );\r\n} ","import { useAuth as useAuthContext, useRoleGuard as useRoleGuardFromContext } from '../context/AuthContext';\r\n\r\n// Re-export the main auth hook\r\nexport { useAuthContext as useAuth };\r\n\r\n// Role-based access hook\r\nexport function useRoleGuard(allowedRoles: ('student' | 'teacher' | 'admin')[]) {\r\n  return useRoleGuardFromContext(allowedRoles);\r\n}\r\n\r\n// Hook to check if user has specific role\r\nexport function useHasRole(role: 'student' | 'teacher' | 'admin') {\r\n  const { user } = useAuthContext();\r\n  return user?.role === role;\r\n}\r\n\r\n// Hook to check if user has any of the specified roles\r\nexport function useHasAnyRole(roles: ('student' | 'teacher' | 'admin')[]) {\r\n  const { user } = useAuthContext();\r\n  return user ? roles.includes(user.role) : false;\r\n}\r\n\r\n// Hook to check if user is authenticated\r\nexport function useIsAuthenticated() {\r\n  const { isAuthenticated } = useAuthContext();\r\n  return isAuthenticated;\r\n}\r\n\r\n// Hook to get current user role\r\nexport function useUserRole() {\r\n  const { user } = useAuthContext();\r\n  return user?.role;\r\n}\r\n\r\n// Hook to check if user can access materials (upload)\r\nexport function useCanUploadMaterials() {\r\n  const { user } = useAuthContext();\r\n  return user?.role === 'teacher' || user?.role === 'admin';\r\n}\r\n\r\n// Hook to check if user can manage materials (delete)\r\nexport function useCanManageMaterials() {\r\n  const { user } = useAuthContext();\r\n  return user?.role === 'teacher' || user?.role === 'admin';\r\n}\r\n\r\n// Hook to check if user is admin\r\nexport function useIsAdmin() {\r\n  const { user } = useAuthContext();\r\n  return user?.role === 'admin';\r\n}\r\n\r\n// Hook to check if user is teacher\r\nexport function useIsTeacher() {\r\n  const { user } = useAuthContext();\r\n  return user?.role === 'teacher';\r\n}\r\n\r\n// Hook to check if user is student\r\nexport function useIsStudent() {\r\n  const { user } = useAuthContext();\r\n  return user?.role === 'student';\r\n}\r\n\r\n// Hook to get user permissions\r\nexport function useUserPermissions() {\r\n  const { user } = useAuthContext();\r\n  \r\n  if (!user) return null;\r\n\r\n  const permissions = {\r\n    canUploadMaterials: user.role === 'teacher' || user.role === 'admin',\r\n    canManageMaterials: user.role === 'teacher' || user.role === 'admin',\r\n    canViewAnalytics: user.role === 'admin',\r\n    canManageUsers: user.role === 'admin',\r\n    canViewEarnings: user.role === 'teacher' || user.role === 'admin',\r\n    canBookLessons: user.role === 'student',\r\n    canTeachLessons: user.role === 'teacher',\r\n    canAccessAdminPanel: user.role === 'admin',\r\n  };\r\n\r\n  return permissions;\r\n}\r\n\r\n// Hook to check if user can access a specific feature\r\nexport function useCanAccess(feature: string) {\r\n  const permissions = useUserPermissions();\r\n  \r\n  if (!permissions) return false;\r\n\r\n  const featurePermissions: Record<string, boolean> = {\r\n    'materials.upload': permissions.canUploadMaterials,\r\n    'materials.manage': permissions.canManageMaterials,\r\n    'analytics.view': permissions.canViewAnalytics,\r\n    'users.manage': permissions.canManageUsers,\r\n    'earnings.view': permissions.canViewEarnings,\r\n    'lessons.book': permissions.canBookLessons,\r\n    'lessons.teach': permissions.canTeachLessons,\r\n    'admin.panel': permissions.canAccessAdminPanel,\r\n  };\r\n\r\n  return featurePermissions[feature] || false;\r\n}\r\n\r\n// Hook to get user dashboard URL\r\nexport function useDashboardUrl() {\r\n  const { user } = useAuthContext();\r\n  \r\n  if (!user) return '/login';\r\n  \r\n  switch (user.role) {\r\n    case 'student':\r\n      return '/dashboard/student';\r\n    case 'teacher':\r\n      return '/dashboard/teacher';\r\n    case 'admin':\r\n      return '/dashboard/admin';\r\n    default:\r\n      return '/login';\r\n  }\r\n}\r\n\r\n// Hook to check if user should be redirected\r\nexport function useShouldRedirect() {\r\n  const { user, isAuthenticated, isLoading } = useAuthContext();\r\n  \r\n  if (isLoading) return { shouldRedirect: false, redirectTo: null };\r\n  \r\n  if (!isAuthenticated) {\r\n    return { shouldRedirect: true, redirectTo: '/login' };\r\n  }\r\n  \r\n  if (user) {\r\n    const currentPath = typeof window !== 'undefined' ? window.location.pathname : '';\r\n    \r\n    // Check if user is on the correct dashboard\r\n    const expectedDashboard = `/dashboard/${user.role}`;\r\n    if (currentPath.startsWith('/dashboard') && currentPath !== expectedDashboard) {\r\n      return { shouldRedirect: true, redirectTo: expectedDashboard };\r\n    }\r\n  }\r\n  \r\n  return { shouldRedirect: false, redirectTo: null };\r\n} ","export interface Material {\r\n  _id: string;\r\n  uploaderId: {\r\n    _id: string;\r\n    name: string;\r\n    email: string;\r\n    role: 'student' | 'teacher' | 'admin';\r\n  };\r\n  originalName: string;\r\n  savedName: string;\r\n  type: 'pdf' | 'image' | 'video' | 'document' | 'audio';\r\n  mimeType: string;\r\n  fileSize: number;\r\n  tags: string[];\r\n  role: 'teacher' | 'student' | 'admin';\r\n  description?: string;\r\n  isPublic: boolean;\r\n  downloadCount: number;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  previewURL?: string;\r\n}\r\n\r\nexport interface MaterialFilters {\r\n  type: string;\r\n  tags: string;\r\n  search: string;\r\n  isPublic: string;\r\n  uploaderId?: string;\r\n  page?: number;\r\n  limit?: number;\r\n}\r\n\r\nexport interface MaterialUploadData {\r\n  file: File;\r\n  tags?: string;\r\n  description?: string;\r\n  isPublic?: boolean;\r\n}\r\n\r\nexport interface MaterialUpdateData {\r\n  tags?: string;\r\n  description?: string;\r\n  isPublic?: boolean;\r\n}\r\n\r\nexport interface MaterialsResponse {\r\n  success: boolean;\r\n  data: {\r\n    materials: Material[];\r\n    pagination: {\r\n      page: number;\r\n      limit: number;\r\n      total: number;\r\n      pages: number;\r\n    };\r\n  };\r\n  message: string;\r\n}\r\n\r\nexport interface MaterialResponse {\r\n  success: boolean;\r\n  data: Material;\r\n  message: string;\r\n}\r\n\r\nexport interface UploadResponse {\r\n  success: boolean;\r\n  data: Material;\r\n  message: string;\r\n}\r\n\r\n// File type configurations\r\nexport const FILE_TYPES = {\r\n  pdf: {\r\n    label: 'PDF Document',\r\n    icon: '📄',\r\n    extensions: ['.pdf'],\r\n    mimeTypes: ['application/pdf']\r\n  },\r\n  image: {\r\n    label: 'Image',\r\n    icon: '🖼️',\r\n    extensions: ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\r\n    mimeTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\r\n  },\r\n  video: {\r\n    label: 'Video',\r\n    icon: '🎥',\r\n    extensions: ['.mp4', '.webm', '.ogg', '.avi'],\r\n    mimeTypes: ['video/mp4', 'video/webm', 'video/ogg', 'video/avi']\r\n  },\r\n  document: {\r\n    label: 'Document',\r\n    icon: '📝',\r\n    extensions: ['.doc', '.docx', '.txt'],\r\n    mimeTypes: [\r\n      'application/msword',\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      'text/plain'\r\n    ]\r\n  },\r\n  audio: {\r\n    label: 'Audio',\r\n    icon: '🎵',\r\n    extensions: ['.mp3', '.wav', '.ogg'],\r\n    mimeTypes: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/mp3']\r\n  }\r\n} as const;\r\n\r\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\r\n\r\nexport const getFileTypeIcon = (typeOrMimeType: Material['type'] | string): string => {\r\n  // If it's a MIME type, determine the type from it\r\n  if (typeOrMimeType.includes('/')) {\r\n    if (typeOrMimeType.startsWith('image/')) return '🖼️';\r\n    if (typeOrMimeType.startsWith('video/')) return '🎥';\r\n    if (typeOrMimeType.startsWith('audio/')) return '🎵';\r\n    if (typeOrMimeType === 'application/pdf') return '📄';\r\n    return '📝';\r\n  }\r\n  \r\n  // If it's a type string, use the existing logic\r\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.icon || '📄';\r\n};\r\n\r\nexport const getFileTypeLabel = (typeOrMimeType: Material['type'] | string): string => {\r\n  // If it's a MIME type, determine the type from it\r\n  if (typeOrMimeType.includes('/')) {\r\n    if (typeOrMimeType.startsWith('image/')) return 'Image';\r\n    if (typeOrMimeType.startsWith('video/')) return 'Video';\r\n    if (typeOrMimeType.startsWith('audio/')) return 'Audio';\r\n    if (typeOrMimeType === 'application/pdf') return 'PDF Document';\r\n    return 'Document';\r\n  }\r\n  \r\n  // If it's a type string, use the existing logic\r\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.label || 'File';\r\n};\r\n\r\nexport const formatFileSize = (bytes: number): string => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  \r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n};\r\n\r\nexport const formatDate = (dateString: string): string => {\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  });\r\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","UploadComponent","param","mimeType","onUploadSuccess","uploading","setUploading","useState","uploadProgress","setUploadProgress","selectedFile","setSelectedFile","formData","setFormData","tags","description","isPublic","fileInputRef","useRef","validateFile","size","MAX_FILE_SIZE","concat","allowedMimeTypes","values","FILE_TYPES","flatMap","type","mimeTypes","includes","file","onDrop","useCallback","acceptedFiles","rejectedFiles","length","error","errors","code","toast","validationError","getRootProps","getInputProps","isDragActive","isDragReject","useDropzone","accept","maxSize","multiple","handleSubmit","e","preventDefault","formDataToSend","FormData","append","toString","response","api","post","headers","onUploadProgress","progressEvent","total","progress","Math","round","loaded","data","success","console","errorMessage","message","jsx_runtime","jsxs","div","className","jsx","input","p","button","onClick","current","click","ref","onChange","target","files","span","startsWith","name","toFixed","style","width","form","onSubmit","label","placeholder","value","prev","id","checked","htmlFor","disabled","ListComponent","filters","onMaterialSelect","onMaterialDelete","canDelete","materials","setMaterials","loading","setLoading","pagination","setPagination","page","limit","pages","fetchMaterials","params","URLSearchParams","search","uploaderId","get","handleDelete","materialId","confirm","delete","handleDownload","material","_id","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","originalName","body","appendChild","remove","revokeObjectURL","useEffect","handlePageChange","h3","Object","some","f","map","MaterialCard","onSelect","onDelete","onDownload","nav","Array","from","_","i","min","isOwner","localStorage","getItem","canDeleteThis","role","getFileTypeIcon","getFileTypeLabel","formatFileSize","fileSize","downloadCount","slice","tag","index","formatDate","createdAt","PreviewComponent","isOpen","onClose","previewUrl","setPreviewUrl","setError","isPreviewable","loadPreview","svg","fill","viewBox","stroke","path","strokeLinecap","strokeLinejoin","strokeWidth","d","h4","dl","dt","dd","iframe","src","title","img","alt","MaterialsPage","user","useAuth","hasAccess","isLoading","useRoleGuard","canUpload","useCanUploadMaterials","canManage","useCanManageMaterials","selectedMaterial","setSelectedMaterial","showPreview","setShowPreview","setFilters","Fragment","Head","meta","content","DashboardLayout","allowedRoles","h1","h2","newMaterial","select","option","filter","m","useRoleGuardFromContext","useAuthContext","pdf","icon","extensions","image","video","audio","typeOrMimeType","bytes","floor","log","parseFloat","pow","sizes","date","Date","dateString","toLocaleDateString","year","month","day","hour","minute"],"sourceRoot":""}