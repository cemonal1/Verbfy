{"version":3,"file":"static/chunks/pages/materials-8cdbc157991b6433.js","mappings":"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","sources":["webpack://_N_E/?205d","webpack://_N_E/./src/components/materials/Upload.tsx","webpack://_N_E/./src/components/materials/List.tsx","webpack://_N_E/./src/components/materials/Preview.tsx","webpack://_N_E/./pages/materials/index.tsx","webpack://_N_E/./src/hooks/useAuth.ts","webpack://_N_E/./src/types/materials.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/materials\",\n      function () {\n        return require(\"private-next-pages/materials/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/materials\"])\n      });\n    }\n  ","import React, { useState, useCallback, useRef } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { toast } from 'react-hot-toast';\nimport { AxiosProgressEvent } from 'axios';\nimport api from '../../lib/api';\nimport { Material, MaterialUploadData, MAX_FILE_SIZE, FILE_TYPES } from '../../types/materials';\n\ninterface UploadComponentProps {\n  onUploadSuccess: (material: Material) => void;\n}\n\nexport default function UploadComponent({ onUploadSuccess }: UploadComponentProps) {\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [formData, setFormData] = useState({\n    tags: '',\n    description: '',\n    isPublic: false\n  });\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Validate file\n  const validateFile = (file: File): string | null => {\n    // Check file size\n    if (file.size > MAX_FILE_SIZE) {\n      return `File size exceeds the maximum limit of ${MAX_FILE_SIZE / (1024 * 1024)}MB`;\n    }\n\n    // Check file type\n    const allowedMimeTypes = Object.values(FILE_TYPES).flatMap(type => type.mimeTypes);\n    if (!allowedMimeTypes.includes(file.type as any)) {\n      return 'File type not supported. Please upload PDF, image, video, document, or audio files.';\n    }\n\n    return null;\n  };\n\n  // Handle file selection\n  const onDrop = useCallback((acceptedFiles: File[], rejectedFiles: any[]) => {\n    if (rejectedFiles.length > 0) {\n      const error = rejectedFiles[0].errors[0];\n      if (error.code === 'file-too-large') {\n        toast.error(`File size exceeds the maximum limit of ${MAX_FILE_SIZE / (1024 * 1024)}MB`);\n      } else if (error.code === 'file-invalid-type') {\n        toast.error('File type not supported. Please upload PDF, image, video, document, or audio files.');\n      } else {\n        toast.error('File upload failed. Please try again.');\n      }\n      return;\n    }\n\n    if (acceptedFiles.length > 0) {\n      const file = acceptedFiles[0];\n      const validationError = validateFile(file);\n      \n      if (validationError) {\n        toast.error(validationError);\n        return;\n      }\n\n      setSelectedFile(file);\n    }\n  }, []);\n\n  // Dropzone configuration\n  const { getRootProps, getInputProps, isDragActive, isDragReject } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'image/*': ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\n      'video/*': ['.mp4', '.webm', '.ogg', '.avi'],\n      'application/msword': ['.doc'],\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\n      'text/plain': ['.txt'],\n      'audio/*': ['.mp3', '.wav', '.ogg']\n    },\n    maxSize: MAX_FILE_SIZE,\n    multiple: false\n  });\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedFile) {\n      toast.error('Please select a file to upload');\n      return;\n    }\n\n    setUploading(true);\n    setUploadProgress(0);\n\n    try {\n      const formDataToSend = new FormData();\n      formDataToSend.append('file', selectedFile);\n      \n      if (formData.tags) {\n        formDataToSend.append('tags', formData.tags);\n      }\n      \n      if (formData.description) {\n        formDataToSend.append('description', formData.description);\n      }\n      \n      formDataToSend.append('isPublic', formData.isPublic.toString());\n\n      const response = await api.post('/api/materials/upload', formDataToSend, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: (progressEvent: AxiosProgressEvent) => {\n          if (progressEvent.total) {\n            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n            setUploadProgress(progress);\n          }\n        },\n      });\n\n      if (response.data.success) {\n        toast.success('Material uploaded successfully!');\n        onUploadSuccess(response.data.data);\n        \n        // Reset form\n        setSelectedFile(null);\n        setFormData({\n          tags: '',\n          description: '',\n          isPublic: false\n        });\n        setUploadProgress(0);\n      }\n    } catch (error: any) {\n      console.error('Upload error:', error);\n      const errorMessage = error.response?.data?.message || 'Upload failed. Please try again.';\n      toast.error(errorMessage);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Handle file input change (fallback)\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const validationError = validateFile(file);\n      if (validationError) {\n        toast.error(validationError);\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Drag and Drop Zone */}\n      <div\n        {...getRootProps()}\n        className={`\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n          ${isDragActive && !isDragReject\n            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n            : isDragReject\n            ? 'border-red-500 bg-red-50 dark:bg-red-900/20'\n            : 'border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500'\n          }\n        `}\n      >\n        <input {...getInputProps()} />\n        \n        <div className=\"space-y-4\">\n          <div className=\"text-4xl\">\n            {isDragActive && !isDragReject ? '📁' : '📤'}\n          </div>\n          \n          <div>\n            <p className=\"text-lg font-medium text-gray-900 dark:text-white\">\n              {isDragActive && !isDragReject\n                ? 'Drop your file here'\n                : isDragReject\n                ? 'File type not supported'\n                : 'Drag & drop a file here, or click to select'\n              }\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n              PDF, Images, Videos, Documents, Audio (max 50MB)\n            </p>\n          </div>\n\n          {!isDragActive && (\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Choose File\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Fallback File Input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        onChange={handleFileInputChange}\n        accept=\".pdf,.jpg,.jpeg,.png,.gif,.webp,.mp4,.webm,.ogg,.avi,.doc,.docx,.txt,.mp3,.wav\"\n        className=\"hidden\"\n      />\n\n      {/* Selected File Display */}\n      {selectedFile && (\n        <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\n                <span className=\"text-blue-600 dark:text-blue-400 text-lg\">\n                  {getFileTypeIcon(selectedFile.type)}\n                </span>\n              </div>\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n                {selectedFile.name}\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n              </p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setSelectedFile(null)}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              ✕\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Upload Progress */}\n      {uploading && (\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"text-gray-700 dark:text-gray-300\">Uploading...</span>\n            <span className=\"text-gray-500 dark:text-gray-400\">{uploadProgress}%</span>\n          </div>\n          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n            <div\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${uploadProgress}%` }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Upload Form */}\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Tags (optional)\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"grammar, beginner, exercises\"\n              value={formData.tags}\n              onChange={(e) => setFormData(prev => ({ ...prev, tags: e.target.value }))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              Separate tags with commas\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              Description (optional)\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Brief description of the material\"\n              value={formData.description}\n              onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex items-center\">\n          <input\n            type=\"checkbox\"\n            id=\"isPublic\"\n            checked={formData.isPublic}\n            onChange={(e) => setFormData(prev => ({ ...prev, isPublic: e.target.checked }))}\n            className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n          />\n          <label htmlFor=\"isPublic\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n            Make this material public (visible to all users)\n          </label>\n        </div>\n\n        <div className=\"flex justify-end space-x-3\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              setSelectedFile(null);\n              setFormData({\n                tags: '',\n                description: '',\n                isPublic: false\n              });\n            }}\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            disabled={!selectedFile || uploading}\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {uploading ? 'Uploading...' : 'Upload Material'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// Helper function to get file type icon\nfunction getFileTypeIcon(mimeType: string): string {\n  if (mimeType.startsWith('image/')) return '🖼️';\n  if (mimeType.startsWith('video/')) return '🎥';\n  if (mimeType.startsWith('audio/')) return '🎵';\n  if (mimeType === 'application/pdf') return '��';\n  return '📝';\n} ","import React, { useState, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport api from '../../lib/api';\nimport { Material, MaterialFilters, getFileTypeIcon, getFileTypeLabel, formatFileSize, formatDate } from '../../types/materials';\n\ninterface ListComponentProps {\n  filters: MaterialFilters;\n  onMaterialSelect: (material: Material) => void;\n  onMaterialDelete: (materialId: string) => void;\n  canDelete: boolean;\n}\n\nexport default function ListComponent({ \n  filters, \n  onMaterialSelect, \n  onMaterialDelete, \n  canDelete \n}: ListComponentProps) {\n  const [materials, setMaterials] = useState<Material[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [pagination, setPagination] = useState({\n    page: 1,\n    limit: 12,\n    total: 0,\n    pages: 0\n  });\n\n  // Fetch materials\n  const fetchMaterials = async (page = 1) => {\n    setLoading(true);\n    try {\n      const params = new URLSearchParams();\n      \n      // Add filters\n      if (filters.type) params.append('type', filters.type);\n      if (filters.tags) params.append('tags', filters.tags);\n      if (filters.search) params.append('search', filters.search);\n      if (filters.isPublic) params.append('isPublic', filters.isPublic);\n      if (filters.uploaderId) params.append('uploaderId', filters.uploaderId);\n      \n      // Add pagination\n      params.append('page', page.toString());\n      params.append('limit', pagination.limit.toString());\n\n      const response = await api.get(`/api/materials?${params.toString()}`);\n      \n      if (response.data.success) {\n        setMaterials(response.data.data.materials);\n        setPagination(response.data.data.pagination);\n      }\n    } catch (error: any) {\n      console.error('Error fetching materials:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to load materials';\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete material\n  const handleDelete = async (materialId: string) => {\n    if (!confirm('Are you sure you want to delete this material?')) {\n      return;\n    }\n\n    try {\n      const response = await api.delete(`/api/materials/${materialId}`);\n      \n      if (response.data.success) {\n        toast.success('Material deleted successfully');\n        onMaterialDelete(materialId);\n        // Refresh the list\n        fetchMaterials(pagination.page);\n      }\n    } catch (error: any) {\n      console.error('Error deleting material:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to delete material';\n      toast.error(errorMessage);\n    }\n  };\n\n  // Download material\n  const handleDownload = async (material: Material) => {\n    try {\n      const response = await api.get(`/api/materials/${material._id}/download`, {\n        responseType: 'blob'\n      });\n      \n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', material.originalName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('Download started');\n    } catch (error: any) {\n      console.error('Error downloading material:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to download material';\n      toast.error(errorMessage);\n    }\n  };\n\n  // Fetch materials when filters change\n  useEffect(() => {\n    fetchMaterials(1);\n  }, [filters]);\n\n  // Handle pagination\n  const handlePageChange = (page: number) => {\n    fetchMaterials(page);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <span className=\"ml-2 text-gray-600 dark:text-gray-400\">Loading materials...</span>\n      </div>\n    );\n  }\n\n  if (materials.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-4xl mb-4\">📚</div>\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n          No materials found\n        </h3>\n        <p className=\"text-gray-500 dark:text-gray-400\">\n          {Object.values(filters).some(f => f) \n            ? 'Try adjusting your filters to see more results.'\n            : 'No materials have been uploaded yet.'\n          }\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Materials Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {materials.map((material) => (\n          <MaterialCard\n            key={material._id}\n            material={material}\n            onSelect={onMaterialSelect}\n            onDelete={handleDelete}\n            onDownload={handleDownload}\n            canDelete={canDelete}\n          />\n        ))}\n      </div>\n\n      {/* Pagination */}\n      {pagination.pages > 1 && (\n        <div className=\"flex justify-center\">\n          <nav className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => handlePageChange(pagination.page - 1)}\n              disabled={pagination.page <= 1}\n              className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700\"\n            >\n              Previous\n            </button>\n            \n            {Array.from({ length: pagination.pages }, (_, i) => i + 1).map((page) => (\n              <button\n                key={page}\n                onClick={() => handlePageChange(page)}\n                className={`px-3 py-2 text-sm font-medium rounded-md ${\n                  page === pagination.page\n                    ? 'text-white bg-blue-600 border border-blue-600'\n                    : 'text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700'\n                }`}\n              >\n                {page}\n              </button>\n            ))}\n            \n            <button\n              onClick={() => handlePageChange(pagination.page + 1)}\n              disabled={pagination.page >= pagination.pages}\n              className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700\"\n            >\n              Next\n            </button>\n          </nav>\n        </div>\n      )}\n\n      {/* Results Info */}\n      <div className=\"text-center text-sm text-gray-500 dark:text-gray-400\">\n        Showing {((pagination.page - 1) * pagination.limit) + 1} to{' '}\n        {Math.min(pagination.page * pagination.limit, pagination.total)} of{' '}\n        {pagination.total} materials\n      </div>\n    </div>\n  );\n}\n\n// Material Card Component\ninterface MaterialCardProps {\n  material: Material;\n  onSelect: (material: Material) => void;\n  onDelete: (materialId: string) => void;\n  onDownload: (material: Material) => void;\n  canDelete: boolean;\n}\n\nfunction MaterialCard({ material, onSelect, onDelete, onDownload, canDelete }: MaterialCardProps) {\n  const isOwner = material.uploaderId._id === localStorage.getItem('verbfy_user_id');\n  const canDeleteThis = canDelete && (isOwner || material.uploaderId.role === 'admin');\n\n  return (\n    <div className=\"bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden hover:shadow-md transition-shadow\">\n      {/* Card Header */}\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-600\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\n              <span className=\"text-blue-600 dark:text-blue-400 text-lg\">\n                {getFileTypeIcon(material.type)}\n              </span>\n            </div>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n              {material.originalName}\n            </h3>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n              {getFileTypeLabel(material.type)}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Card Body */}\n      <div className=\"p-4 space-y-3\">\n        {/* File Info */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-xs text-gray-500 dark:text-gray-400\">\n            <span>Size: {formatFileSize(material.fileSize)}</span>\n            <span>Downloads: {material.downloadCount}</span>\n          </div>\n          \n          {material.description && (\n            <p className=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-2\">\n              {material.description}\n            </p>\n          )}\n        </div>\n\n        {/* Tags */}\n        {material.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-1\">\n            {material.tags.slice(0, 3).map((tag, index) => (\n              <span\n                key={index}\n                className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n              >\n                {tag}\n              </span>\n            ))}\n            {material.tags.length > 3 && (\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200\">\n                +{material.tags.length - 3}\n              </span>\n            )}\n          </div>\n        )}\n\n        {/* Uploader Info */}\n        <div className=\"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\n          <span>By {material.uploaderId.name}</span>\n          <span>{formatDate(material.createdAt)}</span>\n        </div>\n\n        {/* Visibility Badge */}\n        <div className=\"flex items-center justify-between\">\n          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n            material.isPublic\n              ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n              : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n          }`}>\n            {material.isPublic ? 'Public' : 'Private'}\n          </span>\n        </div>\n      </div>\n\n      {/* Card Actions */}\n      <div className=\"px-4 py-3 bg-gray-50 dark:bg-gray-600 border-t border-gray-200 dark:border-gray-500\">\n        <div className=\"flex items-center justify-between space-x-2\">\n          <button\n            onClick={() => onSelect(material)}\n            className=\"flex-1 px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-900 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-800\"\n          >\n            Preview\n          </button>\n          \n          <button\n            onClick={() => onDownload(material)}\n            className=\"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\"\n          >\n            📥\n          </button>\n          \n          {canDeleteThis && (\n            <button\n              onClick={() => onDelete(material._id)}\n              className=\"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:bg-red-900 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-800\"\n            >\n              🗑️\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n} ","import React, { useState, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport api from '../../lib/api';\nimport { Material, getFileTypeIcon, getFileTypeLabel, formatFileSize, formatDate } from '../../types/materials';\n\ninterface PreviewComponentProps {\n  material: Material;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function PreviewComponent({ material, isOpen, onClose }: PreviewComponentProps) {\n  const [loading, setLoading] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check if file type is previewable\n  const isPreviewable = ['pdf', 'image'].includes(material.type);\n\n  // Load preview URL\n  useEffect(() => {\n    if (isOpen && isPreviewable) {\n      loadPreview();\n    }\n  }, [isOpen, material._id]);\n\n  const loadPreview = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await api.get(`/api/materials/${material._id}/preview`, {\n        responseType: 'blob'\n      });\n      \n      const url = URL.createObjectURL(response.data);\n      setPreviewUrl(url);\n    } catch (error: any) {\n      console.error('Error loading preview:', error);\n      setError('Failed to load preview. The file may not be available.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Download file\n  const handleDownload = async () => {\n    try {\n      const response = await api.get(`/api/materials/${material._id}/download`, {\n        responseType: 'blob'\n      });\n      \n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', material.originalName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('Download started');\n    } catch (error: any) {\n      console.error('Error downloading file:', error);\n      toast.error('Failed to download file');\n    }\n  };\n\n  // Cleanup preview URL on unmount\n  useEffect(() => {\n    return () => {\n      if (previewUrl) {\n        URL.revokeObjectURL(previewUrl);\n      }\n    };\n  }, [previewUrl]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n        {/* Background overlay */}\n        <div \n          className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <div className=\"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full\">\n          {/* Header */}\n          <div className=\"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-b border-gray-200 dark:border-gray-600\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center\">\n                  <span className=\"text-blue-600 dark:text-blue-400 text-sm\">\n                    {getFileTypeIcon(material.type)}\n                  </span>\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                    {material.originalName}\n                  </h3>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {getFileTypeLabel(material.type)} • {formatFileSize(material.fileSize)}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={handleDownload}\n                  className=\"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  📥 Download\n                </button>\n                <button\n                  onClick={onClose}\n                  className=\"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\n                >\n                  <span className=\"sr-only\">Close</span>\n                  <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"px-6 py-4\">\n            {/* Material Info */}\n            <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n              <div>\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">File Information</h4>\n                <dl className=\"space-y-1\">\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Type:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">{getFileTypeLabel(material.type)}</dd>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Size:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">{formatFileSize(material.fileSize)}</dd>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Downloads:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">{material.downloadCount}</dd>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Uploaded:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">{formatDate(material.createdAt)}</dd>\n                  </div>\n                </dl>\n              </div>\n              \n              <div>\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Uploader Information</h4>\n                <dl className=\"space-y-1\">\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Name:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">{material.uploaderId.name}</dd>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Role:</dt>\n                    <dd className=\"text-gray-900 dark:text-white capitalize\">{material.uploaderId.role}</dd>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <dt className=\"text-gray-500 dark:text-gray-400\">Visibility:</dt>\n                    <dd className=\"text-gray-900 dark:text-white\">\n                      <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                        material.isPublic\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                          : 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n                      }`}>\n                        {material.isPublic ? 'Public' : 'Private'}\n                      </span>\n                    </dd>\n                  </div>\n                </dl>\n              </div>\n            </div>\n\n            {/* Description */}\n            {material.description && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Description</h4>\n                <p className=\"text-gray-600 dark:text-gray-300\">{material.description}</p>\n              </div>\n            )}\n\n            {/* Tags */}\n            {material.tags.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"font-medium text-gray-900 dark:text-white mb-2\">Tags</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {material.tags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\"\n                    >\n                      {tag}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Preview Content */}\n            <div className=\"border-t border-gray-200 dark:border-gray-600 pt-6\">\n              <h4 className=\"font-medium text-gray-900 dark:text-white mb-4\">Preview</h4>\n              \n              {loading && (\n                <div className=\"flex justify-center items-center py-12\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n                  <span className=\"ml-2 text-gray-600 dark:text-gray-400\">Loading preview...</span>\n                </div>\n              )}\n\n              {error && (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-red-500 mb-2\">⚠️</div>\n                  <p className=\"text-gray-600 dark:text-gray-400\">{error}</p>\n                  <button\n                    onClick={handleDownload}\n                    className=\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    Download Instead\n                  </button>\n                </div>\n              )}\n\n              {!loading && !error && isPreviewable && previewUrl && (\n                <div className=\"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden\">\n                  {material.type === 'pdf' && (\n                    <iframe\n                      src={previewUrl}\n                      className=\"w-full h-96\"\n                      title={material.originalName}\n                    />\n                  )}\n                  \n                  {material.type === 'image' && (\n                    <img\n                      src={previewUrl}\n                      alt={material.originalName}\n                      className=\"w-full h-auto max-h-96 object-contain\"\n                    />\n                  )}\n                </div>\n              )}\n\n              {!loading && !error && !isPreviewable && (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-4xl mb-4\">\n                    {material.type === 'video' ? '🎥' : material.type === 'audio' ? '🎵' : '📄'}\n                  </div>\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n                    Preview Not Available\n                  </h3>\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n                    This file type cannot be previewed in the browser. Please download the file to view it.\n                  </p>\n                  <button\n                    onClick={handleDownload}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    📥 Download File\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"bg-gray-50 dark:bg-gray-700 px-6 py-3 border-t border-gray-200 dark:border-gray-600\">\n            <div className=\"flex justify-end space-x-3\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} ","import React, { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { useAuth, useRoleGuard } from '@/context/AuthContext';\nimport { useCanUploadMaterials, useCanManageMaterials } from '@/hooks/useAuth';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport UploadComponent from '@/components/materials/Upload';\nimport ListComponent from '@/components/materials/List';\nimport PreviewComponent from '@/components/materials/Preview';\nimport { Material } from '@/types/materials';\n\nexport default function MaterialsPage() {\n  const { user } = useAuth();\n  const { hasAccess, isLoading } = useRoleGuard(['student', 'teacher', 'admin']);\n  const canUpload = useCanUploadMaterials();\n  const canManage = useCanManageMaterials();\n  \n  const [materials, setMaterials] = useState<Material[]>([]);\n  const [selectedMaterial, setSelectedMaterial] = useState<Material | null>(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [filters, setFilters] = useState({\n    type: '',\n    tags: '',\n    search: '',\n    isPublic: ''\n  });\n\n  // Show loading state while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 dark:text-gray-400\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show access denied if user doesn't have permission\n  if (!hasAccess) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\n            Access Denied\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n            You don't have permission to access the materials page.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleMaterialSelect = (material: Material) => {\n    setSelectedMaterial(material);\n    setShowPreview(true);\n  };\n\n  const handleUploadSuccess = (newMaterial: Material) => {\n    setMaterials(prev => [newMaterial, ...prev]);\n  };\n\n  const handleMaterialDelete = (materialId: string) => {\n    setMaterials(prev => prev.filter(m => m._id !== materialId));\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Materials - Verbfy</title>\n        <meta name=\"description\" content=\"Learning materials and resources\" />\n      </Head>\n\n      <DashboardLayout \n        allowedRoles={['student', 'teacher', 'admin']}\n        title=\"Learning Materials\"\n      >\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n              Learning Materials\n            </h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              Access and manage educational resources for your English learning journey\n            </p>\n          </div>\n\n          {/* Upload Section - Only for teachers and admins */}\n          {canUpload && (\n            <div className=\"mb-8\">\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n                <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                  Upload New Material\n                </h2>\n                <UploadComponent onUploadSuccess={handleUploadSuccess} />\n              </div>\n            </div>\n          )}\n\n          {/* Materials List */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                Available Materials\n              </h2>\n              \n              {/* Filters */}\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    File Type\n                  </label>\n                  <select\n                    value={filters.type}\n                    onChange={(e) => setFilters(prev => ({ ...prev, type: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"\">All Types</option>\n                    <option value=\"pdf\">PDF</option>\n                    <option value=\"image\">Images</option>\n                    <option value=\"video\">Videos</option>\n                    <option value=\"document\">Documents</option>\n                    <option value=\"audio\">Audio</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Tags\n                  </label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Filter by tags...\"\n                    value={filters.tags}\n                    onChange={(e) => setFilters(prev => ({ ...prev, tags: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Search\n                  </label>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search materials...\"\n                    value={filters.search}\n                    onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Visibility\n                  </label>\n                  <select\n                    value={filters.isPublic}\n                    onChange={(e) => setFilters(prev => ({ ...prev, isPublic: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"\">All</option>\n                    <option value=\"true\">Public</option>\n                    <option value=\"false\">Private</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <ListComponent\n                filters={filters}\n                onMaterialSelect={handleMaterialSelect}\n                onMaterialDelete={handleMaterialDelete}\n                canDelete={canManage}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Preview Modal */}\n        {showPreview && selectedMaterial && (\n          <PreviewComponent\n            material={selectedMaterial}\n            isOpen={showPreview}\n            onClose={() => {\n              setShowPreview(false);\n              setSelectedMaterial(null);\n            }}\n          />\n        )}\n      </DashboardLayout>\n    </>\n  );\n} ","import { useAuth as useAuthContext, useRoleGuard as useRoleGuardFromContext } from '../context/AuthContext';\n\n// Re-export the main auth hook\nexport { useAuthContext as useAuth };\n\n// Role-based access hook\nexport function useRoleGuard(allowedRoles: ('student' | 'teacher' | 'admin')[]) {\n  return useRoleGuardFromContext(allowedRoles);\n}\n\n// Hook to check if user has specific role\nexport function useHasRole(role: 'student' | 'teacher' | 'admin') {\n  const { user } = useAuthContext();\n  return user?.role === role;\n}\n\n// Hook to check if user has any of the specified roles\nexport function useHasAnyRole(roles: ('student' | 'teacher' | 'admin')[]) {\n  const { user } = useAuthContext();\n  return user ? roles.includes(user.role) : false;\n}\n\n// Hook to check if user is authenticated\nexport function useIsAuthenticated() {\n  const { isAuthenticated } = useAuthContext();\n  return isAuthenticated;\n}\n\n// Hook to get current user role\nexport function useUserRole() {\n  const { user } = useAuthContext();\n  return user?.role;\n}\n\n// Hook to check if user can access materials (upload)\nexport function useCanUploadMaterials() {\n  const { user } = useAuthContext();\n  return user?.role === 'teacher' || user?.role === 'admin';\n}\n\n// Hook to check if user can manage materials (delete)\nexport function useCanManageMaterials() {\n  const { user } = useAuthContext();\n  return user?.role === 'teacher' || user?.role === 'admin';\n}\n\n// Hook to check if user is admin\nexport function useIsAdmin() {\n  const { user } = useAuthContext();\n  return user?.role === 'admin';\n}\n\n// Hook to check if user is teacher\nexport function useIsTeacher() {\n  const { user } = useAuthContext();\n  return user?.role === 'teacher';\n}\n\n// Hook to check if user is student\nexport function useIsStudent() {\n  const { user } = useAuthContext();\n  return user?.role === 'student';\n}\n\n// Hook to get user permissions\nexport function useUserPermissions() {\n  const { user } = useAuthContext();\n  \n  if (!user) return null;\n\n  const permissions = {\n    canUploadMaterials: user.role === 'teacher' || user.role === 'admin',\n    canManageMaterials: user.role === 'teacher' || user.role === 'admin',\n    canViewAnalytics: user.role === 'admin',\n    canManageUsers: user.role === 'admin',\n    canViewEarnings: user.role === 'teacher' || user.role === 'admin',\n    canBookLessons: user.role === 'student',\n    canTeachLessons: user.role === 'teacher',\n    canAccessAdminPanel: user.role === 'admin',\n  };\n\n  return permissions;\n}\n\n// Hook to check if user can access a specific feature\nexport function useCanAccess(feature: string) {\n  const permissions = useUserPermissions();\n  \n  if (!permissions) return false;\n\n  const featurePermissions: Record<string, boolean> = {\n    'materials.upload': permissions.canUploadMaterials,\n    'materials.manage': permissions.canManageMaterials,\n    'analytics.view': permissions.canViewAnalytics,\n    'users.manage': permissions.canManageUsers,\n    'earnings.view': permissions.canViewEarnings,\n    'lessons.book': permissions.canBookLessons,\n    'lessons.teach': permissions.canTeachLessons,\n    'admin.panel': permissions.canAccessAdminPanel,\n  };\n\n  return featurePermissions[feature] || false;\n}\n\n// Hook to get user dashboard URL\nexport function useDashboardUrl() {\n  const { user } = useAuthContext();\n  \n  if (!user) return '/login';\n  \n  switch (user.role) {\n    case 'student':\n      return '/dashboard/student';\n    case 'teacher':\n      return '/dashboard/teacher';\n    case 'admin':\n      return '/dashboard/admin';\n    default:\n      return '/login';\n  }\n}\n\n// Hook to check if user should be redirected\nexport function useShouldRedirect() {\n  const { user, isAuthenticated, isLoading } = useAuthContext();\n  \n  if (isLoading) return { shouldRedirect: false, redirectTo: null };\n  \n  if (!isAuthenticated) {\n    return { shouldRedirect: true, redirectTo: '/login' };\n  }\n  \n  if (user) {\n    const currentPath = typeof window !== 'undefined' ? window.location.pathname : '';\n    \n    // Check if user is on the correct dashboard\n    const expectedDashboard = `/dashboard/${user.role}`;\n    if (currentPath.startsWith('/dashboard') && currentPath !== expectedDashboard) {\n      return { shouldRedirect: true, redirectTo: expectedDashboard };\n    }\n  }\n  \n  return { shouldRedirect: false, redirectTo: null };\n} ","export interface Material {\n  _id: string;\n  uploaderId: {\n    _id: string;\n    name: string;\n    email: string;\n    role: 'student' | 'teacher' | 'admin';\n  };\n  originalName: string;\n  savedName: string;\n  type: 'pdf' | 'image' | 'video' | 'document' | 'audio';\n  mimeType: string;\n  fileSize: number;\n  tags: string[];\n  role: 'teacher' | 'student' | 'admin';\n  description?: string;\n  isPublic: boolean;\n  downloadCount: number;\n  createdAt: string;\n  updatedAt: string;\n  previewURL?: string;\n}\n\nexport interface MaterialFilters {\n  type: string;\n  tags: string;\n  search: string;\n  isPublic: string;\n  uploaderId?: string;\n  page?: number;\n  limit?: number;\n}\n\nexport interface MaterialUploadData {\n  file: File;\n  tags?: string;\n  description?: string;\n  isPublic?: boolean;\n}\n\nexport interface MaterialUpdateData {\n  tags?: string;\n  description?: string;\n  isPublic?: boolean;\n}\n\nexport interface MaterialsResponse {\n  success: boolean;\n  data: {\n    materials: Material[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      pages: number;\n    };\n  };\n  message: string;\n}\n\nexport interface MaterialResponse {\n  success: boolean;\n  data: Material;\n  message: string;\n}\n\nexport interface UploadResponse {\n  success: boolean;\n  data: Material;\n  message: string;\n}\n\n// File type configurations\nexport const FILE_TYPES = {\n  pdf: {\n    label: 'PDF Document',\n    icon: '📄',\n    extensions: ['.pdf'],\n    mimeTypes: ['application/pdf']\n  },\n  image: {\n    label: 'Image',\n    icon: '🖼️',\n    extensions: ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\n    mimeTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\n  },\n  video: {\n    label: 'Video',\n    icon: '🎥',\n    extensions: ['.mp4', '.webm', '.ogg', '.avi'],\n    mimeTypes: ['video/mp4', 'video/webm', 'video/ogg', 'video/avi']\n  },\n  document: {\n    label: 'Document',\n    icon: '📝',\n    extensions: ['.doc', '.docx', '.txt'],\n    mimeTypes: [\n      'application/msword',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'text/plain'\n    ]\n  },\n  audio: {\n    label: 'Audio',\n    icon: '🎵',\n    extensions: ['.mp3', '.wav', '.ogg'],\n    mimeTypes: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/mp3']\n  }\n} as const;\n\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\n\nexport const getFileTypeIcon = (typeOrMimeType: Material['type'] | string): string => {\n  // If it's a MIME type, determine the type from it\n  if (typeOrMimeType.includes('/')) {\n    if (typeOrMimeType.startsWith('image/')) return '🖼️';\n    if (typeOrMimeType.startsWith('video/')) return '🎥';\n    if (typeOrMimeType.startsWith('audio/')) return '🎵';\n    if (typeOrMimeType === 'application/pdf') return '📄';\n    return '📝';\n  }\n  \n  // If it's a type string, use the existing logic\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.icon || '📄';\n};\n\nexport const getFileTypeLabel = (typeOrMimeType: Material['type'] | string): string => {\n  // If it's a MIME type, determine the type from it\n  if (typeOrMimeType.includes('/')) {\n    if (typeOrMimeType.startsWith('image/')) return 'Image';\n    if (typeOrMimeType.startsWith('video/')) return 'Video';\n    if (typeOrMimeType.startsWith('audio/')) return 'Audio';\n    if (typeOrMimeType === 'application/pdf') return 'PDF Document';\n    return 'Document';\n  }\n  \n  // If it's a type string, use the existing logic\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.label || 'File';\n};\n\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes';\n  \n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\nexport const formatDate = (dateString: string): string => {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","UploadComponent","param","mimeType","onUploadSuccess","uploading","setUploading","useState","uploadProgress","setUploadProgress","selectedFile","setSelectedFile","formData","setFormData","tags","description","isPublic","fileInputRef","useRef","validateFile","size","MAX_FILE_SIZE","concat","allowedMimeTypes","values","FILE_TYPES","flatMap","type","mimeTypes","includes","file","onDrop","useCallback","acceptedFiles","rejectedFiles","length","error","errors","code","toast","validationError","getRootProps","getInputProps","isDragActive","isDragReject","useDropzone","accept","maxSize","multiple","handleSubmit","e","preventDefault","formDataToSend","FormData","append","toString","response","api","post","headers","onUploadProgress","progressEvent","total","progress","Math","round","loaded","data","success","console","errorMessage","message","jsx_runtime","jsxs","div","className","jsx","input","p","button","onClick","current","click","ref","onChange","target","files","span","startsWith","name","toFixed","style","width","form","onSubmit","label","placeholder","value","prev","id","checked","htmlFor","disabled","ListComponent","filters","onMaterialSelect","onMaterialDelete","canDelete","materials","setMaterials","loading","setLoading","pagination","setPagination","page","limit","pages","fetchMaterials","params","URLSearchParams","search","uploaderId","get","handleDelete","materialId","confirm","delete","handleDownload","material","_id","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","originalName","body","appendChild","remove","revokeObjectURL","useEffect","handlePageChange","h3","Object","some","f","map","MaterialCard","onSelect","onDelete","onDownload","nav","Array","from","_","i","min","isOwner","localStorage","getItem","canDeleteThis","role","getFileTypeIcon","getFileTypeLabel","formatFileSize","fileSize","downloadCount","slice","tag","index","formatDate","createdAt","PreviewComponent","isOpen","onClose","previewUrl","setPreviewUrl","setError","isPreviewable","loadPreview","svg","fill","viewBox","stroke","path","strokeLinecap","strokeLinejoin","strokeWidth","d","h4","dl","dt","dd","iframe","src","title","img","alt","MaterialsPage","user","useAuth","hasAccess","isLoading","useRoleGuard","canUpload","useCanUploadMaterials","canManage","useCanManageMaterials","selectedMaterial","setSelectedMaterial","showPreview","setShowPreview","setFilters","Fragment","Head","meta","content","DashboardLayout","allowedRoles","h1","h2","newMaterial","select","option","filter","m","useRoleGuardFromContext","useAuthContext","pdf","icon","extensions","image","video","audio","typeOrMimeType","bytes","floor","log","parseFloat","pow","sizes","date","Date","dateString","toLocaleDateString","year","month","day","hour","minute"],"sourceRoot":""}