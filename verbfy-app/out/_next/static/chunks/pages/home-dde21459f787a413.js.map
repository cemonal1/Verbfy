{"version":3,"file":"static/chunks/pages/home-dde21459f787a413.js","mappings":"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","sources":["webpack://_N_E/?ede5","webpack://_N_E/./pages/home.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/home\",\n      function () {\n        return require(\"private-next-pages/home.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/home\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport Link from 'next/link';\r\nimport { useI18n } from '@/lib/i18n';\r\nimport { notificationAPI, freeMaterialsAPI, verbfyTalkAPI, reservationAPI } from '@/lib/api';\r\n\r\nexport default function HomePage() {\r\n  const { user } = useAuth();\r\n  const { t } = useI18n();\r\n\r\n  const [unread, setUnread] = useState<number>(0);\r\n  const [featured, setFeatured] = useState<any[]>([]);\r\n  const [rooms, setRooms] = useState<any[]>([]);\r\n  const [upcoming, setUpcoming] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      try {\r\n        const [n, f, r] = await Promise.all([\r\n          notificationAPI.getNotifications(),\r\n          freeMaterialsAPI.getFeaturedMaterials(),\r\n          verbfyTalkAPI.getRooms({ \r\n            level: 'All', \r\n            isPrivate: false, \r\n            page: 1, \r\n            limit: 4 \r\n          }),\r\n        ]);\r\n        setUnread(n.data?.data?.unreadCount ?? 0);\r\n        setFeatured((f as any).data ?? []);\r\n        setRooms((r as any).data?.rooms ?? (r as any).rooms ?? []);\r\n      } catch {}\r\n\r\n      try {\r\n        const res = await reservationAPI.getReservations({ status: 'upcoming', limit: 5 });\r\n        setUpcoming(res.data?.data ?? []);\r\n      } catch {}\r\n    };\r\n    load();\r\n  }, []);\r\n\r\n  return (\r\n    <DashboardLayout title={t('home.title', 'Home')}>\r\n      <div className=\"space-y-8\">\r\n        {/* Quick stats */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <StatCard label={t('home.stats.unread', 'Unread notifications')} value={unread} />\r\n          <StatCard label={t('home.stats.upcoming', 'Upcoming lessons')} value={upcoming.length} />\r\n          <StatCard label={t('home.stats.rooms', 'Open talk rooms')} value={rooms.length} />\r\n          <StatCard label={t('home.stats.materials', 'Featured materials')} value={featured.length} />\r\n        </div>\r\n\r\n        {/* Shortcuts */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <Shortcut href=\"/teachers\" icon=\"👨‍🏫\" title={t('home.shortcut.teachers', 'Find Teachers')} />\r\n          <Shortcut href=\"/verbfy-talk\" icon=\"🎥\" title={t('home.shortcut.talk', 'Join VerbfyTalk')} />\r\n          <Shortcut href=\"/free-materials\" icon=\"📚\" title={t('home.shortcut.materials', 'Free Materials')} />\r\n          <Shortcut href=\"/cefr-tests\" icon=\"📝\" title={t('home.shortcut.cefr', 'CEFR Tests')} />\r\n        </div>\r\n\r\n        {/* Upcoming reservations */}\r\n        <Section title={t('home.upcoming', 'Your upcoming lessons')} linkHref=\"/reservations\" linkText={t('home.viewAll', 'View all')}>\r\n          {upcoming.length === 0 ? (\r\n            <Empty text={t('home.upcomingEmpty', 'No upcoming lessons yet')} />\r\n          ) : (\r\n            <ul className=\"divide-y divide-gray-200 rounded-lg border\">\r\n              {upcoming.map((r: any) => (\r\n                <li key={r._id} className=\"p-4 flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"font-medium text-gray-900\">{r.title || t('home.lesson', 'Lesson')}</div>\r\n                    <div className=\"text-sm text-gray-600\">{new Date(r.startTime || r.date).toLocaleString()}</div>\r\n                  </div>\r\n                  <Link href=\"/reservations\" className=\"text-blue-600 hover:underline text-sm\">{t('home.manage', 'Manage')}</Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Featured materials */}\r\n        <Section title={t('home.featured', 'Featured materials')} linkHref=\"/free-materials\" linkText={t('home.viewAll', 'View all')}>\r\n          {featured.length === 0 ? (\r\n            <Empty text={t('home.materialsEmpty', 'No featured materials yet')} />\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {featured.slice(0, 6).map((m: any) => (\r\n                <div key={m._id} className=\"p-4 rounded-lg border hover:shadow-sm transition\">\r\n                  <div className=\"font-medium text-gray-900\">{m.title}</div>\r\n                  <div className=\"text-sm text-gray-600 line-clamp-2\">{m.description}</div>\r\n                  <div className=\"mt-2 text-xs text-gray-500\">{m.level} • {m.category}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Section>\r\n\r\n        {/* Open rooms */}\r\n        <Section title={t('home.rooms', 'Open VerbfyTalk rooms')} linkHref=\"/verbfy-talk\" linkText={t('home.viewAll', 'View all')}>\r\n          {rooms.length === 0 ? (\r\n            <Empty text={t('home.roomsEmpty', 'No rooms available right now')} />\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {rooms.slice(0, 6).map((room: any) => (\r\n                <div key={room._id} className=\"p-4 rounded-lg border hover:shadow-sm transition\">\r\n                  <div className=\"font-medium text-gray-900\">{room.name || t('home.room', 'Room')}</div>\r\n                  <div className=\"text-sm text-gray-600\">{room.isPrivate ? t('home.private','Private') : t('home.public','Public')}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Section>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nfunction StatCard({ label, value }: { label: string; value: number | string }) {\r\n  return (\r\n    <div className=\"rounded-lg border p-4 bg-white\">\r\n      <div className=\"text-sm text-gray-600\">{label}</div>\r\n      <div className=\"text-2xl font-semibold text-gray-900\">{value}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Shortcut({ href, icon, title }: { href: string; icon: string; title: string }) {\r\n  return (\r\n    <Link href={href} className=\"rounded-lg border p-4 bg-white flex items-center space-x-3 hover:shadow-sm transition\">\r\n      <span className=\"text-xl\" aria-hidden>{icon}</span>\r\n      <span className=\"font-medium text-gray-900\">{title}</span>\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction Section({ title, linkHref, linkText, children }: { title: string; linkHref: string; linkText: string; children: React.ReactNode }) {\r\n  return (\r\n    <section>\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\r\n        <Link href={linkHref} className=\"text-sm text-blue-600 hover:underline\">{linkText}</Link>\r\n      </div>\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nfunction Empty({ text }: { text: string }) {\r\n  return (\r\n    <div className=\"rounded-lg border p-8 text-center text-gray-500\">{text}</div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","HomePage","user","useAuth","t","useI18n","unread","setUnread","useState","featured","setFeatured","rooms","setRooms","upcoming","setUpcoming","useEffect","load","n","_r_data","_f_data","_r_data_rooms","_ref","res","f","r","Promise","all","notificationAPI","getNotifications","freeMaterialsAPI","getFeaturedMaterials","verbfyTalkAPI","getRooms","level","isPrivate","page","limit","data","unreadCount","e","reservationAPI","getReservations","status","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","title","jsxs","div","className","StatCard","label","value","length","Shortcut","href","icon","Section","linkHref","linkText","Empty","text","ul","map","li","Date","startTime","date","toLocaleString","Link","_id","slice","m","description","category","room","name","param","span","aria-hidden","children","section","h2"],"sourceRoot":""}