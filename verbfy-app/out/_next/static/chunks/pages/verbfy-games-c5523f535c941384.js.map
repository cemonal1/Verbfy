{"version":3,"file":"static/chunks/pages/verbfy-games-c5523f535c941384.js","mappings":"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","sources":["webpack://_N_E/?f886","webpack://_N_E/./pages/verbfy-games/index.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/verbfy-games\",\n      function () {\n        return require(\"private-next-pages/verbfy-games/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/verbfy-games\"])\n      });\n    }\n  ","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Head from 'next/head';\r\nimport Image from 'next/image';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { useI18n } from '@/lib/i18n';\r\nimport { gamesAPI } from '@/lib/api';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ntype Game = {\r\n  _id?: string;\r\n  id?: string;\r\n  title: string;\r\n  description?: string;\r\n  category?: string; // Vocabulary, Grammar, Listening, etc.\r\n  level?: string; // A1..C2\r\n  thumbnailUrl?: string;\r\n  gameUrl?: string; // public URL (iframe) or internal route\r\n  createdAt?: string;\r\n};\r\n\r\n// Temporary in-memory store (replace with API when backend is ready)\r\nconst localGamesKey = 'verbfy_games_store';\r\nconst loadLocalGames = (): Game[] => {\r\n  try {\r\n    const raw = localStorage.getItem(localGamesKey);\r\n    if (!raw) return [];\r\n    const arr = JSON.parse(raw);\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\nconst saveLocalGames = (arr: Game[]) => localStorage.setItem(localGamesKey, JSON.stringify(arr));\r\n\r\nexport default function VerbfyGamesPage() {\r\n  const { t, locale } = useI18n();\r\n  const { user } = useAuth();\r\n  const isAdmin = user?.role === 'admin';\r\n\r\n  const [games, setGames] = useState<Game[]>([]);\r\n  const [search, setSearch] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [level, setLevel] = useState('');\r\n  const [showAdd, setShowAdd] = useState(false);\r\n  const [form, setForm] = useState<Game>({ title: '', description: '', category: '', level: '', thumbnailUrl: '', gameUrl: '' });\r\n  const [preview, setPreview] = useState<Game | null>(null);\r\n\r\n  const categories = useMemo(() => ['Vocabulary', 'Grammar', 'Listening', 'Reading', 'Speaking', 'Exam'], []);\r\n  const levels = useMemo(() => ['A1', 'A2', 'B1', 'B2', 'C1', 'C2'], []);\r\n\r\n  useEffect(() => {\r\n    let abort = false;\r\n    const run = async () => {\r\n      try {\r\n        const res = await gamesAPI.list({ category, level, search });\r\n        const arr = (res as any)?.data?.data || [];\r\n        if (!abort) setGames(arr);\r\n      } catch {\r\n        // Fallback to local for safety\r\n        if (!abort) setGames(loadLocalGames());\r\n      }\r\n    };\r\n    run();\r\n    return () => { abort = true; };\r\n  }, [category, level, search]);\r\n\r\n  const filtered = games.filter((g) => {\r\n    const s = search.trim().toLowerCase();\r\n    return (\r\n      (!category || g.category === category) &&\r\n      (!level || g.level === level) &&\r\n      (!s || g.title.toLowerCase().includes(s) || (g.description || '').toLowerCase().includes(s))\r\n    );\r\n  });\r\n\r\n  const addGame = async () => {\r\n    if (!form.title || !form.gameUrl) return;\r\n    try {\r\n      const res = await gamesAPI.create(form as any);\r\n      const created = (res as any)?.data?.data;\r\n      if (created) {\r\n        setGames((x) => [created, ...x]);\r\n      }\r\n    } catch {\r\n      // Fallback to local if API fails\r\n      const id = `${Date.now()}`;\r\n      const newGame = { ...form, id, _id: id, createdAt: new Date().toISOString() } as Game;\r\n      const next = [newGame, ...games];\r\n      setGames(next);\r\n      saveLocalGames(next);\r\n    } finally {\r\n      setShowAdd(false);\r\n      setForm({ title: '', description: '', category: '', level: '', thumbnailUrl: '', gameUrl: '' });\r\n    }\r\n  };\r\n\r\n  const removeGame = async (id: string) => {\r\n    try {\r\n      await gamesAPI.delete(id);\r\n      setGames((x) => x.filter((g) => (g._id || g.id) !== id));\r\n    } catch {\r\n      const next = games.filter((g) => (g._id || g.id) !== id);\r\n      setGames(next);\r\n      saveLocalGames(next);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout allowedRoles={['student', 'teacher', 'admin']}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900\">VerbfyGames</h1>\r\n          <p className=\"text-gray-600 mt-2\">\r\n            {locale === 'tr'\r\n              ? 'Tarayıcı üzerinden oynanabilen öğretici mini oyunlar. Kelime, gramer, dinleme ve daha fazlası.'\r\n              : 'Browser-based learning mini games. Vocabulary, grammar, listening and more.'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6 flex flex-col sm:flex-row gap-4 sm:items-center\">\r\n          <input value={search} onChange={(e) => setSearch(e.target.value)} placeholder={locale === 'tr' ? 'Ara...' : 'Search...'} className=\"w-full sm:w-auto flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n          <select value={category} onChange={(e) => setCategory(e.target.value)} className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"\">{locale === 'tr' ? 'Tüm kategoriler' : 'All categories'}</option>\r\n            {categories.map((c) => (\r\n              <option key={c} value={c}>{c}</option>\r\n            ))}\r\n          </select>\r\n          <select value={level} onChange={(e) => setLevel(e.target.value)} className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"\">{locale === 'tr' ? 'Tüm seviyeler' : 'All levels'}</option>\r\n            {levels.map((l) => (\r\n              <option key={l} value={l}>{l}</option>\r\n            ))}\r\n          </select>\r\n          {isAdmin && (\r\n            <button onClick={() => setShowAdd(true)} className=\"ml-auto px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700\">{locale === 'tr' ? 'Yeni Oyun Ekle' : 'Add Game'}</button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Add dialog */}\r\n        {isAdmin && showAdd && (\r\n          <div className=\"mb-6 border border-blue-200 rounded-xl p-4 bg-blue-50\">\r\n            <h2 className=\"font-semibold mb-3\">{locale === 'tr' ? 'Yeni Oyun' : 'New Game'}</h2>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n              <input value={form.title} onChange={(e) => setForm({ ...form, title: e.target.value })} placeholder={locale === 'tr' ? 'Başlık' : 'Title'} className=\"px-3 py-2 border border-gray-300 rounded-lg\" />\r\n              <input value={form.thumbnailUrl} onChange={(e) => setForm({ ...form, thumbnailUrl: e.target.value })} placeholder={locale === 'tr' ? 'Görsel URL' : 'Thumbnail URL'} className=\"px-3 py-2 border border-gray-300 rounded-lg\" />\r\n              <input value={form.gameUrl} onChange={(e) => setForm({ ...form, gameUrl: e.target.value })} placeholder={locale === 'tr' ? 'Oyun URL (iframe)' : 'Game URL (iframe)'} className=\"px-3 py-2 border border-gray-300 rounded-lg\" />\r\n              <select value={form.category} onChange={(e) => setForm({ ...form, category: e.target.value })} className=\"px-3 py-2 border border-gray-300 rounded-lg\">\r\n                <option value=\"\">{locale === 'tr' ? 'Kategori' : 'Category'}</option>\r\n                {categories.map((c) => (<option key={c} value={c}>{c}</option>))}\r\n              </select>\r\n              <select value={form.level} onChange={(e) => setForm({ ...form, level: e.target.value })} className=\"px-3 py-2 border border-gray-300 rounded-lg\">\r\n                <option value=\"\">{locale === 'tr' ? 'Seviye' : 'Level'}</option>\r\n                {levels.map((l) => (<option key={l} value={l}>{l}</option>))}\r\n              </select>\r\n            </div>\r\n            <div className=\"mt-3 flex gap-3\">\r\n              <button onClick={addGame} className=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700\">{locale === 'tr' ? 'Kaydet' : 'Save'}</button>\r\n              <button onClick={() => setShowAdd(false)} className=\"px-4 py-2 rounded-md border border-gray-300\">{locale === 'tr' ? 'İptal' : 'Cancel'}</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Games */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {filtered.map((g) => {\r\n            const id = g._id || g.id || g.title;\r\n            return (\r\n              <div key={id as string} className=\"group bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all\">\r\n                <div className=\"relative h-40\">\r\n                  <Image src={g.thumbnailUrl || '/images/verbfy-listen.png'} alt={g.title} fill className=\"object-contain p-4 group-hover:scale-105 transition-transform duration-200\" />\r\n                </div>\r\n                <div className=\"p-4\">\r\n                  <h3 className=\"font-semibold text-gray-900 line-clamp-1\">{g.title}</h3>\r\n                  <p className=\"text-sm text-gray-600 line-clamp-2 mt-1\">{g.description}</p>\r\n                  <div className=\"mt-3 flex items-center justify-between text-sm text-gray-500\">\r\n                    <span>{g.category || '-'} · {g.level || '-'}</span>\r\n                    <div className=\"flex gap-2\">\r\n                      <button onClick={() => setPreview(g)} className=\"px-3 py-1 rounded-md border border-gray-300 hover:bg-gray-50\">{locale === 'tr' ? 'Önizle' : 'Preview'}</button>\r\n                      {isAdmin && (\r\n                        <button onClick={() => removeGame(id as string)} className=\"px-3 py-1 rounded-md border border-red-300 text-red-600 hover:bg-red-50\">{locale === 'tr' ? 'Sil' : 'Delete'}</button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Preview modal */}\r\n        {preview && (\r\n          <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center\" onClick={() => setPreview(null)}>\r\n            <div className=\"bg-white rounded-xl w-[95vw] h-[85vh] max-w-5xl overflow-hidden\" onClick={(e) => e.stopPropagation()}>\r\n              <div className=\"p-3 flex items-center justify-between border-b border-gray-200\">\r\n                <p className=\"font-semibold\">{preview.title}</p>\r\n                <button onClick={() => setPreview(null)} className=\"px-3 py-1 rounded-md border border-gray-300\">{locale === 'tr' ? 'Kapat' : 'Close'}</button>\r\n              </div>\r\n              <iframe src={preview.gameUrl} title={preview.title} className=\"w-full h-full\" allowFullScreen />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","localGamesKey","loadLocalGames","raw","localStorage","getItem","arr","JSON","parse","Array","isArray","e","saveLocalGames","setItem","stringify","VerbfyGamesPage","t","locale","useI18n","user","useAuth","isAdmin","role","games","setGames","useState","search","setSearch","category","setCategory","level","setLevel","showAdd","setShowAdd","form","setForm","title","description","thumbnailUrl","gameUrl","preview","setPreview","categories","useMemo","levels","useEffect","abort","run","_res_data","res","gamesAPI","list","data","filtered","filter","s","trim","toLowerCase","g","includes","addGame","create","created","x","id","concat","Date","now","next","_id","createdAt","toISOString","removeGame","delete","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","allowedRoles","jsxs","div","className","h1","p","input","value","onChange","target","placeholder","select","option","map","c","l","button","onClick","h2","Image","src","alt","fill","h3","span","stopPropagation","iframe","allowFullScreen"],"sourceRoot":""}