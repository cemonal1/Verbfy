(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9898],{70779:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/materials",function(){return r(94023)}])},94023:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return y}});var t=r(85893),s=r(67294),l=r(9008),d=r.n(l),i=r(36197),n=r(96781),o=r(11088),c=r(12002),u=r(72509),m=r(32798),x=r(7878);function g(e){var a;let{onUploadSuccess:r}=e,[l,d]=(0,s.useState)(!1),[i,n]=(0,s.useState)(0),[o,g]=(0,s.useState)(null),[b,p]=(0,s.useState)({tags:"",description:"",isPublic:!1}),h=(0,s.useRef)(null),y=e=>e.size>x.Tb?"File size exceeds the maximum limit of ".concat(x.Tb/1048576,"MB"):Object.values(x.vH).flatMap(e=>e.mimeTypes).includes(e.type)?null:"File type not supported. Please upload PDF, image, video, document, or audio files.",f=(0,s.useCallback)((e,a)=>{if(a.length>0){let e=a[0].errors[0];"file-too-large"===e.code?u.Am.error("File size exceeds the maximum limit of ".concat(x.Tb/1048576,"MB")):"file-invalid-type"===e.code?u.Am.error("File type not supported. Please upload PDF, image, video, document, or audio files."):u.Am.error("File upload failed. Please try again.");return}if(e.length>0){let a=e[0],r=y(a);if(r){u.Am.error(r);return}g(a)}},[]),{getRootProps:j,getInputProps:v,isDragActive:k,isDragReject:w}=(0,c.uI)({onDrop:f,accept:{"application/pdf":[".pdf"],"image/*":[".jpg",".jpeg",".png",".gif",".webp"],"video/*":[".mp4",".webm",".ogg",".avi"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"],"audio/*":[".mp3",".wav",".ogg"]},maxSize:x.Tb,multiple:!1}),N=async e=>{if(e.preventDefault(),!o){u.Am.error("Please select a file to upload");return}d(!0),n(0);try{let e=new FormData;e.append("file",o),b.tags&&e.append("tags",b.tags),b.description&&e.append("description",b.description),e.append("isPublic",b.isPublic.toString());let a=await m.ZP.post("/api/materials/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){let a=Math.round(100*e.loaded/e.total);n(a)}}});a.data.success&&(u.Am.success("Material uploaded successfully!"),r(a.data.data),g(null),p({tags:"",description:"",isPublic:!1}),n(0))}catch(r){var a,t;console.error("Upload error:",r);let e=(null===(t=r.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Upload failed. Please try again.";u.Am.error(e)}finally{d(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{...j(),className:"\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n          ".concat(k&&!w?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":w?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500","\n        "),children:[(0,t.jsx)("input",{...v()}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-4xl",children:k&&!w?"\uD83D\uDCC1":"\uD83D\uDCE4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:k&&!w?"Drop your file here":w?"File type not supported":"Drag & drop a file here, or click to select"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"PDF, Images, Videos, Documents, Audio (max 50MB)"})]}),!k&&(0,t.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Choose File"})]})]}),(0,t.jsx)("input",{ref:h,type:"file",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){let e=y(r);if(e){u.Am.error(e);return}g(r)}},accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.mp4,.webm,.ogg,.avi,.doc,.docx,.txt,.mp3,.wav",className:"hidden"}),o&&(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-lg",children:(a=o.type).startsWith("image/")?"\uD83D\uDDBC️":a.startsWith("video/")?"\uD83C\uDFA5":a.startsWith("audio/")?"\uD83C\uDFB5":"application/pdf"===a?"��":"\uD83D\uDCDD"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:o.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(o.size/1024/1024).toFixed(2)," MB"]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]})}),l&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Uploading..."}),(0,t.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:[i,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(i,"%")}})})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags (optional)"}),(0,t.jsx)("input",{type:"text",placeholder:"grammar, beginner, exercises",value:b.tags,onChange:e=>p(a=>({...a,tags:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Separate tags with commas"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (optional)"}),(0,t.jsx)("input",{type:"text",placeholder:"Brief description of the material",value:b.description,onChange:e=>p(a=>({...a,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPublic",checked:b.isPublic,onChange:e=>p(a=>({...a,isPublic:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"isPublic",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Make this material public (visible to all users)"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{g(null),p({tags:"",description:"",isPublic:!1})},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:!o||l,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Uploading...":"Upload Material"})]})]})]})}function b(e){let{filters:a,onMaterialSelect:r,onMaterialDelete:l,canDelete:d}=e,[i,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[x,g]=(0,s.useState)({page:1,limit:12,total:0,pages:0}),b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(!0);try{let r=new URLSearchParams;a.type&&r.append("type",a.type),a.tags&&r.append("tags",a.tags),a.search&&r.append("search",a.search),a.isPublic&&r.append("isPublic",a.isPublic),a.uploaderId&&r.append("uploaderId",a.uploaderId),r.append("page",e.toString()),r.append("limit",x.limit.toString());let t=await m.ZP.get("/api/materials?".concat(r.toString()));t.data.success&&(n(t.data.data.materials),g(t.data.data.pagination))}catch(a){var r,t;console.error("Error fetching materials:",a);let e=(null===(t=a.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to load materials";u.Am.error(e)}finally{c(!1)}},h=async e=>{if(confirm("Are you sure you want to delete this material?"))try{(await m.ZP.delete("/api/materials/".concat(e))).data.success&&(u.Am.success("Material deleted successfully"),l(e),b(x.page))}catch(t){var a,r;console.error("Error deleting material:",t);let e=(null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to delete material";u.Am.error(e)}},y=async e=>{try{let a=await m.ZP.get("/api/materials/".concat(e._id,"/download"),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=r,t.setAttribute("download",e.originalName),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(r),u.Am.success("Download started")}catch(t){var a,r;console.error("Error downloading material:",t);let e=(null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to download material";u.Am.error(e)}};(0,s.useEffect)(()=>{b(1)},[a]);let f=e=>{b(e)};return o?(0,t.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading materials..."})]}):0===i.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDA"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No materials found"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:Object.values(a).some(e=>e)?"Try adjusting your filters to see more results.":"No materials have been uploaded yet."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(e=>(0,t.jsx)(p,{material:e,onSelect:r,onDelete:h,onDownload:y,canDelete:d},e._id))}),x.pages>1&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>f(x.page-1),disabled:x.page<=1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Previous"}),Array.from({length:x.pages},(e,a)=>a+1).map(e=>(0,t.jsx)("button",{onClick:()=>f(e),className:"px-3 py-2 text-sm font-medium rounded-md ".concat(e===x.page?"text-white bg-blue-600 border border-blue-600":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"),children:e},e)),(0,t.jsx)("button",{onClick:()=>f(x.page+1),disabled:x.page>=x.pages,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700",children:"Next"})]})}),(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(x.page-1)*x.limit+1," to"," ",Math.min(x.page*x.limit,x.total)," of"," ",x.total," materials"]})]})}function p(e){let{material:a,onSelect:r,onDelete:s,onDownload:l,canDelete:d}=e,i=a.uploaderId._id===localStorage.getItem("verbfy_user_id"),n=d&&(i||"admin"===a.uploaderId.role);return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 overflow-hidden hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-lg",children:(0,x.cF)(a.type)})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:a.originalName}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(0,x.Av)(a.type)})]})]})}),(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("span",{children:["Size: ",(0,x.sS)(a.fileSize)]}),(0,t.jsxs)("span",{children:["Downloads: ",a.downloadCount]})]}),a.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:a.description})]}),a.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.tags.slice(0,3).map((e,a)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e},a)),a.tags.length>3&&(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200",children:["+",a.tags.length-3]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,t.jsxs)("span",{children:["By ",a.uploaderId.name]}),(0,t.jsx)("span",{children:(0,x.p6)(a.createdAt)})]}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(a.isPublic?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"),children:a.isPublic?"Public":"Private"})})]}),(0,t.jsx)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-600 border-t border-gray-200 dark:border-gray-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,t.jsx)("button",{onClick:()=>r(a),className:"flex-1 px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-900 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-800",children:"Preview"}),(0,t.jsx)("button",{onClick:()=>l(a),className:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-50 border border-gray-200 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"\uD83D\uDCE5"}),n&&(0,t.jsx)("button",{onClick:()=>s(a._id),className:"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:bg-red-900 dark:border-red-700 dark:text-red-300 dark:hover:bg-red-800",children:"\uD83D\uDDD1️"})]})})]})}function h(e){let{material:a,isOpen:r,onClose:l}=e,[d,i]=(0,s.useState)(!1),[n,o]=(0,s.useState)(null),[c,g]=(0,s.useState)(null),b=["pdf","image"].includes(a.type);(0,s.useEffect)(()=>{r&&b&&p()},[r,a._id]);let p=async()=>{i(!0),g(null);try{let e=await m.ZP.get("/api/materials/".concat(a._id,"/preview"),{responseType:"blob"}),r=URL.createObjectURL(e.data);o(r)}catch(e){console.error("Error loading preview:",e),g("Failed to load preview. The file may not be available.")}finally{i(!1)}},h=async()=>{try{let e=await m.ZP.get("/api/materials/".concat(a._id,"/download"),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=r,t.setAttribute("download",a.originalName),document.body.appendChild(t),t.click(),t.remove(),window.URL.revokeObjectURL(r),u.Am.success("Download started")}catch(e){console.error("Error downloading file:",e),u.Am.error("Failed to download file")}};return((0,s.useEffect)(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),r)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:(0,x.cF)(a.type)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:a.originalName}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(0,x.Av)(a.type)," • ",(0,x.sS)(a.fileSize)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"\uD83D\uDCE5 Download"}),(0,t.jsxs)("button",{onClick:l,className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]})}),(0,t.jsxs)("div",{className:"px-6 py-4",children:[(0,t.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"File Information"}),(0,t.jsxs)("dl",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:(0,x.Av)(a.type)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Size:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:(0,x.sS)(a.fileSize)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Downloads:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:a.downloadCount})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Uploaded:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:(0,x.p6)(a.createdAt)})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Uploader Information"}),(0,t.jsxs)("dl",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Name:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:a.uploaderId.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Role:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white capitalize",children:a.uploaderId.role})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Visibility:"}),(0,t.jsx)("dd",{className:"text-gray-900 dark:text-white",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(a.isPublic?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"),children:a.isPublic?"Public":"Private"})})]})]})]})]}),a.description&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:a.description})]}),a.tags.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.tags.map((e,a)=>(0,t.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e},a))})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Preview"}),d&&(0,t.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading preview..."})]}),c&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-red-500 mb-2",children:"⚠️"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:c}),(0,t.jsx)("button",{onClick:h,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Download Instead"})]}),!d&&!c&&b&&n&&(0,t.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:["pdf"===a.type&&(0,t.jsx)("iframe",{src:n,className:"w-full h-96",title:a.originalName}),"image"===a.type&&(0,t.jsx)("img",{src:n,alt:a.originalName,className:"w-full h-auto max-h-96 object-contain"})]}),!d&&!c&&!b&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"video"===a.type?"\uD83C\uDFA5":"audio"===a.type?"\uD83C\uDFB5":"\uD83D\uDCC4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Preview Not Available"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This file type cannot be previewed in the browser. Please download the file to view it."}),(0,t.jsx)("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"\uD83D\uDCE5 Download File"})]})]})]}),(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-3 border-t border-gray-200 dark:border-gray-600",children:(0,t.jsx)("div",{className:"flex justify-end space-x-3",children:(0,t.jsx)("button",{onClick:l,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Close"})})})]})]})}):null}function y(){let{user:e}=(0,i.aC)(),{hasAccess:a,isLoading:r}=(0,i.eB)(["student","teacher","admin"]),l=(0,n.Fw)(),c=(0,n.__)(),[u,m]=(0,s.useState)([]),[x,p]=(0,s.useState)(null),[y,f]=(0,s.useState)(!1),[j,v]=(0,s.useState)({type:"",tags:"",search:"",isPublic:""});return r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d(),{children:[(0,t.jsx)("title",{children:"Materials - Verbfy"}),(0,t.jsx)("meta",{name:"description",content:"Learning materials and resources"})]}),(0,t.jsxs)(o.Z,{allowedRoles:["student","teacher","admin"],title:"Learning Materials",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Learning Materials"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Access and manage educational resources for your English learning journey"})]}),l&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Upload New Material"}),(0,t.jsx)(g,{onUploadSuccess:e=>{m(a=>[e,...a])}})]})}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Available Materials"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File Type"}),(0,t.jsxs)("select",{value:j.type,onChange:e=>v(a=>({...a,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"pdf",children:"PDF"}),(0,t.jsx)("option",{value:"image",children:"Images"}),(0,t.jsx)("option",{value:"video",children:"Videos"}),(0,t.jsx)("option",{value:"document",children:"Documents"}),(0,t.jsx)("option",{value:"audio",children:"Audio"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),(0,t.jsx)("input",{type:"text",placeholder:"Filter by tags...",value:j.tags,onChange:e=>v(a=>({...a,tags:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search"}),(0,t.jsx)("input",{type:"text",placeholder:"Search materials...",value:j.search,onChange:e=>v(a=>({...a,search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibility"}),(0,t.jsxs)("select",{value:j.isPublic,onChange:e=>v(a=>({...a,isPublic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"true",children:"Public"}),(0,t.jsx)("option",{value:"false",children:"Private"})]})]})]})]}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(b,{filters:j,onMaterialSelect:e=>{p(e),f(!0)},onMaterialDelete:e=>{m(a=>a.filter(a=>a._id!==e))},canDelete:c})})]})]}),y&&x&&(0,t.jsx)(h,{material:x,isOpen:y,onClose:()=>{f(!1),p(null)}})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have permission to access the materials page."})]})})}},96781:function(e,a,r){"use strict";r.d(a,{Fw:function(){return l},__:function(){return d},eB:function(){return s}});var t=r(36197);function s(e){return(0,t.eB)(e)}function l(){let{user:e}=(0,t.aC)();return(null==e?void 0:e.role)==="teacher"||(null==e?void 0:e.role)==="admin"}function d(){let{user:e}=(0,t.aC)();return(null==e?void 0:e.role)==="teacher"||(null==e?void 0:e.role)==="admin"}},7878:function(e,a,r){"use strict";r.d(a,{Av:function(){return d},Tb:function(){return s},cF:function(){return l},p6:function(){return n},sS:function(){return i},vH:function(){return t}});let t={pdf:{label:"PDF Document",icon:"\uD83D\uDCC4",extensions:[".pdf"],mimeTypes:["application/pdf"]},image:{label:"Image",icon:"\uD83D\uDDBC️",extensions:[".jpg",".jpeg",".png",".gif",".webp"],mimeTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"]},video:{label:"Video",icon:"\uD83C\uDFA5",extensions:[".mp4",".webm",".ogg",".avi"],mimeTypes:["video/mp4","video/webm","video/ogg","video/avi"]},document:{label:"Document",icon:"\uD83D\uDCDD",extensions:[".doc",".docx",".txt"],mimeTypes:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"]},audio:{label:"Audio",icon:"\uD83C\uDFB5",extensions:[".mp3",".wav",".ogg"],mimeTypes:["audio/mpeg","audio/wav","audio/ogg","audio/mp3"]}},s=52428800,l=e=>{var a;return e.includes("/")?e.startsWith("image/")?"\uD83D\uDDBC️":e.startsWith("video/")?"\uD83C\uDFA5":e.startsWith("audio/")?"\uD83C\uDFB5":"application/pdf"===e?"\uD83D\uDCC4":"\uD83D\uDCDD":(null===(a=t[e])||void 0===a?void 0:a.icon)||"\uD83D\uDCC4"},d=e=>{var a;return e.includes("/")?e.startsWith("image/")?"Image":e.startsWith("video/")?"Video":e.startsWith("audio/")?"Audio":"application/pdf"===e?"PDF Document":"Document":(null===(a=t[e])||void 0===a?void 0:a.label)||"File"},i=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=70779)}),_N_E=e.O()}]);