{"version":3,"file":"static/chunks/pages/login-286776043b9b612e.js","mappings":"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","sources":["webpack://_N_E/?f1d5","webpack://_N_E/./src/features/auth/viewmodel/useLoginViewModel.ts","webpack://_N_E/./src/features/auth/view/LoginPage.tsx","webpack://_N_E/./pages/login.tsx","webpack://_N_E/./src/components/shared/BrandLogo.tsx","webpack://_N_E/./src/components/shared/HomeButton.tsx","webpack://_N_E/./src/lib/toast.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/login\",\n      function () {\n        return require(\"private-next-pages/login.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/login\"])\n      });\n    }\n  ","import { useState, useCallback } from 'react';\nimport { useRouter } from 'next/router';\nimport { useAuthContext, User } from '@/context/AuthContext';\nimport api, { authAPI, setApiAccessToken } from '@/lib/api';\nimport { toastError } from '@/lib/toast';\n\ninterface LoginResponse {\n  accessToken?: string;\n  token?: string;\n  user: User;\n}\n\nexport function useLoginViewModel() {\n  const { login: contextLogin, setUser, setAccessToken } = useAuthContext();\n  const router = useRouter();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const isValidEmail = useCallback(() => {\n    return /.+@.+\\..+/.test(email);\n  }, [email]);\n\n  const isFormValid = useCallback(() => {\n    return isValidEmail() && password.length > 0;\n  }, [isValidEmail, password]);\n\n  const handleLogin = useCallback(async () => {\n    if (!isFormValid()) {\n      setError('Invalid credentials');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const res = await authAPI.login({ email, password }) as unknown as { data: LoginResponse } | LoginResponse;\n      const payload: LoginResponse = 'data' in (res as any) ? (res as any).data : (res as any);\n      const access = payload.accessToken || payload.token;\n      if (access) {\n        setApiAccessToken(access);\n        setAccessToken(access);\n      }\n      setUser(payload.user);\n      // Let context login know as well (for backward compatibility in tests)\n      await contextLogin(email, password);\n      // Redirect based on role\n      const role = payload.user.role;\n      if (role === 'student') {\n        router.push('/student/dashboard');\n      } else if (role === 'teacher') {\n        router.push('/teacher/dashboard');\n      } else {\n        router.push('/dashboard');\n      }\n    } catch (err: unknown) {\n      const errorObj = err as { response?: { data?: { message?: string } } };\n      const msg = errorObj.response?.data?.message || 'Invalid credentials';\n      setError(msg);\n      toastError(msg);\n    } finally {\n      setLoading(false);\n    }\n  }, [email, password, isFormValid, contextLogin, setUser, setAccessToken, router]);\n\n  return {\n    email,\n    password,\n    loading,\n    error,\n    setEmail,\n    setPassword,\n    setError,\n    handleLogin,\n    isValidEmail,\n    isFormValid,\n  };\n} ","import React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { useLoginViewModel } from '../viewmodel/useLoginViewModel';\nimport HomeButton from '@/components/shared/HomeButton';\nimport BrandLogo from '@/components/shared/BrandLogo';\nimport { useI18n } from '@/lib/i18n';\n\nexport default function LoginPage() {\n  const { \n    email, \n    setEmail, \n    password, \n    setPassword, \n    loading, \n    error, \n    handleLogin \n  } = useLoginViewModel();\n  const { t, locale, setLocale } = useI18n();\n  const [showPassword, setShowPassword] = useState(false);\n  const router = useRouter();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email || !password) return;\n    \n    await handleLogin();\n  };\n\n  const handleSocialLogin = (provider: 'google' | 'outlook' | 'apple') => {\n    const base = process.env.NEXT_PUBLIC_API_BASE_URL || '';\n    const w = 520, h = 600;\n    const y = window.top?.outerHeight ? Math.max(0, (window.top!.outerHeight - h) / 2) : 100;\n    const x = window.top?.outerWidth ? Math.max(0, (window.top!.outerWidth - w) / 2) : 100;\n    window.open(`${base}/api/auth/oauth/${provider}`, 'oauthLogin', `width=${w},height=${h},left=${x},top=${y}`);\n    const handler = (event: MessageEvent) => {\n      const data: any = event.data || {};\n      if (data?.type === 'oauth-success' && data?.token) {\n        window.location.href = '/dashboard';\n      }\n    };\n    window.addEventListener('message', handler, { once: true });\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8 relative overflow-hidden\">\n      {/* Language toggle */}\n      <div className=\"absolute top-4 right-4 z-10\">\n        <button\n          onClick={() => setLocale(locale === 'en' ? 'tr' : 'en')}\n          className=\"px-2 py-1 text-xs rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50\"\n          aria-label=\"Toggle language\"\n          title={locale === 'en' ? 'Türkçe' : 'English'}\n        >\n          {locale === 'en' ? 'TR' : 'EN'}\n        </button>\n      </div>\n      {/* Background decorative elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -top-40 -right-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-tr from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      <div className=\"relative w-full max-w-sm sm:max-w-md space-y-6 sm:space-y-8\">\n        {/* Logo and Brand */}\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-4 sm:mb-6\">\n            <BrandLogo size={88} />\n          </div>\n          <p className=\"text-xs text-blue-600 font-semibold mb-1\">Verbing Up Your Language Skills!</p>\n          <p className=\"text-gray-600 text-base sm:text-lg\">{t('auth.login.welcome','Welcome back to your learning journey')}</p>\n        </div>\n\n        {/* Main Login Form */}\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 sm:p-8 space-y-6\">\n            <div className=\"text-center\">\n            <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">{t('auth.login.title','Sign in to your account')}</h2>\n            <p className=\"text-gray-600 text-sm sm:text-base\">\n              Continue your English learning adventure\n            </p>\n          </div>\n\n          <form className=\"space-y-4 sm:space-y-6\" onSubmit={handleSubmit}>\n            {/* Email Field */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">{t('auth.login.email','Email address')}</label>\n              <div className=\"relative\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  className=\"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base\"\n                  placeholder={t('auth.login.emailPlaceholder','Enter your email')}\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                  <i className=\"fas fa-envelope text-gray-400\"></i>\n                </div>\n              </div>\n            </div>\n            {/* If the user is a teacher awaiting approval, we could show a notice after login; handled post-auth */}\n\n            {/* Password Field */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">{t('auth.login.password','Password')}</label>\n              <div className=\"relative\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  autoComplete=\"current-password\"\n                  required\n                  className=\"w-full px-3 sm:px-4 py-2.5 sm:py-3 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base\"\n                  placeholder={t('auth.login.passwordPlaceholder','Enter your password')}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n                <button\n                  type=\"button\"\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n                  onClick={() => setShowPassword(!showPassword)}\n                >\n                  <i className={`fas ${showPassword ? 'fa-eye-slash' : 'fa-eye'} text-gray-400 hover:text-gray-600 transition-colors`}></i>\n                </button>\n              </div>\n            </div>\n\n            {/* Forgot Password Link */}\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0\">\n              <div className=\"flex items-center\">\n                <input\n                  id=\"remember-me\"\n                  name=\"remember-me\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                />\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-700\">\n                  {t('auth.login.remember','Remember me')}\n                </label>\n              </div>\n              <Link \n                href=\"/forgot-password\" \n                className=\"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline\"\n              >\n                {t('auth.login.forgot','Forgot your password?')}\n              </Link>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4\">\n                <div className=\"flex\">\n                  <i className=\"fas fa-exclamation-circle text-red-400 mt-0.5 mr-3\"></i>\n                  <p className=\"text-sm text-red-600\">{error}</p>\n                </div>\n              </div>\n            )}\n\n            {/* Sign In Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"group relative w-full flex justify-center py-2.5 sm:py-3 px-4 border border-transparent text-sm sm:text-base font-semibold rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl\"\n            >\n              {loading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  {t('auth.login.signingin','Signing in...')}\n                </div>\n              ) : (\n                <>\n                  <i className=\"fas fa-sign-in-alt mr-2\"></i>\n                  {t('auth.login.submit','Sign in')}\n                </>\n              )}\n            </button>\n          </form>\n\n          {/* Divider */}\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <div className=\"w-full border-t border-gray-300\"></div>\n            </div>\n            <div className=\"relative flex justify-center text-sm\">\n              <span className=\"px-2 bg-white text-gray-500\">{t('auth.login.or','Or continue with')}</span>\n            </div>\n          </div>\n\n          {/* Social Login Buttons */}\n          <div className=\"grid grid-cols-1 gap-3\">\n            <button\n              onClick={() => handleSocialLogin('google')}\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\n            >\n              <i className=\"fab fa-google text-red-500 mr-3\"></i>\n              {t('auth.login.google','Sign in with Google')}\n            </button>\n            \n            <button\n              onClick={() => handleSocialLogin('outlook')}\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\n            >\n              <i className=\"fas fa-envelope text-blue-500 mr-3\"></i>\n              {t('auth.login.outlook','Sign in with Outlook')}\n            </button>\n            \n            <button\n              onClick={() => handleSocialLogin('apple')}\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\n            >\n              <i className=\"fab fa-apple text-gray-900 mr-3\"></i>\n              {t('auth.login.apple','Sign in with Apple')}\n            </button>\n          </div>\n        </div>\n\n        {/* Sign Up CTA */}\n        <div className=\"text-center\">\n          <p className=\"text-gray-600 text-sm sm:text-base\">\n            {t('auth.login.new','New to Verbfy?')}{' '}\n            <Link \n              href=\"/register\" \n              className=\"font-semibold text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline\"\n            >\n              {t('auth.login.join','Join Now')}\n            </Link>\n          </p>\n        </div>\n\n        {/* Footer Links */}\n        <div className=\"text-center space-y-2\">\n          <div className=\"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4 text-sm text-gray-500\">\n            <Link href=\"/privacy\" className=\"hover:text-gray-700 transition-colors\">\n              {t('footer.privacy','Privacy Policy')}\n            </Link>\n            <Link href=\"/terms\" className=\"hover:text-gray-700 transition-colors\">\n              {t('footer.terms','Terms of Service')}\n            </Link>\n            <Link href=\"/help\" className=\"hover:text-gray-700 transition-colors\">\n              {t('footer.help','Help Center')}\n            </Link>\n          </div>\n          <p className=\"text-xs text-gray-400\">\n            © 2024 Verbfy. {t('footer.rights','All rights reserved.')}\n          </p>\n        </div>\n      </div>\n\n      {/* Home Button - Floating */}\n      <HomeButton />\n    </div>\n  );\n} ","import LoginPage from '../src/features/auth/view/LoginPage';\nimport Link from 'next/link';\n\nexport default function Login() {\n  return (\n    <>\n      <LoginPage />\n      <div className=\"mt-6 text-center\">\n        <Link href=\"/forgot-password\" className=\"text-sm text-indigo-600 hover:underline\">Forgot password?</Link>\n      </div>\n    </>\n  );\n}","import React from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\n\ninterface BrandLogoProps {\n  size?: number; // width/height in px\n  withTitle?: boolean;\n  href?: string;\n  className?: string;\n  titleClassName?: string;\n}\n\nexport default function BrandLogo({\n  size = 40,\n  withTitle = true,\n  href = '/',\n  className = '',\n  titleClassName = 'text-2xl font-extrabold text-gray-900 dark:text-white'\n}: BrandLogoProps) {\n  return (\n    <Link href={href} className={`flex items-center space-x-2 ${className}`} aria-label=\"Verbfy Home\">\n      <Image\n        src=\"/logo.png\"\n        alt=\"Verbfy logo\"\n        width={size}\n        height={size}\n        priority\n      />\n      {withTitle && <span className={titleClassName}>Verbfy</span>}\n    </Link>\n  );\n}\n\n\n","import React from 'react';\nimport Link from 'next/link';\nimport { useAuthContext } from '@/context/AuthContext';\n\ninterface HomeButtonProps {\n  className?: string;\n  showText?: boolean;\n}\n\nconst HomeButton: React.FC<HomeButtonProps> = ({ \n  className = '', \n  showText = false \n}) => {\n  const { user } = useAuthContext();\n  \n  // Determine the home destination based on authentication status\n  const homeDestination = user ? \n    (user.role === 'student' ? '/student/dashboard' : '/teacher/dashboard') : \n    '/';\n\n  return (\n    <>\n      {/* Desktop version - shows in header/navbar */}\n      <Link\n        href={homeDestination}\n        className={`hidden lg:flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 ${className}`}\n        title={user ? 'Dashboard' : 'Anasayfa'}\n      >\n        <i className=\"fas fa-home w-5 h-5 mr-2\"></i>\n        {showText && <span>{user ? 'Dashboard' : 'Anasayfa'}</span>}\n      </Link>\n\n      {/* Mobile version - floating button */}\n      <Link\n        href={homeDestination}\n        className=\"lg:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200\"\n        title={user ? 'Dashboard' : 'Anasayfa'}\n      >\n        <span className=\"text-white text-xl\">🏠</span>\n      </Link>\n    </>\n  );\n};\n\nexport default HomeButton; ","// Toast implementation that integrates with the existing Toast component system\nimport { toast } from '../components/common/Toast';\n\nexport const toastError = (message: string) => {\n  toast.error(message);\n};\n\nexport const toastSuccess = (message: string) => {\n  toast.success(message);\n};\n\nexport const toastWarning = (message: string) => {\n  toast.warning(message);\n};\n\nexport const toastInfo = (message: string) => {\n  toast.info(message);\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","LoginPage","email","setEmail","password","setPassword","loading","error","handleLogin","useLoginViewModel","login","contextLogin","setUser","setAccessToken","useAuthContext","router","useRouter","useState","setLoading","setError","isValidEmail","useCallback","test","isFormValid","length","res","authAPI","payload","data","access","accessToken","token","setApiAccessToken","user","role","err","errorObj","msg","response","message","toastError","t","locale","setLocale","useI18n","showPassword","setShowPassword","handleSubmit","e","preventDefault","handleSocialLogin","base","process","env","NEXT_PUBLIC_API_BASE_URL","y","top","outerHeight","Math","max","h","x","outerWidth","w","open","provider","concat","addEventListener","event","type","location","href","once","jsx_runtime","jsxs","div","className","jsx","button","onClick","aria-label","title","BrandLogo","size","p","h2","form","onSubmit","label","htmlFor","input","id","name","autoComplete","required","placeholder","value","onChange","target","i","Link","disabled","Fragment","span","HomeButton","Login","param","withTitle","titleClassName","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","Image","src","alt","width","height","priority","__webpack_exports__","Z","showText","homeDestination","toast","toastSuccess","success"],"sourceRoot":""}