(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8571],{3376:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/free-materials",function(){return a(86069)}])},86069:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(85893),l=a(67294),r=a(11163),n=a(10571),i=a(32798),d=a(72509),c=a(7261),o=a(4001),x=a(84874),m=a(99537),g=a(3204),u=a(93069),h=a(70927),p=a(71628),j=function(){(0,r.useRouter)();let[e,s]=(0,l.useState)([]),[a,j]=(0,l.useState)([]),[b,y]=(0,l.useState)([]),[f,v]=(0,l.useState)([]),[N,w]=(0,l.useState)(!0),[C,A]=(0,l.useState)({category:"All",level:"All",search:"",sortBy:"createdAt",sortOrder:"desc",page:1,limit:12}),[F,Z]=(0,l.useState)({page:1,limit:12,total:0,pages:0}),[k,_]=(0,l.useState)(!1),M=(0,l.useCallback)(async()=>{try{w(!0);let[e,s,a]=await Promise.all([i.Cv.getCategories(),i.Cv.getLevels(),i.Cv.getFeaturedMaterials()]);y(e.data),v(s.data),j(a.data)}catch(e){d.Am.error("Failed to load initial data")}finally{w(!1)}},[]),S=(0,l.useCallback)(async()=>{try{let e=await i.Cv.getMaterials(C);s(e.data),Z(e.pagination)}catch(e){d.Am.error("Failed to load materials")}},[C]);(0,l.useEffect)(()=>{M()},[M]),(0,l.useEffect)(()=>{S()},[S]);let B=async e=>{try{let s=await i.Cv.downloadMaterial(e._id),a=window.URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=e.title,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t),d.Am.success("Download started!")}catch(e){d.Am.error("Failed to download material")}},R=async(e,s)=>{try{await i.Cv.rateMaterial(e,s),d.Am.success("Rating submitted!"),S()}catch(e){d.Am.error("Failed to submit rating")}},E=e=>{switch(e){case"pdf":return(0,t.jsx)(o.Z,{className:"w-5 h-5 text-red-500"});case"image":return(0,t.jsx)(x.Z,{className:"w-5 h-5 text-green-500"});case"video":return(0,t.jsx)(x.Z,{className:"w-5 h-5 text-blue-500"});case"audio":return(0,t.jsx)(x.Z,{className:"w-5 h-5 text-purple-500"});case"presentation":return(0,t.jsx)(c.Z,{className:"w-5 h-5 text-orange-500"});default:return(0,t.jsx)(o.Z,{className:"w-5 h-5 text-gray-500"})}},L=e=>{switch(e){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}},O=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},U=(e,s)=>(0,t.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(a=>(0,t.jsx)("button",{onClick:()=>null==s?void 0:s(a),className:"text-yellow-400 hover:text-yellow-500 transition-colors",disabled:!s,children:a<=e?(0,t.jsx)(p.Z,{className:"w-4 h-4"}):(0,t.jsx)(h.Z,{className:"w-4 h-4"})},a))});return(0,t.jsx)(n.Z,{allowedRoles:["student","teacher"],children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(c.Z,{className:"w-8 h-8 text-green-600"}),"Free Learning Materials"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Access high-quality English learning resources for free"})]}),a.length>0&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"w-5 h-5 text-red-500"}),"Featured Materials"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[E(e.type),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.type.toUpperCase()})]}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800",children:"Featured"})]}),(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(L(e.level)),children:e.level}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:O(e.fileSize)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[U(Number(e.averageRating||0)),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.downloadCount," downloads"]})]}),(0,t.jsxs)("button",{onClick:()=>B(e),className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4"}),"Download Free"]})]},e._id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1 min-w-64",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search materials...",value:C.search,onChange:e=>A({...C,search:e.target.value,page:1}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),(0,t.jsxs)("button",{onClick:()=>_(!k),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),"Filters"]}),(0,t.jsxs)("select",{value:"".concat(C.sortBy,"-").concat(C.sortOrder),onChange:e=>{let[s,a]=e.target.value.split("-");A({...C,sortBy:s,sortOrder:a,page:1})},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,t.jsx)("option",{value:"createdAt-desc",children:"Newest First"}),(0,t.jsx)("option",{value:"createdAt-asc",children:"Oldest First"}),(0,t.jsx)("option",{value:"rating-desc",children:"Highest Rated"}),(0,t.jsx)("option",{value:"downloadCount-desc",children:"Most Downloaded"}),(0,t.jsx)("option",{value:"title-asc",children:"A-Z"}),(0,t.jsx)("option",{value:"title-desc",children:"Z-A"})]})]}),k&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,t.jsxs)("select",{value:C.category,onChange:e=>A({...C,category:e.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,t.jsx)("option",{value:"All",children:"All Categories"}),b.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,t.jsxs)("select",{value:C.level,onChange:e=>A({...C,level:e.target.value,page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,t.jsx)("option",{value:"All",children:"All Levels"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Items per page"}),(0,t.jsxs)("select",{value:C.limit,onChange:e=>A({...C,limit:Number(e.target.value),page:1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,t.jsx)("option",{value:12,children:"12 per page"}),(0,t.jsx)("option",{value:24,children:"24 per page"}),(0,t.jsx)("option",{value:48,children:"48 per page"})]})]})]})]}),N?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[E(e.type),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.type.toUpperCase()})]}),e.isFeatured&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800",children:"Featured"})]}),(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(L(e.level)),children:e.level}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:O(e.fileSize)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[U(Number(e.averageRating||0),s=>R(e._id,s)),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.ratingCount,")"]})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.downloadCount," downloads"]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:["By ",e.uploadedBy.name]}),(0,t.jsxs)("button",{onClick:()=>B(e),className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4"}),"Download Free"]})]},e._id))}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(c.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No materials found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]}),F.pages>1&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsx)("div",{className:"flex gap-2",children:[...Array(F.pages)].map((e,s)=>(0,t.jsx)("button",{onClick:()=>A({...C,page:s+1}),className:"px-3 py-2 rounded-md text-sm ".concat(F.page===s+1?"bg-green-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"),children:s+1},s))})})]})})}}},function(e){e.O(0,[5522,2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,1493,2888,5514,179],function(){return e(e.s=3376)}),_N_E=e.O()}]);