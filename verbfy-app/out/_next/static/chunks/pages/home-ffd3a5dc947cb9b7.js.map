{"version":3,"file":"static/chunks/pages/home-ffd3a5dc947cb9b7.js","mappings":"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","sources":["webpack://_N_E/?ede5","webpack://_N_E/./pages/home.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/home\",\n      function () {\n        return require(\"private-next-pages/home.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/home\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { useAuth } from '@/context/AuthContext';\nimport Link from 'next/link';\nimport { useI18n } from '@/lib/i18n';\nimport { notificationAPI, freeMaterialsAPI, verbfyTalkAPI, reservationAPI } from '@/lib/api';\n\nexport default function HomePage() {\n  const { user } = useAuth();\n  const { t } = useI18n();\n\n  const [unread, setUnread] = useState<number>(0);\n  const [featured, setFeatured] = useState<any[]>([]);\n  const [rooms, setRooms] = useState<any[]>([]);\n  const [upcoming, setUpcoming] = useState<any[]>([]);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const [n, f, r] = await Promise.all([\n          notificationAPI.getNotifications(),\n          freeMaterialsAPI.getFeaturedMaterials(),\n          verbfyTalkAPI.getRooms({ limit: 4 }),\n        ]);\n        setUnread(n.data?.data?.unreadCount ?? 0);\n        setFeatured((f as any).data ?? []);\n        setRooms((r as any).data?.rooms ?? (r as any).rooms ?? []);\n      } catch {}\n\n      try {\n        const res = await reservationAPI.getReservations({ status: 'upcoming', limit: 5 });\n        setUpcoming(res.data?.data ?? []);\n      } catch {}\n    };\n    load();\n  }, []);\n\n  return (\n    <DashboardLayout title={t('home.title', 'Home')}>\n      <div className=\"space-y-8\">\n        {/* Quick stats */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <StatCard label={t('home.stats.unread', 'Unread notifications')} value={unread} />\n          <StatCard label={t('home.stats.upcoming', 'Upcoming lessons')} value={upcoming.length} />\n          <StatCard label={t('home.stats.rooms', 'Open talk rooms')} value={rooms.length} />\n          <StatCard label={t('home.stats.materials', 'Featured materials')} value={featured.length} />\n        </div>\n\n        {/* Shortcuts */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <Shortcut href=\"/teachers\" icon=\"👨‍🏫\" title={t('home.shortcut.teachers', 'Find Teachers')} />\n          <Shortcut href=\"/verbfy-talk\" icon=\"🎥\" title={t('home.shortcut.talk', 'Join VerbfyTalk')} />\n          <Shortcut href=\"/free-materials\" icon=\"📚\" title={t('home.shortcut.materials', 'Free Materials')} />\n          <Shortcut href=\"/cefr-tests\" icon=\"📝\" title={t('home.shortcut.cefr', 'CEFR Tests')} />\n        </div>\n\n        {/* Upcoming reservations */}\n        <Section title={t('home.upcoming', 'Your upcoming lessons')} linkHref=\"/reservations\" linkText={t('home.viewAll', 'View all')}>\n          {upcoming.length === 0 ? (\n            <Empty text={t('home.upcomingEmpty', 'No upcoming lessons yet')} />\n          ) : (\n            <ul className=\"divide-y divide-gray-200 rounded-lg border\">\n              {upcoming.map((r: any) => (\n                <li key={r._id} className=\"p-4 flex items-center justify-between\">\n                  <div>\n                    <div className=\"font-medium text-gray-900\">{r.title || t('home.lesson', 'Lesson')}</div>\n                    <div className=\"text-sm text-gray-600\">{new Date(r.startTime || r.date).toLocaleString()}</div>\n                  </div>\n                  <Link href=\"/reservations\" className=\"text-blue-600 hover:underline text-sm\">{t('home.manage', 'Manage')}</Link>\n                </li>\n              ))}\n            </ul>\n          )}\n        </Section>\n\n        {/* Featured materials */}\n        <Section title={t('home.featured', 'Featured materials')} linkHref=\"/free-materials\" linkText={t('home.viewAll', 'View all')}>\n          {featured.length === 0 ? (\n            <Empty text={t('home.materialsEmpty', 'No featured materials yet')} />\n          ) : (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {featured.slice(0, 6).map((m: any) => (\n                <div key={m._id} className=\"p-4 rounded-lg border hover:shadow-sm transition\">\n                  <div className=\"font-medium text-gray-900\">{m.title}</div>\n                  <div className=\"text-sm text-gray-600 line-clamp-2\">{m.description}</div>\n                  <div className=\"mt-2 text-xs text-gray-500\">{m.level} • {m.category}</div>\n                </div>\n              ))}\n            </div>\n          )}\n        </Section>\n\n        {/* Open rooms */}\n        <Section title={t('home.rooms', 'Open VerbfyTalk rooms')} linkHref=\"/verbfy-talk\" linkText={t('home.viewAll', 'View all')}>\n          {rooms.length === 0 ? (\n            <Empty text={t('home.roomsEmpty', 'No rooms available right now')} />\n          ) : (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {rooms.slice(0, 6).map((room: any) => (\n                <div key={room._id} className=\"p-4 rounded-lg border hover:shadow-sm transition\">\n                  <div className=\"font-medium text-gray-900\">{room.name || t('home.room', 'Room')}</div>\n                  <div className=\"text-sm text-gray-600\">{room.isPrivate ? t('home.private','Private') : t('home.public','Public')}</div>\n                </div>\n              ))}\n            </div>\n          )}\n        </Section>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nfunction StatCard({ label, value }: { label: string; value: number | string }) {\n  return (\n    <div className=\"rounded-lg border p-4 bg-white\">\n      <div className=\"text-sm text-gray-600\">{label}</div>\n      <div className=\"text-2xl font-semibold text-gray-900\">{value}</div>\n    </div>\n  );\n}\n\nfunction Shortcut({ href, icon, title }: { href: string; icon: string; title: string }) {\n  return (\n    <Link href={href} className=\"rounded-lg border p-4 bg-white flex items-center space-x-3 hover:shadow-sm transition\">\n      <span className=\"text-xl\" aria-hidden>{icon}</span>\n      <span className=\"font-medium text-gray-900\">{title}</span>\n    </Link>\n  );\n}\n\nfunction Section({ title, linkHref, linkText, children }: { title: string; linkHref: string; linkText: string; children: React.ReactNode }) {\n  return (\n    <section>\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\n        <Link href={linkHref} className=\"text-sm text-blue-600 hover:underline\">{linkText}</Link>\n      </div>\n      {children}\n    </section>\n  );\n}\n\nfunction Empty({ text }: { text: string }) {\n  return (\n    <div className=\"rounded-lg border p-8 text-center text-gray-500\">{text}</div>\n  );\n}\n\n\n"],"names":["window","__NEXT_P","push","__webpack_require__","HomePage","user","useAuth","t","useI18n","unread","setUnread","useState","featured","setFeatured","rooms","setRooms","upcoming","setUpcoming","useEffect","load","n","_r_data","_f_data","_r_data_rooms","_ref","res","f","r","Promise","all","notificationAPI","getNotifications","freeMaterialsAPI","getFeaturedMaterials","verbfyTalkAPI","getRooms","limit","data","unreadCount","e","reservationAPI","getReservations","status","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","title","jsxs","div","className","StatCard","label","value","length","Shortcut","href","icon","Section","linkHref","linkText","Empty","text","ul","map","li","Date","startTime","date","toLocaleString","Link","_id","slice","m","description","level","category","room","name","isPrivate","param","span","aria-hidden","children","section","h2"],"sourceRoot":""}