(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6674],{19305:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/organization",function(){return t(46838)}])},46838:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(85893),r=t(67294),n=t(11088),l=t(32798);function i(e){let{onSelectOrganization:s,onCreateNew:t}=e,[n,i]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[c,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(""),[h,g]=(0,r.useState)("all"),[p,v]=(0,r.useState)("name");(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{o(!0),x(null);let e=await l.ZP.get("/api/organizations");i(e.data.data)}catch(t){var e,s;x((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch organizations")}finally{o(!1)}},b=n.filter(e=>{let s=e.name.toLowerCase().includes(u.toLowerCase())||e.contact.email.toLowerCase().includes(u.toLowerCase()),t="all"===h||e.type===h;return s&&t}).sort((e,s)=>{switch(p){case"name":return e.name.localeCompare(s.name);case"type":return e.type.localeCompare(s.type);case"status":return e.subscription.status.localeCompare(s.subscription.status);case"created":return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}}),f=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800"}},y=e=>{switch(e){case"school":return"bg-blue-100 text-blue-800";case"university":return"bg-purple-100 text-purple-800";case"language_center":return"bg-green-100 text-green-800";case"corporate":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return d?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):c?(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:c})]})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Organizations"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your organizations and their settings"})]}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create Organization"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,a.jsx)("input",{type:"text",placeholder:"Search organizations...",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Type"}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"school",children:"School"}),(0,a.jsx)("option",{value:"university",children:"University"}),(0,a.jsx)("option",{value:"language_center",children:"Language Center"}),(0,a.jsx)("option",{value:"corporate",children:"Corporate"}),(0,a.jsx)("option",{value:"individual",children:"Individual"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,a.jsxs)("select",{value:p,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"name",children:"Name"}),(0,a.jsx)("option",{value:"type",children:"Type"}),(0,a.jsx)("option",{value:"status",children:"Status"}),(0,a.jsx)("option",{value:"created",children:"Date Created"})]})]})]})}),0===b.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No organizations found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:u||"all"!==h?"Try adjusting your search or filter criteria.":"Get started by creating a new organization."}),!u&&"all"===h&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Organization"})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>{var t,r;return(0,a.jsx)("div",{onClick:()=>s(e),className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.contact.email})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(y(e.type)),children:e.type.replace("_"," ")}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(f(e.subscription.status)),children:e.subscription.status})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(null===(t=e.contact.address)||void 0===t?void 0:t.city)&&(null===(r=e.contact.address)||void 0===r?void 0:r.country)?"".concat(e.contact.address.city,", ").concat(e.contact.address.country):"No location specified"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),e.admins.length," admin",1!==e.admins.length?"s":""]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.subscription.plan," plan"]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 6v6m-4-6h8m-8 6h8"})}),"Max ",e.subscription.maxUsers," users"]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Created ",new Date(e.createdAt).toLocaleDateString()]})})]})},e._id)})}),b.length>0&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",b.length," of ",n.length," organizations"]})})]})}function d(e){var s;let{organizationId:t}=e,[n,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[t]);let h=async()=>{try{x(!0),m(null);let e=await l.ZP.get("/api/organizations/".concat(t||""));i(e.data.data);let s=await l.ZP.get("/api/organizations/".concat(t||"","/stats"));o(s.data.data)}catch(t){var e,s;m((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch organization data")}finally{x(!1)}};return c?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u?(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:u})]})]})}):n?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),(0,a.jsx)("p",{className:"text-gray-600 capitalize",children:n.type.replace("_"," ")}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:n.contact.email})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===n.subscription.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:n.subscription.status}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[n.subscription.plan," Plan"]})]})]})}),d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.users.total})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Content"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.content.total})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Storage Used"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[d.storage.used," GB"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Plan"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.subscription.plan})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900",children:n.contact.email})]}),n.contact.phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,a.jsx)("p",{className:"text-gray-900",children:n.contact.phone})]}),(null===(s=n.contact.address)||void 0===s?void 0:s.street)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[n.contact.address.street,(0,a.jsx)("br",{}),n.contact.address.city,", ",n.contact.address.state," ",n.contact.address.postalCode,(0,a.jsx)("br",{}),n.contact.address.country]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscription Details"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Plan"}),(0,a.jsx)("p",{className:"text-gray-900 capitalize",children:n.subscription.plan})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===n.subscription.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:n.subscription.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Max Users"}),(0,a.jsx)("p",{className:"text-gray-900",children:n.subscription.maxUsers})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Max Storage"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[n.subscription.maxStorage," GB"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Billing Cycle"}),(0,a.jsx)("p",{className:"text-gray-900 capitalize",children:n.subscription.billingCycle})]}),n.subscription.startDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Start Date"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(n.subscription.startDate).toLocaleDateString()})]}),n.subscription.endDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"End Date"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(n.subscription.endDate).toLocaleDateString()})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Administrators"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.admins.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.userId.charAt(0).toUpperCase()})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["User ID: ",e.userId]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Added by: ",e.addedBy]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("owner"===e.role?"bg-purple-100 text-purple-800":"admin"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.permissions.includes("*")?"All Permissions":e.permissions.join(", ")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.addedAt).toLocaleDateString()})]},s))})]})})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Organization Found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Please create an organization to get started."})]})}function o(e){var s,t,n,l,i,d,o,c,x,u,m,h,g,p,v,j,b,f;let{organization:y,onSubmit:N,onCancel:w,loading:k=!1}=e,[C,z]=(0,r.useState)({name:"",type:"school",contact:{email:"",phone:"",address:{street:"",city:"",state:"",country:"",postalCode:""}},branding:{primaryColor:"#3B82F6",secondaryColor:"#1F2937",theme:"light",language:"en",timezone:"UTC"},subscription:{plan:"free",maxUsers:10,maxStorage:1,features:["basic_features"],billingCycle:"monthly"},settings:{allowUserRegistration:!0,requireEmailVerification:!0,requireAdminApproval:!1,allowFileUploads:!0,maxFileSize:10,allowedFileTypes:["pdf","doc","docx","jpg","jpeg","png"],sessionTimeout:480,passwordPolicy:{minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!1},aiFeatures:{enabled:!0,dailyLimit:100,modelAccess:["gpt-3.5-turbo"]}}});(0,r.useEffect)(()=>{y&&z({name:y.name,type:y.type,contact:y.contact,branding:y.branding,subscription:y.subscription,settings:y.settings})},[y]);let S=(e,s)=>{z(t=>({...t,[e]:s}))},L=(e,s)=>{z(t=>({...t,contact:{...t.contact,[e]:s}}))},M=(e,s)=>{z(t=>{var a,r,n,l,i;return{...t,contact:{...t.contact,address:{street:(null===(a=t.contact.address)||void 0===a?void 0:a.street)||"",city:(null===(r=t.contact.address)||void 0===r?void 0:r.city)||"",state:(null===(n=t.contact.address)||void 0===n?void 0:n.state)||"",country:(null===(l=t.contact.address)||void 0===l?void 0:l.country)||"",postalCode:(null===(i=t.contact.address)||void 0===i?void 0:i.postalCode)||"",[e]:s}}}})};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N(C)},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Name *"}),(0,a.jsx)("input",{type:"text",value:C.name,onChange:e=>S("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Type *"}),(0,a.jsxs)("select",{value:C.type,onChange:e=>S("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"school",children:"School"}),(0,a.jsx)("option",{value:"university",children:"University"}),(0,a.jsx)("option",{value:"language_center",children:"Language Center"}),(0,a.jsx)("option",{value:"corporate",children:"Corporate"}),(0,a.jsx)("option",{value:"individual",children:"Individual"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:C.contact.email,onChange:e=>L("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:C.contact.phone||"",onChange:e=>L("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-md font-medium mb-3",children:"Address"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street"}),(0,a.jsx)("input",{type:"text",value:(null===(s=C.contact.address)||void 0===s?void 0:s.street)||"",onChange:e=>M("street",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,a.jsx)("input",{type:"text",value:(null===(t=C.contact.address)||void 0===t?void 0:t.city)||"",onChange:e=>M("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),(0,a.jsx)("input",{type:"text",value:(null===(n=C.contact.address)||void 0===n?void 0:n.state)||"",onChange:e=>M("state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,a.jsx)("input",{type:"text",value:(null===(l=C.contact.address)||void 0===l?void 0:l.country)||"",onChange:e=>M("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code"}),(0,a.jsx)("input",{type:"text",value:(null===(i=C.contact.address)||void 0===i?void 0:i.postalCode)||"",onChange:e=>M("postalCode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Branding"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,a.jsx)("input",{type:"color",value:(null===(d=C.branding)||void 0===d?void 0:d.primaryColor)||"#3B82F6",onChange:e=>z(s=>({...s,branding:{...s.branding,primaryColor:e.target.value}})),className:"w-full h-10 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),(0,a.jsx)("input",{type:"color",value:(null===(o=C.branding)||void 0===o?void 0:o.secondaryColor)||"#1F2937",onChange:e=>z(s=>({...s,branding:{...s.branding,secondaryColor:e.target.value}})),className:"w-full h-10 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,a.jsxs)("select",{value:(null===(c=C.branding)||void 0===c?void 0:c.theme)||"light",onChange:e=>z(s=>({...s,branding:{...s.branding,theme:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"light",children:"Light"}),(0,a.jsx)("option",{value:"dark",children:"Dark"}),(0,a.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,a.jsxs)("select",{value:(null===(x=C.branding)||void 0===x?void 0:x.language)||"en",onChange:e=>z(s=>({...s,branding:{...s.branding,language:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"es",children:"Spanish"}),(0,a.jsx)("option",{value:"fr",children:"French"}),(0,a.jsx)("option",{value:"de",children:"German"}),(0,a.jsx)("option",{value:"it",children:"Italian"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Subscription"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan"}),(0,a.jsxs)("select",{value:(null===(u=C.subscription)||void 0===u?void 0:u.plan)||"free",onChange:e=>z(s=>({...s,subscription:{...s.subscription,plan:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"free",children:"Free"}),(0,a.jsx)("option",{value:"basic",children:"Basic"}),(0,a.jsx)("option",{value:"premium",children:"Premium"}),(0,a.jsx)("option",{value:"enterprise",children:"Enterprise"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Users"}),(0,a.jsx)("input",{type:"number",value:(null===(m=C.subscription)||void 0===m?void 0:m.maxUsers)||10,onChange:e=>z(s=>({...s,subscription:{...s.subscription,maxUsers:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Storage (GB)"}),(0,a.jsx)("input",{type:"number",value:(null===(h=C.subscription)||void 0===h?void 0:h.maxStorage)||1,onChange:e=>z(s=>({...s,subscription:{...s.subscription,maxStorage:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Billing Cycle"}),(0,a.jsxs)("select",{value:(null===(g=C.subscription)||void 0===g?void 0:g.billingCycle)||"monthly",onChange:e=>z(s=>({...s,subscription:{...s.subscription,billingCycle:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"monthly",children:"Monthly"}),(0,a.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,a.jsx)("option",{value:"yearly",children:"Yearly"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow User Registration"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Allow new users to register themselves"})]}),(0,a.jsx)("input",{type:"checkbox",checked:(null===(p=C.settings)||void 0===p?void 0:p.allowUserRegistration)||!0,onChange:e=>z(s=>({...s,settings:{...s.settings,allowUserRegistration:e.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Require email verification for new accounts"})]}),(0,a.jsx)("input",{type:"checkbox",checked:(null===(v=C.settings)||void 0===v?void 0:v.requireEmailVerification)||!0,onChange:e=>z(s=>({...s,settings:{...s.settings,requireEmailVerification:e.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow File Uploads"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Allow users to upload files"})]}),(0,a.jsx)("input",{type:"checkbox",checked:(null===(j=C.settings)||void 0===j?void 0:j.allowFileUploads)||!0,onChange:e=>z(s=>({...s,settings:{...s.settings,allowFileUploads:e.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB)"}),(0,a.jsx)("input",{type:"number",value:(null===(b=C.settings)||void 0===b?void 0:b.maxFileSize)||10,onChange:e=>z(s=>({...s,settings:{...s.settings,maxFileSize:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),(0,a.jsx)("input",{type:"number",value:(null===(f=C.settings)||void 0===f?void 0:f.sessionTimeout)||480,onChange:e=>z(s=>({...s,settings:{...s.settings,sessionTimeout:parseInt(e.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"15"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:w,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:k?"Saving...":y?"Update Organization":"Create Organization"})]})]})}var c=t(6642);function x(){let[e,s]=(0,r.useState)("list"),[t,x]=(0,r.useState)(void 0),[u,m]=(0,r.useState)(!1),h=e=>{x(e),s("dashboard")},g=()=>{x(void 0),s("create")},p=()=>{s("edit")},v=()=>{x(void 0),s("list")},j=async e=>{try{m(!0);let t=await l.ZP.post("/api/organizations",e);(0,c.x9)("Organization created successfully!"),x(t.data.data),s("dashboard")}catch(e){var t,a;(0,c._N)((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to create organization")}finally{m(!1)}},b=async e=>{if(t)try{m(!0);let a=await l.ZP.put("/api/organizations/".concat(t._id),e);(0,c.x9)("Organization updated successfully!"),x(a.data.data),s("dashboard")}catch(e){var a,r;(0,c._N)((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to update organization")}finally{m(!1)}},f=()=>{t?s("dashboard"):s("list")};return(0,a.jsx)(n.Z,{allowedRoles:["admin"],children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(()=>{switch(e){case"list":return(0,a.jsx)(i,{onSelectOrganization:h,onCreateNew:g});case"dashboard":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:v,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Organizations"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Organization Dashboard"})]}),(0,a.jsx)("div",{className:"flex space-x-3",children:(0,a.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Edit Organization"})})]}),(0,a.jsx)(d,{organizationId:null==t?void 0:t._id})]});case"create":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:f,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Organizations"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Organization"})]})}),(0,a.jsx)(o,{onSubmit:j,onCancel:f,loading:u})]});case"edit":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:f,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Organization"})]})}),(0,a.jsx)(o,{organization:t,onSubmit:b,onCancel:f,loading:u})]});default:return null}})()})})}},6642:function(e,s,t){"use strict";t.d(s,{_N:function(){return r},x9:function(){return n}});var a=t(56158);let r=e=>{a.Am.error(e)},n=e=>{a.Am.success(e)}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=19305)}),_N_E=e.O()}]);