(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4480],{84677:function(e,r,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verbfy-games",function(){return l(15573)}])},15573:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return x}});var a=l(85893),t=l(67294),s=l(25675),n=l.n(s),i=l(11088),o=l(54310),d=l(32798),c=l(36197);let u="verbfy_games_store",m=()=>{try{let e=localStorage.getItem(u);if(!e)return[];let r=JSON.parse(e);return Array.isArray(r)?r:[]}catch(e){return[]}},g=e=>localStorage.setItem(u,JSON.stringify(e));function x(){let{t:e,locale:r}=(0,o.Q)(),{user:l}=(0,c.aC)(),s=(null==l?void 0:l.role)==="admin",[u,x]=(0,t.useState)([]),[h,b]=(0,t.useState)(""),[p,v]=(0,t.useState)(""),[y,f]=(0,t.useState)(""),[j,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)({title:"",description:"",category:"",level:"",thumbnailUrl:"",gameUrl:""}),[_,S]=(0,t.useState)(null),k=(0,t.useMemo)(()=>["Vocabulary","Grammar","Listening","Reading","Speaking","Exam"],[]),U=(0,t.useMemo)(()=>["A1","A2","B1","B2","C1","C2"],[]);(0,t.useEffect)(()=>{let e=!1;return(async()=>{try{var r;let l=await d._W.list({category:p,level:y,search:h}),a=(null==l?void 0:null===(r=l.data)||void 0===r?void 0:r.data)||[];e||x(a)}catch(r){e||x(m())}})(),()=>{e=!0}},[p,y,h]);let A=u.filter(e=>{let r=h.trim().toLowerCase();return(!p||e.category===p)&&(!y||e.level===y)&&(!r||e.title.toLowerCase().includes(r)||(e.description||"").toLowerCase().includes(r))}),L=async()=>{if(w.title&&w.gameUrl)try{var e;let r=await d._W.create(w),l=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.data;l&&x(e=>[l,...e])}catch(l){let e="".concat(Date.now()),r=[{...w,id:e,_id:e,createdAt:new Date().toISOString()},...u];x(r),g(r)}finally{N(!1),C({title:"",description:"",category:"",level:"",thumbnailUrl:"",gameUrl:""})}},E=async e=>{try{await d._W.delete(e),x(r=>r.filter(r=>(r._id||r.id)!==e))}catch(l){let r=u.filter(r=>(r._id||r.id)!==e);x(r),g(r)}};return(0,a.jsx)(i.Z,{allowedRoles:["student","teacher","admin"],children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:"VerbfyGames"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"tr"===r?"Tarayıcı \xfczerinden oynanabilen \xf6ğretici mini oyunlar. Kelime, gramer, dinleme ve daha fazlası.":"Browser-based learning mini games. Vocabulary, grammar, listening and more."})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-6 flex flex-col sm:flex-row gap-4 sm:items-center",children:[(0,a.jsx)("input",{value:h,onChange:e=>b(e.target.value),placeholder:"tr"===r?"Ara...":"Search...",className:"w-full sm:w-auto flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("select",{value:p,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"tr"===r?"T\xfcm kategoriler":"All categories"}),k.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"tr"===r?"T\xfcm seviyeler":"All levels"}),U.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),s&&(0,a.jsx)("button",{onClick:()=>N(!0),className:"ml-auto px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"tr"===r?"Yeni Oyun Ekle":"Add Game"})]}),s&&j&&(0,a.jsxs)("div",{className:"mb-6 border border-blue-200 rounded-xl p-4 bg-blue-50",children:[(0,a.jsx)("h2",{className:"font-semibold mb-3",children:"tr"===r?"Yeni Oyun":"New Game"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)("input",{value:w.title,onChange:e=>C({...w,title:e.target.value}),placeholder:"tr"===r?"Başlık":"Title",className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsx)("input",{value:w.thumbnailUrl,onChange:e=>C({...w,thumbnailUrl:e.target.value}),placeholder:"tr"===r?"G\xf6rsel URL":"Thumbnail URL",className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsx)("input",{value:w.gameUrl,onChange:e=>C({...w,gameUrl:e.target.value}),placeholder:"tr"===r?"Oyun URL (iframe)":"Game URL (iframe)",className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,a.jsxs)("select",{value:w.category,onChange:e=>C({...w,category:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"tr"===r?"Kategori":"Category"}),k.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:w.level,onChange:e=>C({...w,level:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"tr"===r?"Seviye":"Level"}),U.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,a.jsx)("button",{onClick:L,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"tr"===r?"Kaydet":"Save"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 rounded-md border border-gray-300",children:"tr"===r?"İptal":"Cancel"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(e=>{let l=e._id||e.id||e.title;return(0,a.jsxs)("div",{className:"group bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,a.jsx)("div",{className:"relative h-40",children:(0,a.jsx)(n(),{src:e.thumbnailUrl||"/images/verbfy-listen.png",alt:e.title,fill:!0,className:"object-contain p-4 group-hover:scale-105 transition-transform duration-200"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:[e.category||"-"," \xb7 ",e.level||"-"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"px-3 py-1 rounded-md border border-gray-300 hover:bg-gray-50",children:"tr"===r?"\xd6nizle":"Preview"}),s&&(0,a.jsx)("button",{onClick:()=>E(l),className:"px-3 py-1 rounded-md border border-red-300 text-red-600 hover:bg-red-50",children:"tr"===r?"Sil":"Delete"})]})]})]})]},l)})}),_&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",onClick:()=>S(null),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl w-[95vw] h-[85vh] max-w-5xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-3 flex items-center justify-between border-b border-gray-200",children:[(0,a.jsx)("p",{className:"font-semibold",children:_.title}),(0,a.jsx)("button",{onClick:()=>S(null),className:"px-3 py-1 rounded-md border border-gray-300",children:"tr"===r?"Kapat":"Close"})]}),(0,a.jsx)("iframe",{src:_.gameUrl,title:_.title,className:"w-full h-full",allowFullScreen:!0})]})})]})})}}},function(e){e.O(0,[2138,9226,9496,8484,437,1883,7,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,1088,5522,1493,2888,5514,179],function(){return e(e.s=84677)}),_N_E=e.O()}]);