{"version":3,"file":"static/chunks/pages/placement-fde494bd69407bcf.js","mappings":"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","sources":["webpack://_N_E/?64f6","webpack://_N_E/./pages/placement/index.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/placement\",\n      function () {\n        return require(\"private-next-pages/placement/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/placement\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport api, { cefrTestsAPI } from '@/lib/api';\nimport { useI18n } from '@/lib/i18n';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function PlacementPage() {\n  const { t, locale } = useI18n();\n  const { user } = useAuth();\n  const [recommendation, setRecommendation] = useState<string | null>(null);\n  const [tests, setTests] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let abort = false;\n    const run = async () => {\n      try {\n        if (!user) {\n          setLoading(false);\n          return;\n        }\n        const [rec, list] = await Promise.all([\n          cefrTestsAPI.getPlacementRecommendation().catch(() => null),\n          cefrTestsAPI.getTests({ testType: 'placement' }).catch(() => ({ data: [] })),\n        ]);\n        if (!abort) {\n          if (rec && (rec as any).recommendation) setRecommendation((rec as any).recommendation);\n          let arr = Array.isArray((list as any)?.tests) ? (list as any).tests : Array.isArray((list as any)?.data) ? (list as any).data : (Array.isArray(list) ? list : []);\n          if (!arr || arr.length === 0) {\n            try {\n              // Use explicit endpoint that guarantees four placement tests\n              const ensured = await api.get('/api/cefr-tests/placement/all');\n              arr = Array.isArray((ensured.data as any)?.tests) ? (ensured.data as any).tests : [];\n            } catch {}\n          }\n          setTests(arr || []);\n        }\n      } finally {\n        if (!abort) setLoading(false);\n      }\n    };\n    run();\n    return () => { abort = true; };\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <Head>\n        <title>{locale === 'tr' ? 'Seviye Tespit (CEFR)' : 'Placement (CEFR)'}</title>\n      </Head>\n      <main className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\n        <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">{locale === 'tr' ? 'Seviye Tespit Sınavı' : 'Placement Test'}</h1>\n        {!user && (\n          <div className=\"mb-6 bg-amber-50 border border-amber-200 text-amber-800 rounded-xl p-4\">\n            {locale==='tr' ? 'Bu sayfa yalnızca kayıtlı kullanıcılara açıktır. Ücretsiz seviye testi için ' : 'This page is only available to registered users. For the free level test go to '}\n            <Link href=\"/level-test/free\" className=\"font-semibold underline\">{locale==='tr' ? 'Ücretsiz Seviye Testi' : 'Free Level Test'}</Link>.\n          </div>\n        )}\n        <p className=\"text-gray-600 mb-6\">\n          {locale === 'tr'\n            ? 'İlk girişte CEFR seviyenizi belirlemek için hızlı bir seviye tespit sınavı çözün. Sonuçlar kişiselleştirilmiş yol haritanızı oluşturmakta kullanılacaktır.'\n            : 'On your first visit, take a quick placement test to determine your CEFR level. The result will be used to personalize your learning path.'}\n        </p>\n\n        {loading ? (\n          <p className=\"text-gray-600\">{locale === 'tr' ? 'Yükleniyor...' : 'Loading...'}</p>\n        ) : (\n          <>\n            {recommendation && (\n              <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4\">\n                <p className=\"font-semibold\">\n                  {locale === 'tr' ? 'Önerilen başlangıç seviyesi: ' : 'Recommended starting level: '}\n                  <span className=\"text-blue-700\">{recommendation}</span>\n                </p>\n              </div>\n            )}\n\n            <div className=\"space-y-4\">\n              {tests.length > 0 ? (\n                tests.map((test: any) => (\n                  <div key={test._id || test.id} className=\"p-4 rounded-xl border border-gray-200 flex items-center justify-between\">\n                    <div>\n                      <p className=\"font-semibold text-gray-900\">{test.title || 'CEFR Placement'}</p>\n                      <p className=\"text-sm text-gray-600\">{test.description || (locale === 'tr' ? 'Seviyenizi ölçün' : 'Measure your level')}</p>\n                    </div>\n                    <Link href={`/cefr-tests/${test._id || test.id}`} className=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700\">\n                      {locale === 'tr' ? 'Sınavı Başlat' : 'Start Test'}\n                    </Link>\n                  </div>\n                ))\n              ) : (\n                <p className=\"text-gray-600\">{locale === 'tr' ? 'Uygun sınav bulunamadı.' : 'No placement test available.'}</p>\n              )}\n            </div>\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n\n\n"],"names":["window","__NEXT_P","push","__webpack_require__","PlacementPage","t","locale","useI18n","user","useAuth","recommendation","setRecommendation","useState","tests","setTests","loading","setLoading","useEffect","abort","run","rec","list","Promise","all","cefrTestsAPI","getPlacementRecommendation","catch","getTests","testType","data","arr","Array","isArray","length","ensured","api","get","_ensured_data","e","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","className","jsx","Head","title","main","h1","Link","href","p","Fragment","span","map","test","description","concat","_id","id"],"sourceRoot":""}