{"version":3,"file":"static/chunks/pages/student/bookings-11f8ad181713db2e.js","mappings":"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","sources":["webpack://_N_E/?e983","webpack://_N_E/./pages/student/bookings.tsx","webpack://_N_E/./src/lib/toast.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/student/bookings\",\n      function () {\n        return require(\"private-next-pages/student/bookings.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/student/bookings\"])\n      });\n    }\n  ","import React, { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { useAuthContext } from '@/context/AuthContext';\nimport api from '@/lib/api';\nimport { toastError, toastSuccess } from '@/lib/toast';\n\ninterface Booking {\n  id: string;\n  teacher: {\n    _id: string;\n    name: string;\n    email: string;\n  };\n  date: string;\n  startTime: string;\n  endTime: string;\n  status: string;\n  createdAt: string;\n}\n\nconst StudentBookingsPage: React.FC = () => {\n  const { user } = useAuthContext();\n  const router = useRouter();\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [cancellingId, setCancellingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user && user.role !== 'student') {\n      router.replace('/dashboard');\n      return;\n    }\n    loadBookings();\n  }, [user, router]);\n\n  const loadBookings = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get('/api/reservations/student');\n      setBookings(response.data.bookings);\n    } catch (error) {\n      console.error('Error loading bookings:', error);\n      toastError('Failed to load your bookings');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancelBooking = async (bookingId: string) => {\n    if (!confirm('Are you sure you want to cancel this lesson?')) {\n      return;\n    }\n\n    setCancellingId(bookingId);\n    try {\n      await api.delete(`/api/reservations/${bookingId}`);\n      toastSuccess('Booking cancelled successfully');\n      await loadBookings(); // Reload the list\n    } catch (error: any) {\n      console.error('Error cancelling booking:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to cancel booking';\n      toastError(errorMessage);\n    } finally {\n      setCancellingId(null);\n    }\n  };\n\n  const formatTime = (time: string) => {\n    const [hours, minutes] = time.split(':');\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? 'PM' : 'AM';\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'booked':\n        return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'completed':\n        return 'bg-green-100 text-green-800 border-green-200';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800 border-red-200';\n      case 'no-show':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'booked':\n        return 'Booked';\n      case 'completed':\n        return 'Completed';\n      case 'cancelled':\n        return 'Cancelled';\n      case 'no-show':\n        return 'No Show';\n      default:\n        return status;\n    }\n  };\n\n  const isUpcoming = (date: string) => {\n    return new Date(date) > new Date();\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout allowedRoles={['student']}>\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <>\n      <Head>\n        <title>My Bookings - Verbfy</title>\n        <meta name=\"description\" content=\"View and manage your lesson bookings\" />\n      </Head>\n\n      <DashboardLayout allowedRoles={['student']}>\n        <div className=\"space-y-6\">\n          {/* Page Header */}\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">My Bookings</h1>\n                <p className=\"text-gray-600\">\n                  View and manage your upcoming and past lesson bookings.\n                </p>\n              </div>\n              <button\n                onClick={() => router.push('/student/reserve')}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Book New Lesson\n              </button>\n            </div>\n          </div>\n\n          {/* Bookings List */}\n          {bookings.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow-sm p-8 text-center\">\n              <div className=\"text-gray-500 text-lg mb-2\">No bookings found</div>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                You haven't booked any lessons yet.\n              </p>\n              <button\n                onClick={() => router.push('/student/reserve')}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Book Your First Lesson\n              </button>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n              <div className=\"px-6 py-4 border-b border-gray-200\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  Your Bookings ({bookings.length})\n                </h2>\n              </div>\n              <div className=\"divide-y divide-gray-200\">\n                {bookings.map((booking) => (\n                  <div key={booking.id} className=\"p-6\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-3 mb-2\">\n                          <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                            <span className=\"text-white font-semibold text-sm\">\n                              {booking.teacher.name.charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                          <div>\n                            <h3 className=\"text-lg font-semibold text-gray-900\">\n                              {booking.teacher.name}\n                            </h3>\n                            <p className=\"text-sm text-gray-600\">{booking.teacher.email}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4\">\n                          <div>\n                            <p className=\"text-sm text-gray-500\">Date</p>\n                            <p className=\"font-medium text-gray-900\">\n                              {new Date(booking.date).toLocaleDateString('en-US', {\n                                weekday: 'long',\n                                year: 'numeric',\n                                month: 'long',\n                                day: 'numeric'\n                              })}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-sm text-gray-500\">Time</p>\n                            <p className=\"font-medium text-gray-900\">\n                              {formatTime(booking.startTime)} - {formatTime(booking.endTime)}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"mt-4 flex items-center space-x-4\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${getStatusColor(booking.status)}`}>\n                            {getStatusText(booking.status)}\n                          </span>\n                          {isUpcoming(booking.date) && booking.status === 'booked' && (\n                            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200\">\n                              Upcoming\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      <div className=\"ml-6 flex flex-col space-y-2\">\n                        {booking.status === 'booked' && isUpcoming(booking.date) && (\n                          <button\n                            onClick={() => handleCancelBooking(booking.id)}\n                            disabled={cancellingId === booking.id}\n                            className={`\n                              px-3 py-1.5 text-sm font-medium rounded-md transition-colors\n                              ${cancellingId === booking.id\n                                ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                                : 'bg-red-100 text-red-700 hover:bg-red-200 border border-red-300'\n                              }\n                            `}\n                          >\n                            {cancellingId === booking.id ? 'Cancelling...' : 'Cancel'}\n                          </button>\n                        )}\n                        <button\n                          onClick={() => router.push(`/talk/${booking.id}`)}\n                          className=\"px-3 py-1.5 text-sm font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 border border-blue-300 rounded-md transition-colors\"\n                        >\n                          Join Lesson\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Help Section */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n            <h3 className=\"text-lg font-medium text-blue-800 mb-2\">Need Help?</h3>\n            <div className=\"text-sm text-blue-700 space-y-2\">\n              <p>• <strong>Upcoming lessons:</strong> You can cancel these up to 24 hours before the lesson</p>\n              <p>• <strong>Completed lessons:</strong> These are past lessons that have been conducted</p>\n              <p>• <strong>Cancelled lessons:</strong> These were cancelled by you or the teacher</p>\n              <p>• <strong>Questions?</strong> Contact support if you need assistance with your bookings</p>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    </>\n  );\n};\n\nexport default StudentBookingsPage; ","// Toast implementation that integrates with the existing Toast component system\nimport { toast } from '../components/common/Toast';\n\nexport const toastError = (message: string) => {\n  toast.error(message);\n};\n\nexport const toastSuccess = (message: string) => {\n  toast.success(message);\n};\n\nexport const toastWarning = (message: string) => {\n  toast.warning(message);\n};\n\nexport const toastInfo = (message: string) => {\n  toast.info(message);\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","user","useAuthContext","router","useRouter","bookings","setBookings","useState","loading","setLoading","cancellingId","setCancellingId","useEffect","role","replace","loadBookings","response","api","get","data","error","console","toastError","handleCancelBooking","bookingId","confirm","delete","concat","toastSuccess","errorMessage","message","formatTime","hours","minutes","time","split","hour","parseInt","ampm","getStatusColor","status","getStatusText","isUpcoming","Date","date","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","allowedRoles","div","className","jsxs","Fragment","Head","title","meta","name","content","h1","p","button","onClick","length","h2","map","span","booking","teacher","charAt","toUpperCase","h3","email","toLocaleDateString","weekday","year","month","day","startTime","endTime","id","disabled","strong","toast","success"],"sourceRoot":""}