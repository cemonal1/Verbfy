(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5628],{73898:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/student/bookings",function(){return t(70835)}])},70835:function(e,s,t){"use strict";t.r(s);var n=t(85893),r=t(67294),l=t(9008),a=t.n(l),o=t(11163),d=t(10571),i=t(36197),c=t(32798),u=t(6642);s.default=()=>{let{user:e}=(0,i.Eu)(),s=(0,o.useRouter)(),[t,l]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[h,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(e&&"student"!==e.role){s.replace("/dashboard");return}g()},[e,s]);let g=async()=>{m(!0);try{let e=await c.ZP.get("/api/reservations/student");l(e.data.bookings)}catch(e){(0,u._N)("Failed to load your bookings")}finally{m(!1)}},p=async e=>{if(confirm("Are you sure you want to cancel this lesson?")){b(e);try{await c.ZP.delete("/api/reservations/".concat(e)),(0,u.x9)("Booking cancelled successfully"),await g()}catch(n){var s,t;let e=(null===(t=n.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to cancel booking";(0,u._N)(e)}finally{b(null)}}},j=e=>{let[s,t]=e.split(":"),n=parseInt(s);return"".concat(n%12||12,":").concat(t," ").concat(n>=12?"PM":"AM")},y=e=>{switch(e){case"booked":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"no-show":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=e=>{switch(e){case"booked":return"Booked";case"completed":return"Completed";case"cancelled":return"Cancelled";case"no-show":return"No Show";default:return e}},N=e=>new Date(e)>new Date;return x?(0,n.jsx)(d.Z,{allowedRoles:["student"],children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"My Bookings - Verbfy"}),(0,n.jsx)("meta",{name:"description",content:"View and manage your lesson bookings"})]}),(0,n.jsx)(d.Z,{allowedRoles:["student"],children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Bookings"}),(0,n.jsx)("p",{className:"text-gray-600",children:"View and manage your upcoming and past lesson bookings."})]}),(0,n.jsx)("button",{onClick:()=>s.push("/student/reserve"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Book New Lesson"})]})}),0===t.length?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[(0,n.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:"No bookings found"}),(0,n.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"You haven't booked any lessons yet."}),(0,n.jsx)("button",{onClick:()=>s.push("/student/reserve"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Book Your First Lesson"})]}):(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Your Bookings (",t.length,")"]})}),(0,n.jsx)("div",{className:"divide-y divide-gray-200",children:t.map(e=>(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-white font-semibold text-sm",children:e.teacher.name.charAt(0).toUpperCase()})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.teacher.name}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.teacher.email})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Date"}),(0,n.jsx)("p",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Time"}),(0,n.jsxs)("p",{className:"font-medium text-gray-900",children:[j(e.startTime)," - ",j(e.endTime)]})]})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(y(e.status)),children:f(e.status)}),N(e.date)&&"booked"===e.status&&(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"Upcoming"})]})]}),(0,n.jsxs)("div",{className:"ml-6 flex flex-col space-y-2",children:["booked"===e.status&&N(e.date)&&(0,n.jsx)("button",{onClick:()=>p(e.id),disabled:h===e.id,className:"\n                              px-3 py-1.5 text-sm font-medium rounded-md transition-colors\n                              ".concat(h===e.id?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-100 text-red-700 hover:bg-red-200 border border-red-300","\n                            "),children:h===e.id?"Cancelling...":"Cancel"}),(0,n.jsx)("button",{onClick:()=>s.push("/talk/".concat(e.id)),className:"px-3 py-1.5 text-sm font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 border border-blue-300 rounded-md transition-colors",children:"Join Lesson"})]})]})},e.id))})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Need Help?"}),(0,n.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Upcoming lessons:"})," You can cancel these up to 24 hours before the lesson"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Completed lessons:"})," These are past lessons that have been conducted"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Cancelled lessons:"})," These were cancelled by you or the teacher"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Questions?"})," Contact support if you need assistance with your bookings"]})]})]})]})})]})}},6642:function(e,s,t){"use strict";t.d(s,{_N:function(){return r},x9:function(){return l}});var n=t(56158);let r=e=>{n.Am.error(e)},l=e=>{n.Am.success(e)}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,5522,1493,2888,5514,179],function(){return e(e.s=73898)}),_N_E=e.O()}]);