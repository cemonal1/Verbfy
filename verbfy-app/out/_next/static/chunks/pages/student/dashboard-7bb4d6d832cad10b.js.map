{"version":3,"file":"static/chunks/pages/student/dashboard-7bb4d6d832cad10b.js","mappings":"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","sources":["webpack://_N_E/?e0a9","webpack://_N_E/./pages/student/dashboard.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/student/dashboard\",\n      function () {\n        return require(\"private-next-pages/student/dashboard.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/student/dashboard\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { useAuthContext } from '@/context/AuthContext';\r\nimport api from '@/lib/api';\r\nimport Link from 'next/link';\r\n\r\ninterface Booking {\r\n  id: string;\r\n  teacher: {\r\n    name: string;\r\n    email: string;\r\n  };\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  lessonType: string;\r\n  lessonLevel: string;\r\n  lessonDuration: number;\r\n  status: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface UpcomingReservation {\r\n  id: string;\r\n  teacher: {\r\n    name: string;\r\n    email: string;\r\n  };\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  lessonType: string;\r\n  lessonLevel: string;\r\n  lessonDuration: number;\r\n  status: string;\r\n}\r\n\r\nfunction StudentDashboardPage() {\r\n  const { user } = useAuthContext();\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [upcomingReservations, setUpcomingReservations] = useState<UpcomingReservation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Calculate duration between two time strings\r\n  const calculateDuration = (startTime: string, endTime: string) => {\r\n    const [startHour, startMin] = startTime.split(':').map(Number);\r\n    const [endHour, endMin] = endTime.split(':').map(Number);\r\n    const startMinutes = startHour * 60 + startMin;\r\n    const endMinutes = endHour * 60 + endMin;\r\n    return endMinutes - startMinutes;\r\n  };\r\n\r\n  // Get time ago helper function\r\n  const getTimeAgo = (date: Date) => {\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n    \r\n    if (diffInSeconds < 60) return 'Just now';\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;\r\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\r\n    return `${Math.floor(diffInSeconds / 86400)} days ago`;\r\n  };\r\n\r\n  // Fetch student data\r\n  useEffect(() => {\r\n    const fetchStudentData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch bookings and upcoming reservations in parallel\r\n        const [bookingsResponse, upcomingResponse] = await Promise.all([\r\n          api.get('/api/reservations/student'),\r\n          api.get('/api/reservations/upcoming')\r\n        ]);\r\n\r\n        setBookings(bookingsResponse.data.bookings || []);\r\n        setUpcomingReservations(upcomingResponse.data.upcomingReservations || []);\r\n        \r\n      } catch (err: any) {\r\n        console.error('Error fetching student data:', err);\r\n        setError(err.response?.data?.message || 'Failed to load dashboard data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchStudentData();\r\n    }\r\n  }, [user]);\r\n\r\n  // Calculate stats from real data\r\n  const completedLessons = bookings.filter(b => b.status === 'completed').length;\r\n  const upcomingLessons = upcomingReservations.length;\r\n  const totalBookings = bookings.length;\r\n\r\n  // Format upcoming lessons for display\r\n  const formattedUpcomingLessons = upcomingReservations.map(reservation => {\r\n    // Ensure date is properly formatted\r\n    const lessonDate = new Date(reservation.date);\r\n    const formattedDate = isNaN(lessonDate.getTime()) \r\n      ? 'Date not available' \r\n      : lessonDate.toLocaleDateString('en-US', { \r\n          weekday: 'long', \r\n          year: 'numeric', \r\n          month: 'long', \r\n          day: 'numeric' \r\n        });\r\n\r\n    // Ensure lesson type and level are properly displayed\r\n    const lessonType = reservation.lessonType || 'General Lesson';\r\n    const lessonLevel = reservation.lessonLevel || 'Intermediate';\r\n    \r\n    return {\r\n      reservationId: reservation.id,\r\n      teacher: reservation.teacher.name,\r\n      topic: `${lessonType} - ${lessonLevel}`,\r\n      date: formattedDate,\r\n      time: `${reservation.startTime} - ${reservation.endTime}`,\r\n      duration: `${reservation.lessonDuration || calculateDuration(reservation.startTime, reservation.endTime)} min`,\r\n      status: reservation.status,\r\n      lessonType: lessonType,\r\n      lessonLevel: lessonLevel\r\n    };\r\n  });\r\n\r\n  // Progress data for learning progress section\r\n  const progressData = [\r\n    { label: 'Grammar', progress: 75, icon: 'book', color: 'blue' },\r\n    { label: 'Vocabulary', progress: 60, icon: 'language', color: 'green' },\r\n    { label: 'Speaking', progress: 85, icon: 'microphone', color: 'purple' },\r\n    { label: 'Listening', progress: 70, icon: 'headphones', color: 'orange' }\r\n  ];\r\n\r\n  const stats = [\r\n    {\r\n      title: 'Completed Lessons',\r\n      value: `${completedLessons}+`,\r\n      icon: 'fas fa-graduation-cap',\r\n      color: 'blue',\r\n      trend: 'up',\r\n      trendValue: '+12%'\r\n    },\r\n    {\r\n      title: 'Upcoming Lessons',\r\n      value: `${upcomingLessons}`,\r\n      icon: 'fas fa-clock',\r\n      color: 'green',\r\n      trend: 'up',\r\n      trendValue: '+2'\r\n    },\r\n    {\r\n      title: 'Total Bookings',\r\n      value: `${totalBookings}`,\r\n      icon: 'fas fa-calendar-check',\r\n      color: 'purple',\r\n      trend: 'up',\r\n      trendValue: '+5%'\r\n    },\r\n    {\r\n      title: 'Active Teachers',\r\n      value: `${new Set(bookings.map(b => b.teacher.email)).size}`,\r\n      icon: 'fas fa-chalkboard-teacher',\r\n      color: 'orange',\r\n      trend: 'up',\r\n      trendValue: '+1'\r\n    }\r\n  ];\r\n\r\n  // Recent activities based on real data\r\n  const recentActivities = bookings.slice(0, 4).map(booking => {\r\n    const bookingDate = new Date(booking.createdAt);\r\n    const timeAgo = getTimeAgo(bookingDate);\r\n    \r\n    return {\r\n      type: 'reservation',\r\n      title: `Booked lesson with ${booking.teacher.name}`,\r\n      time: timeAgo,\r\n      status: booking.status,\r\n      color: booking.status === 'completed' ? 'blue' : \r\n             booking.status === 'booked' ? 'green' : 'orange',\r\n      icon: booking.status === 'completed' ? 'graduation-cap' : \r\n            booking.status === 'booked' ? 'calendar-plus' : 'clock',\r\n      description: `Lesson scheduled for ${new Date(booking.date).toLocaleDateString()} at ${booking.startTime}`\r\n    };\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout allowedRoles={['student']}>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <DashboardLayout allowedRoles={['student']}>\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <p className=\"text-red-800\">{error}</p>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout allowedRoles={['student']}>\r\n      <div className=\"space-y-4 sm:space-y-6\">\r\n        {/* Welcome Section */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n            <div className=\"flex-1\">\r\n               <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">\r\n                Hi, {user?.name || 'Student'} 👋\r\n              </h1>\r\n               {user && (user as any).approvalStatus === 'pending' && (\r\n                 <p className=\"text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-md px-3 py-2 mb-3 text-sm\">Your teacher application is pending approval. You can continue using student features meanwhile.</p>\r\n               )}\r\n              <p className=\"text-base sm:text-lg font-semibold text-gray-700 mb-2\">\r\n                Ready to improve your English today?\r\n              </p>\r\n              <p className=\"text-gray-600 mb-4 text-sm sm:text-base\">\r\n                Track your progress, book lessons, and access learning materials.\r\n              </p>\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                <Link href=\"/student/reserve\" className=\"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-sm sm:text-base text-center\">\r\n                  Book a Lesson\r\n                </Link>\r\n                <Link href=\"/student/bookings\" className=\"bg-white border-2 border-blue-500 text-blue-600 px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-semibold hover:bg-blue-50 transition-all duration-200 transform hover:scale-105 text-center text-sm sm:text-base\">\r\n                  View All Bookings\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div className=\"hidden lg:block lg:ml-8\">\r\n              <div className=\"w-24 sm:w-32 h-24 sm:h-32 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center animate-pulse\">\r\n                <i className=\"fas fa-graduation-cap text-2xl sm:text-4xl text-blue-600\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Statistics Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n          {stats.map((stat, index) => (\r\n            <div key={index} className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\r\n                  <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{stat.value}</p>\r\n                </div>\r\n                <div className={`w-12 h-12 rounded-lg flex items-center justify-center bg-${stat.color}-100`}>\r\n                  <i className={`${stat.icon} text-xl text-${stat.color}-600`}></i>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 flex items-center\">\r\n                <span className={`text-sm font-medium text-${stat.color}-600 flex items-center`}>\r\n                  <i className={`fas fa-arrow-${stat.trend} mr-1`}></i>\r\n                  {stat.trendValue}\r\n                </span>\r\n                <span className=\"text-sm text-gray-500 ml-2\">from last month</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Upcoming Lessons */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <div className=\"flex items-center justify-between mb-4 sm:mb-6\">\r\n            <h2 className=\"text-lg sm:text-xl font-bold text-gray-900\">Upcoming Lessons</h2>\r\n            <Link href=\"/student/reservations\" className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\">\r\n              View All →\r\n            </Link>\r\n          </div>\r\n          \r\n          {formattedUpcomingLessons.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {formattedUpcomingLessons.map((lesson, index) => {\r\n                // Find the original reservation to get time data\r\n                const originalReservation = upcomingReservations.find(r => r.id === lesson.reservationId);\r\n                let canJoin = false;\r\n                let statusMessage = '';\r\n                \r\n                if (originalReservation) {\r\n                  const lessonDate = new Date(originalReservation.date);\r\n                  const now = new Date();\r\n                  \r\n                  // Calculate lesson start and end times\r\n                  const [startHours, startMinutes] = originalReservation.startTime.split(':');\r\n                  const lessonStartTime = new Date(lessonDate);\r\n                  lessonStartTime.setHours(parseInt(startHours), parseInt(startMinutes), 0, 0);\r\n                  \r\n                  const [endHours, endMinutes] = originalReservation.endTime.split(':');\r\n                  const lessonEndTime = new Date(lessonDate);\r\n                  lessonEndTime.setHours(parseInt(endHours), parseInt(endMinutes), 0, 0);\r\n                  \r\n                  // Students can only join within time window before lesson starts\r\n                  const timeBeforeStart = (lessonStartTime.getTime() - now.getTime()) / (1000 * 60); // minutes\r\n                  const timeWindow = process.env.NODE_ENV === 'production' ? 15 : 120; // 15 min in prod, 2 hours in dev\r\n                  \r\n                  canJoin = lesson.status === 'booked' && \r\n                           now <= lessonEndTime && // Lesson hasn't ended\r\n                           timeBeforeStart <= timeWindow; // Within time window before start\r\n                  \r\n                  if (!canJoin) {\r\n                    if (now > lessonEndTime) {\r\n                      statusMessage = 'Time expired';\r\n                    } else if (timeBeforeStart > timeWindow) {\r\n                      statusMessage = 'Not yet available';\r\n                    } else {\r\n                      statusMessage = 'Not available';\r\n                    }\r\n                  }\r\n                }\r\n                \r\n                return (\r\n                  <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                        <i className=\"fas fa-chalkboard-teacher text-blue-600\"></i>\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{lesson.teacher}</h3>\r\n                        <p className=\"text-sm text-gray-600\">{lesson.topic}</p>\r\n                        <p className=\"text-sm text-gray-500\">{lesson.date}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                        {lesson.status}\r\n                      </span>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">{lesson.duration}</p>\r\n                      {lesson.status === 'booked' && canJoin && (\r\n                        <Link \r\n                          href={`/talk/${lesson.reservationId}`}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 mt-2\"\r\n                        >\r\n                          Join Lesson\r\n                        </Link>\r\n                      )}\r\n                      {lesson.status === 'booked' && !canJoin && (\r\n                        <span className=\"text-xs text-gray-500 mt-2 block\">\r\n                          {statusMessage}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <i className=\"fas fa-calendar-times text-4xl text-gray-300 mb-4\"></i>\r\n              <p className=\"text-gray-500 mb-4\">No upcoming lessons scheduled</p>\r\n              <Link href=\"/student/reserve\" className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\">\r\n                Book Your First Lesson\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Learning Progress */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <h2 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-4 sm:mb-6\">Learning Progress</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n            {progressData.map((item, index) => (\r\n              <div key={index} className=\"text-center\">\r\n                <div className=\"w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center\">\r\n                  <i className={`fas fa-${item.icon} text-xl text-${item.color}-600`}></i>\r\n                </div>\r\n                <h3 className=\"font-semibold text-gray-900 mb-2\">{item.label}</h3>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\r\n                  <div \r\n                    className={`bg-${item.color}-600 h-2 rounded-full transition-all duration-300`}\r\n                    style={{ width: `${item.progress}%` }}\r\n                  ></div>\r\n                </div>\r\n                <p className=\"text-sm text-gray-600\">{item.progress}%</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Activities */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <h2 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-4 sm:mb-6\">Recent Activities</h2>\r\n          <div className=\"space-y-4\">\r\n            {recentActivities.map((activity, index) => (\r\n              <div key={index} className=\"flex items-start space-x-4\">\r\n                <div className={`w-10 h-10 rounded-full flex items-center justify-center bg-${activity.color}-100`}>\r\n                  <i className={`fas fa-${activity.icon} text-${activity.color}-600`}></i>\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"font-semibold text-gray-900\">{activity.title}</h3>\r\n                  <p className=\"text-sm text-gray-600\">{activity.description}</p>\r\n                  <p className=\"text-xs text-gray-500 mt-1\">{activity.time}</p>\r\n                </div>\r\n                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-${activity.color}-100 text-${activity.color}-800`}>\r\n                  {activity.status}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default StudentDashboardPage; "],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","user","useAuthContext","bookings","setBookings","useState","upcomingReservations","setUpcomingReservations","loading","setLoading","error","setError","calculateDuration","startTime","endTime","startHour","startMin","split","map","Number","endHour","endMin","endMinutes","getTimeAgo","diffInSeconds","Math","floor","now","Date","getTime","date","concat","useEffect","fetchStudentData","bookingsResponse","upcomingResponse","Promise","all","api","get","data","err","console","response","message","completedLessons","filter","b","status","length","upcomingLessons","totalBookings","formattedUpcomingLessons","reservation","lessonDate","formattedDate","isNaN","toLocaleDateString","weekday","year","month","day","lessonType","lessonLevel","reservationId","id","teacher","name","topic","time","duration","lessonDuration","stats","title","value","icon","color","trend","trendValue","Set","email","size","recentActivities","slice","booking","timeAgo","createdAt","type","description","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","allowedRoles","div","className","p","jsxs","h1","approvalStatus","Link","href","i","stat","index","span","h2","lesson","originalReservation","find","r","canJoin","statusMessage","startHours","startMinutes","lessonStartTime","setHours","parseInt","endHours","lessonEndTime","timeBeforeStart","timeWindow","h3","progressData","label","progress","item","style","width","activity"],"sourceRoot":""}