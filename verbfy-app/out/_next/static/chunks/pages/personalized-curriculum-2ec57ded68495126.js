(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1401],{35705:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/personalized-curriculum",function(){return r(27178)}])},27178:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var t=r(85893),l=r(67294),i=r(11163),a=r(9008),n=r.n(a),c=r(11088),d=r(32798),o=r(36197),m=r(56158);function u(){let e=(0,i.useRouter)(),{user:s}=(0,o.Eu)(),{success:r,error:a}=(0,m.pm)(),[u,x]=(0,l.useState)(null),[h,g]=(0,l.useState)(!0),[p,b]=(0,l.useState)("overview");(0,l.useEffect)(()=>{v()},[]);let v=async()=>{try{g(!0);let e=await d.kD.getCurriculum();x(e)}catch(e){console.error("Error loading curriculum:",e),await j()}finally{g(!1)}},j=async()=>{try{let e=await d.kD.createCurriculum({currentCEFRLevel:(null==s?void 0:s.cefrLevel)||"A1",targetCEFRLevel:"B2",learningGoals:[{skill:"grammar",currentLevel:0,targetLevel:80,priority:"high"},{skill:"reading",currentLevel:0,targetLevel:75,priority:"medium"},{skill:"writing",currentLevel:0,targetLevel:70,priority:"medium"},{skill:"speaking",currentLevel:0,targetLevel:75,priority:"high"},{skill:"listening",currentLevel:0,targetLevel:80,priority:"medium"},{skill:"vocabulary",currentLevel:0,targetLevel:85,priority:"high"}]});x(e.curriculum),r("Personalized curriculum created!")}catch(e){a("Failed to create curriculum"),console.error("Error creating curriculum:",e)}},y=async e=>{try{await d.kD.completeRecommendation(e),r("Recommendation completed!"),v()}catch(e){a("Failed to complete recommendation"),console.error("Error completing recommendation:",e)}},N=e=>({grammar:"\uD83D\uDCDD",reading:"\uD83D\uDCD6",writing:"✍️",speaking:"\uD83C\uDFA4",listening:"\uD83C\uDFA7",vocabulary:"\uD83D\uDCDA"})[e]||"\uD83D\uDCDA",f=e=>e>=80?"text-green-600":e>=60?"text-blue-600":e>=40?"text-yellow-600":"text-red-600",w=e=>e>=80?"bg-green-100":e>=60?"bg-blue-100":e>=40?"bg-yellow-100":"bg-red-100";return h?(0,t.jsx)(c.Z,{allowedRoles:["student"],children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):u?(0,t.jsxs)(c.Z,{allowedRoles:["student"],children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"My Curriculum - Verbfy"})}),(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Learning Path"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Your personalized curriculum designed to help you reach ",u.targetCEFRLevel," level"]})]}),(0,t.jsx)("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[u.progress.overallProgress,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Overall Progress"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:u.progress.lessonsCompleted}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Lessons Completed"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:u.progress.testsCompleted}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Tests Completed"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[u.currentCEFRLevel," → ",u.targetCEFRLevel]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Target Level"})]})]})}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"progress",label:"Progress",icon:"\uD83D\uDCC8"},{id:"recommendations",label:"Recommendations",icon:"\uD83D\uDCA1"}].map(e=>(0,t.jsxs)("button",{onClick:()=>b(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(p===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id))})})}),"overview"===p&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Learning Goals"}),(0,t.jsx)("div",{className:"space-y-4",children:u.learningGoals.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-3",children:N(e.skill)}),(0,t.jsx)("span",{className:"capitalize font-medium text-gray-900",children:e.skill})]}),(0,t.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.priority," priority"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,t.jsxs)("span",{children:["Current: ",e.currentLevel,"%"]}),(0,t.jsxs)("span",{children:["Target: ",e.targetLevel,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full ".concat(w(e.currentLevel)),style:{width:"".concat(Math.min(e.currentLevel,100),"%")}})})]},s))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Current Phase"}),u.curriculumPath[u.progress.currentPhase]&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:["Phase ",u.progress.currentPhase+1,": ",u.curriculumPath[u.progress.currentPhase].title]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"Complete this phase to advance to the next level"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"Lessons"}),(0,t.jsxs)("span",{children:[u.curriculumPath[u.progress.currentPhase].lessons.filter(e=>e.isCompleted).length,"/",u.curriculumPath[u.progress.currentPhase].lessons.length]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(u.curriculumPath[u.progress.currentPhase].lessons.filter(e=>e.isCompleted).length/u.curriculumPath[u.progress.currentPhase].lessons.length*100,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{children:"Tests"}),(0,t.jsxs)("span",{children:[u.curriculumPath[u.progress.currentPhase].tests.filter(e=>e.isCompleted).length,"/",u.curriculumPath[u.progress.currentPhase].tests.length]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(u.curriculumPath[u.progress.currentPhase].tests.filter(e=>e.isCompleted).length/u.curriculumPath[u.progress.currentPhase].tests.length*100,"%")}})})]})]})]})]})]}),"progress"===p&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Detailed Progress"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.learningGoals.map((e,s)=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2",children:N(e.skill)}),(0,t.jsx)("span",{className:"capitalize font-medium text-gray-900",children:e.skill})]}),(0,t.jsxs)("span",{className:"font-semibold ".concat(f(e.currentLevel)),children:[e.currentLevel,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-3",children:(0,t.jsx)("div",{className:"h-3 rounded-full ".concat(w(e.currentLevel)),style:{width:"".concat(Math.min(e.currentLevel,100),"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Target: ",e.targetLevel,"% • Gap: ",e.targetLevel-e.currentLevel,"%"]})]},s))})]}),"recommendations"===p&&(0,t.jsxs)("div",{className:"space-y-6",children:[u.recommendations.map((e,s)=>(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsxs)("span",{className:"mr-2",children:["lesson"===e.type&&"\uD83D\uDCDD","test"===e.type&&"\uD83E\uDDEA","practice"===e.type&&"\uD83D\uDCAA","review"===e.type&&"\uD83D\uDD04"]}),(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,t.jsxs)("span",{className:"ml-3 px-2 py-1 text-xs font-medium rounded-full ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.priority," priority"]})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-3",children:e.reason}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["Type: ",e.type]}),(0,t.jsx)("span",{children:"Estimated time: 15-30 min"})]})]}),(0,t.jsx)("button",{onClick:()=>y(e._id),className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Start"})]})},s)),0===u.recommendations.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCA1"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recommendations yet"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Complete some lessons to get personalized recommendations."})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[(0,t.jsx)("button",{onClick:()=>e.push("/verbfy-lessons"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Browse Lessons"}),(0,t.jsx)("button",{onClick:()=>e.push("/cefr-tests"),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Take a Test"}),(0,t.jsx)("button",{onClick:()=>e.push("/personalized-curriculum/progress"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"View Detailed Progress"})]})]})]}):(0,t.jsx)(c.Z,{allowedRoles:["student"],children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No curriculum found"}),(0,t.jsx)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create My Curriculum"})]})})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=35705)}),_N_E=e.O()}]);