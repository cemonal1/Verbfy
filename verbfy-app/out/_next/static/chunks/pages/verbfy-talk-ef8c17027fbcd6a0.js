(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1763],{54053:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verbfy-talk",function(){return a(55820)}])},55820:function(e,s,a){"use strict";a.r(s);var t=a(85893),l=a(67294),r=a(11163),i=a(11088),n=a(32798),o=a(72509),c=a(64964),d=a(32201),m=a(93681),x=a(68606),u=a(96019),p=a(35892);s.default=function(){let e=(0,r.useRouter)(),[s,a]=(0,l.useState)([]),[g,h]=(0,l.useState)(!0),[b,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(null),[y,N]=(0,l.useState)({level:"All",isPrivate:!1,page:1,limit:10}),[w,k]=(0,l.useState)({page:1,limit:10,total:0,pages:0}),[P,C]=(0,l.useState)({name:"",description:"",isPrivate:!1,password:"",topic:"",level:"Mixed",maxParticipants:5}),[A,_]=(0,l.useState)("");(0,l.useEffect)(()=>{R()},[y]);let R=async()=>{try{h(!0);let e=await n.bl.getRooms(y);a(e.rooms),k(e.pagination)}catch(e){o.Am.error("Failed to load rooms")}finally{h(!1)}},Z=async s=>{s.preventDefault();try{let s={...P};s.isPrivate||delete s.password;let a=await n.bl.createRoom(s);o.Am.success("Room created successfully!"),v(!1),C({name:"",description:"",isPrivate:!1,password:"",topic:"",level:"Mixed",maxParticipants:5}),R(),e.push("/verbfy-talk/".concat(a.room._id))}catch(e){var a,t;o.Am.error((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to create room")}},S=async(e,s)=>{s?f({roomId:e,isPrivate:s}):await B(e)},B=async(s,a)=>{try{await n.bl.joinRoom(s,a?{roomId:s,password:a}:void 0),o.Am.success("Joined room successfully!"),f(null),_(""),e.push("/verbfy-talk/".concat(s))}catch(e){var t,l;o.Am.error((null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.message)||"Failed to join room")}},E=async()=>{j&&await B(j.roomId,A)},I=e=>{switch(e){case"Beginner":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-green-500"});case"Intermediate":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-yellow-500"});case"Advanced":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-red-500"});default:return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-blue-500"})}},M=e=>{switch(e){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}};return(0,t.jsx)(i.Z,{allowedRoles:["student","teacher"],children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(d.Z,{className:"w-8 h-8 text-blue-600"}),"VerbfyTalk"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Join conversation rooms with up to 5 people"})]}),(0,t.jsxs)("button",{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5"}),"Create Room"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("select",{value:y.level,onChange:e=>N({...y,level:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"All",children:"All Levels"}),(0,t.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"Advanced",children:"Advanced"}),(0,t.jsx)("option",{value:"Mixed",children:"Mixed"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:y.isPrivate,onChange:e=>N({...y,isPrivate:e.target.checked}),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Show private rooms"})]})]})}),g?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:e.name}),e.isPrivate?(0,t.jsx)(x.Z,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}):(0,t.jsx)(u.Z,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),e.topic&&(0,t.jsxs)("div",{className:"text-sm text-blue-600 mb-3",children:["Topic: ",e.topic]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[I(e.level),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(M(e.level)),children:e.level})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.currentParticipants||0,"/",e.maxParticipants]})]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mb-4",children:["Created by ",e.createdBy]}),(0,t.jsx)("button",{onClick:()=>S(e._id,e.isPrivate),disabled:(e.currentParticipants||0)>=e.maxParticipants,className:"w-full py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat((e.currentParticipants||0)>=e.maxParticipants?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:(e.currentParticipants||0)>=e.maxParticipants?"Room Full":"Join Room"})]},e._id))}),!g&&0===s.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(d.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No rooms available"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Be the first to create a conversation room!"})]}),w.pages>1&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsx)("div",{className:"flex gap-2",children:[...Array(w.pages)].map((e,s)=>(0,t.jsx)("button",{onClick:()=>N({...y,page:s+1}),className:"px-3 py-2 rounded-md text-sm ".concat(w.page===s+1?"bg-blue-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50"),children:s+1},s))})}),b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create VerbfyTalk Room"}),(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Name"}),(0,t.jsx)("input",{type:"text",value:P.name,onChange:e=>C({...P,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:P.description,onChange:e=>C({...P,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic (Optional)"}),(0,t.jsx)("input",{type:"text",value:P.topic,onChange:e=>C({...P,topic:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Travel, Business, Daily Life"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,t.jsxs)("select",{value:P.level,onChange:e=>C({...P,level:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Mixed",children:"Mixed"}),(0,t.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Participants"}),(0,t.jsxs)("select",{value:P.maxParticipants,onChange:e=>C({...P,maxParticipants:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:2,children:"2 people"}),(0,t.jsx)("option",{value:3,children:"3 people"}),(0,t.jsx)("option",{value:4,children:"4 people"}),(0,t.jsx)("option",{value:5,children:"5 people"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:P.isPrivate,onChange:e=>C({...P,isPrivate:e.target.checked}),className:"rounded"}),(0,t.jsx)("label",{className:"text-sm text-gray-700",children:"Private room"})]}),P.isPrivate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:P.password,onChange:e=>C({...P,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Create Room"}),(0,t.jsx)("button",{type:"button",onClick:()=>v(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors",children:"Cancel"})]})]})]})})}),j&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Room Password"}),(0,t.jsx)("input",{type:"password",placeholder:"Enter password",value:A,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:E,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Join Room"}),(0,t.jsx)("button",{onClick:()=>f(null),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors",children:"Cancel"})]})]})})})]})})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=54053)}),_N_E=e.O()}]);
//# sourceMappingURL=verbfy-talk-ef8c17027fbcd6a0.js.map