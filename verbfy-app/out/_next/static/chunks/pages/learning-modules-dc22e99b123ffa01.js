(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9445],{76109:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/learning-modules",function(){return l(81150)}])},81150:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return x}});var t=l(85893),n=l(67294),r=l(9008),a=l.n(r),i=l(11163),d=l(32798),c=l(36197);let o=e=>{let{userRole:s}=e,l=(0,i.useRouter)(),{user:r}=(0,c.Eu)(),[a,o]=(0,n.useState)([]),[x,m]=(0,n.useState)(!0),[h,b]=(0,n.useState)({page:1,limit:10}),[p,g]=(0,n.useState)(null),[v,j]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{N()},[h]);let N=async()=>{try{m(!0);let e=await d.J0.getLessons(h);o(e.lessons)}catch(e){console.error("Error fetching lessons:",e)}finally{m(!1)}},w=async e=>{try{await d.J0.createLesson(e),j(!1),N()}catch(e){console.error("Error creating lesson:",e)}},C=e=>{g(e),y(!0)},D=async e=>{if(confirm("Are you sure you want to delete this lesson?"))try{await d.J0.deleteLesson(e),N()}catch(e){console.error("Error deleting lesson:",e)}},L=e=>({VerbfyGrammar:"\uD83D\uDCDD",VerbfyRead:"\uD83D\uDCD6",VerbfyWrite:"✍️",VerbfySpeak:"\uD83D\uDDE3️",VerbfyListen:"\uD83D\uDC42",VerbfyVocab:"\uD83D\uDCDA"})[e]||"\uD83D\uDCCA",V=e=>({A1:"bg-red-100 text-red-800",A2:"bg-orange-100 text-orange-800",B1:"bg-yellow-100 text-yellow-800",B2:"bg-green-100 text-green-800",C1:"bg-blue-100 text-blue-800",C2:"bg-purple-100 text-purple-800"})[e]||"bg-gray-100 text-gray-800",A=e=>({Beginner:"bg-blue-100 text-blue-800",Intermediate:"bg-yellow-100 text-yellow-800",Advanced:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading modules..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Module Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Create, edit, and manage learning modules"})]}),(0,t.jsx)("div",{className:"flex space-x-3",children:(0,t.jsx)("button",{onClick:()=>{j(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create Lesson"})})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("select",{value:h.lessonType||"",onChange:e=>b({...h,lessonType:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"VerbfyGrammar",children:"Grammar"}),(0,t.jsx)("option",{value:"VerbfyRead",children:"Reading"}),(0,t.jsx)("option",{value:"VerbfyWrite",children:"Writing"}),(0,t.jsx)("option",{value:"VerbfySpeak",children:"Speaking"}),(0,t.jsx)("option",{value:"VerbfyListen",children:"Listening"}),(0,t.jsx)("option",{value:"VerbfyVocab",children:"Vocabulary"})]}),(0,t.jsxs)("select",{value:h.cefrLevel||"",onChange:e=>b({...h,cefrLevel:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Levels"}),(0,t.jsx)("option",{value:"A1",children:"A1 Level"}),(0,t.jsx)("option",{value:"A2",children:"A2 Level"}),(0,t.jsx)("option",{value:"B1",children:"B1 Level"}),(0,t.jsx)("option",{value:"B2",children:"B2 Level"}),(0,t.jsx)("option",{value:"C1",children:"C1 Level"}),(0,t.jsx)("option",{value:"C2",children:"C2 Level"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"text",placeholder:"Search modules...",value:h.search||"",onChange:e=>b({...h,search:e.target.value}),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>{var s,n,r,a,i,d,c,o;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"text-2xl",children:L(e.lessonType||e.type||"")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.category||""})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("span",{"aria-label":e.cefrLevel,className:"px-2 py-1 text-xs font-medium rounded-full ".concat(V(e.cefrLevel)),children:e.cefrLevel}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(A(e.difficulty)),children:e.difficulty})]})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Duration:"}),(0,t.jsxs)("span",{children:[null!==(i=e.estimatedDuration)&&void 0!==i?i:0," min"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Exercises:"}),(0,t.jsx)("span",{children:(null===(n=e.content)||void 0===n?void 0:null===(s=n.exercises)||void 0===s?void 0:s.length)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Materials:"}),(0,t.jsx)("span",{children:(null===(a=e.content)||void 0===a?void 0:null===(r=a.materials)||void 0===r?void 0:r.length)||0})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["⭐ ",Number(null!==(d=e.averageRating)&&void 0!==d?d:0).toFixed(1)]}),(0,t.jsxs)("span",{children:["\uD83D\uDC65 ",null!==(c=e.totalRatings)&&void 0!==c?c:0," ratings"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.isPremium?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.isPremium?"Premium":"Free"}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(0,t.jsxs)("span",{children:["Completion: ",Number(null!==(o=e.completionRate)&&void 0!==o?o:0).toFixed(1),"%"]})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>C(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>l.push("/verbfy-lessons/".concat(e._id)),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors",children:"View"}),(0,t.jsx)("button",{onClick:()=>D(e._id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})},e._id)})}),v&&(0,t.jsx)(u,{onClose:()=>j(!1),onSave:w})]})})},u=e=>{let{onClose:s,onSave:l}=e,[r,a]=n.useState(""),[i,d]=n.useState(""),[c,o]=n.useState("VerbfyGrammar"),[u,x]=n.useState("A1");return(0,t.jsx)("div",{role:"dialog","aria-modal":"true",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create Lesson"}),(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"title",children:"Title"}),(0,t.jsx)("input",{id:"title",value:r,onChange:e=>a(e.target.value),className:"w-full border rounded px-3 py-2 mb-3"}),(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"description",children:"Description"}),(0,t.jsx)("input",{id:"description",value:i,onChange:e=>d(e.target.value),className:"w-full border rounded px-3 py-2 mb-3"}),(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"type",children:"Type"}),(0,t.jsxs)("select",{id:"type",value:c,onChange:e=>o(e.target.value),className:"w-full border rounded px-3 py-2 mb-3",children:[(0,t.jsx)("option",{value:"VerbfyGrammar",children:"VerbfyGrammar"}),(0,t.jsx)("option",{value:"VerbfyRead",children:"VerbfyRead"})]}),(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"level",children:"CEFR Level"}),(0,t.jsxs)("select",{id:"level",value:u,onChange:e=>x(e.target.value),className:"w-full border rounded px-3 py-2 mb-4",children:[(0,t.jsx)("option",{value:"A1",children:"A1"}),(0,t.jsx)("option",{value:"A2",children:"A2"}),(0,t.jsx)("option",{value:"B1",children:"B1"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>l({title:r,description:i,type:c,cefrLevel:u}),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})};function x(){let{user:e,loading:s}=(0,c.Eu)(),l=(0,i.useRouter)();return((0,n.useEffect)(()=>{s||e||l.push("/login")},[e,s,l]),s)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?"teacher"!==e.role&&"admin"!==e.role?(l.push("/unauthorized"),null):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{children:"Learning Modules - Verbfy"}),(0,t.jsx)("meta",{name:"description",content:"Manage Verbfy learning modules and content"})]}),(0,t.jsx)(o,{userRole:e.role})]}):null}}},function(e){e.O(0,[1216,2888,179],function(){return e(e.s=76109)}),_N_E=e.O()}]);
//# sourceMappingURL=learning-modules-dc22e99b123ffa01.js.map