(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{94309:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return s(47469)}])},47469:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var l=s(85893),i=s(67294),a=s(10571),r=s(36197),n=s(41664),o=s.n(n),d=s(54310),c=s(32798);function m(){let{user:e}=(0,r.aC)(),{t}=(0,d.Q)(),[s,n]=(0,i.useState)(0),[m,v]=(0,i.useState)([]),[f,j]=(0,i.useState)([]),[p,N]=(0,i.useState)([]),b=(0,i.useCallback)(async()=>{var e,t,s,l,i,a,r,o;try{let[r,o,d]=await Promise.all([c.Lz.getNotifications(),c.Cv.getFeaturedMaterials(),c.bl.getRooms({level:"All",isPrivate:!1,page:1,limit:4})]);n(null!==(l=null===(t=r.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.unreadCount)&&void 0!==l?l:0),v(null!==(i=o.data)&&void 0!==i?i:[]),j(null!==(a=null===(s=d.data)||void 0===s?void 0:s.rooms)&&void 0!==a?a:[])}catch(e){}try{let e=await c.x4.getReservations({status:"upcoming",limit:5});N(null!==(o=null===(r=e.data)||void 0===r?void 0:r.data)&&void 0!==o?o:[])}catch(e){}},[]);return(0,i.useEffect)(()=>{b()},[b]),(0,l.jsx)(a.Z,{title:t("home.title","Home"),children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsx)(h,{label:t("home.stats.unread","Unread notifications"),value:s}),(0,l.jsx)(h,{label:t("home.stats.upcoming","Upcoming lessons"),value:p.length}),(0,l.jsx)(h,{label:t("home.stats.rooms","Open talk rooms"),value:f.length}),(0,l.jsx)(h,{label:t("home.stats.materials","Featured materials"),value:m.length})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsx)(u,{href:"/teachers",icon:"\uD83D\uDC68‍\uD83C\uDFEB",title:t("home.shortcut.teachers","Find Teachers")}),(0,l.jsx)(u,{href:"/verbfy-talk",icon:"\uD83C\uDFA5",title:t("home.shortcut.talk","Join VerbfyTalk")}),(0,l.jsx)(u,{href:"/free-materials",icon:"\uD83D\uDCDA",title:t("home.shortcut.materials","Free Materials")}),(0,l.jsx)(u,{href:"/cefr-tests",icon:"\uD83D\uDCDD",title:t("home.shortcut.cefr","CEFR Tests")})]}),(0,l.jsx)(x,{title:t("home.upcoming","Your upcoming lessons"),linkHref:"/reservations",linkText:t("home.viewAll","View all"),children:0===p.length?(0,l.jsx)(g,{text:t("home.upcomingEmpty","No upcoming lessons yet")}):(0,l.jsx)("ul",{className:"divide-y divide-gray-200 rounded-lg border",children:p.map(e=>(0,l.jsxs)("li",{className:"p-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.title||t("home.lesson","Lesson")}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:new Date(e.startTime||e.date).toLocaleString()})]}),(0,l.jsx)(o(),{href:"/reservations",className:"text-blue-600 hover:underline text-sm",children:t("home.manage","Manage")})]},e._id))})}),(0,l.jsx)(x,{title:t("home.featured","Featured materials"),linkHref:"/free-materials",linkText:t("home.viewAll","View all"),children:0===m.length?(0,l.jsx)(g,{text:t("home.materialsEmpty","No featured materials yet")}):(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.slice(0,6).map(e=>(0,l.jsxs)("div",{className:"p-4 rounded-lg border hover:shadow-sm transition",children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,l.jsx)("div",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,l.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[e.level," • ",e.category]})]},e._id))})}),(0,l.jsx)(x,{title:t("home.rooms","Open VerbfyTalk rooms"),linkHref:"/verbfy-talk",linkText:t("home.viewAll","View all"),children:0===f.length?(0,l.jsx)(g,{text:t("home.roomsEmpty","No rooms available right now")}):(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.slice(0,6).map(e=>(0,l.jsxs)("div",{className:"p-4 rounded-lg border hover:shadow-sm transition",children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:e.name||t("home.room","Room")}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:e.isPrivate?t("home.private","Private"):t("home.public","Public")})]},e._id))})})]})})}function h(e){let{label:t,value:s}=e;return(0,l.jsxs)("div",{className:"rounded-lg border p-4 bg-white",children:[(0,l.jsx)("div",{className:"text-sm text-gray-600",children:t}),(0,l.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:s})]})}function u(e){let{href:t,icon:s,title:i}=e;return(0,l.jsxs)(o(),{href:t,className:"rounded-lg border p-4 bg-white flex items-center space-x-3 hover:shadow-sm transition",children:[(0,l.jsx)("span",{className:"text-xl","aria-hidden":!0,children:s}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:i})]})}function x(e){let{title:t,linkHref:s,linkText:i,children:a}=e;return(0,l.jsxs)("section",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:t}),(0,l.jsx)(o(),{href:s,className:"text-sm text-blue-600 hover:underline",children:i})]}),a]})}function g(e){let{text:t}=e;return(0,l.jsx)("div",{className:"rounded-lg border p-8 text-center text-gray-500",children:t})}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,5522,1493,2888,5514,179],function(){return e(e.s=94309)}),_N_E=e.O()}]);