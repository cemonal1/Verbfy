{"version":3,"file":"static/chunks/pages/teacher/dashboard-38db04b2989d650a.js","mappings":"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","sources":["webpack://_N_E/?a22a","webpack://_N_E/./pages/teacher/dashboard.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/teacher/dashboard\",\n      function () {\n        return require(\"private-next-pages/teacher/dashboard.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/teacher/dashboard\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { useAuthContext } from '@/context/AuthContext';\r\nimport api from '@/lib/api';\r\nimport Link from 'next/link';\r\n\r\ninterface Booking {\r\n  id: string;\r\n  student: {\r\n    name: string;\r\n    email: string;\r\n  };\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  status: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface UpcomingReservation {\r\n  id: string;\r\n  student: {\r\n    name: string;\r\n    email: string;\r\n  };\r\n  date: string;\r\n  startTime: string;\r\n  endTime: string;\r\n  status: string;\r\n}\r\n\r\ninterface Notification {\r\n  id: string;\r\n  type: string;\r\n  title: string;\r\n  message: string;\r\n  isRead: boolean;\r\n  createdAt: string;\r\n  sender: {\r\n    name: string;\r\n    email: string;\r\n  };\r\n  relatedReservation?: {\r\n    actualDate: string;\r\n    startTime: string;\r\n    endTime: string;\r\n    lessonType: string;\r\n    lessonLevel: string;\r\n  };\r\n}\r\n\r\nfunction TeacherDashboardPage() {\r\n  const { user } = useAuthContext();\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [upcomingReservations, setUpcomingReservations] = useState<UpcomingReservation[]>([]);\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Calculate duration between two time strings\r\n  const calculateDuration = (startTime: string, endTime: string) => {\r\n    const [startHour, startMin] = startTime.split(':').map(Number);\r\n    const [endHour, endMin] = endTime.split(':').map(Number);\r\n    const startMinutes = startHour * 60 + startMin;\r\n    const endMinutes = endHour * 60 + endMin;\r\n    return endMinutes - startMinutes;\r\n  };\r\n\r\n  // Get time ago helper function\r\n  const getTimeAgo = (date: Date) => {\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\r\n    \r\n    if (diffInSeconds < 60) return 'Just now';\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;\r\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;\r\n    return `${Math.floor(diffInSeconds / 86400)} days ago`;\r\n  };\r\n\r\n  // Fetch teacher data\r\n  useEffect(() => {\r\n    const fetchTeacherData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch bookings, upcoming reservations, and notifications in parallel\r\n        const [bookingsResponse, upcomingResponse, notificationsResponse, unreadCountResponse] = await Promise.all([\r\n          api.get('/api/reservations/teacher'),\r\n          api.get('/api/reservations/upcoming'),\r\n          api.get('/api/notifications?limit=5'),\r\n          api.get('/api/notifications/unread-count')\r\n        ]);\r\n\r\n        setBookings(bookingsResponse.data.bookings || []);\r\n        setUpcomingReservations(upcomingResponse.data.upcomingReservations || []);\r\n        setNotifications(notificationsResponse.data.notifications || []);\r\n        setUnreadCount(unreadCountResponse.data.unreadCount || 0);\r\n        \r\n      } catch (err: any) {\r\n        console.error('Error fetching teacher data:', err);\r\n        setError(err.response?.data?.message || 'Failed to load dashboard data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchTeacherData();\r\n    }\r\n  }, [user]);\r\n\r\n  // Calculate stats from real data\r\n  const completedLessons = bookings.filter(b => b.status === 'completed').length;\r\n  const upcomingLessons = upcomingReservations.length;\r\n  const totalBookings = bookings.length;\r\n  const uniqueStudents = new Set(bookings.map(b => b.student.email)).size;\r\n\r\n  const stats = [\r\n    {\r\n      title: 'Total Students',\r\n      value: `${uniqueStudents}+`,\r\n      icon: 'fas fa-user-graduate',\r\n      color: 'blue',\r\n      trend: 'up',\r\n      trendValue: '+8%'\r\n    },\r\n    {\r\n      title: 'Completed Lessons',\r\n      value: `${completedLessons}+`,\r\n      icon: 'fas fa-graduation-cap',\r\n      color: 'green',\r\n      trend: 'up',\r\n      trendValue: '+15%'\r\n    },\r\n    {\r\n      title: 'Upcoming Lessons',\r\n      value: `${upcomingLessons}`,\r\n      icon: 'fas fa-clock',\r\n      color: 'purple',\r\n      trend: 'up',\r\n      trendValue: '+5'\r\n    },\r\n    {\r\n      title: 'Total Bookings',\r\n      value: `${totalBookings}`,\r\n      icon: 'fas fa-calendar-check',\r\n      color: 'orange',\r\n      trend: 'up',\r\n      trendValue: '+12%'\r\n    }\r\n  ];\r\n\r\n  // Format upcoming lessons for display\r\n  const formattedUpcomingLessons = upcomingReservations.map(reservation => {\r\n    // Ensure date is properly formatted\r\n    const lessonDate = new Date(reservation.date);\r\n    const formattedDate = isNaN(lessonDate.getTime()) \r\n      ? 'Date not available' \r\n      : lessonDate.toLocaleDateString('en-US', { \r\n          weekday: 'long', \r\n          year: 'numeric', \r\n          month: 'long', \r\n          day: 'numeric' \r\n        });\r\n\r\n    return {\r\n      reservationId: reservation.id,\r\n      student: reservation.student.name,\r\n      topic: 'General Lesson',\r\n      date: formattedDate,\r\n      time: `${reservation.startTime} - ${reservation.endTime}`,\r\n      duration: `${calculateDuration(reservation.startTime, reservation.endTime)} min`,\r\n      status: reservation.status\r\n    };\r\n  });\r\n\r\n  // Get recent students from bookings\r\n  const recentStudents = bookings\r\n    .filter(booking => booking.status === 'completed')\r\n    .reduce((acc, booking) => {\r\n      const existing = acc.find(s => s.email === booking.student.email);\r\n      if (!existing) {\r\n        acc.push({\r\n          name: booking.student.name,\r\n          email: booking.student.email,\r\n          level: 'Intermediate', // This would come from student profile in real app\r\n          lessons: bookings.filter(b => b.student.email === booking.student.email).length,\r\n          lastSeen: getTimeAgo(new Date(booking.date))\r\n        });\r\n      }\r\n      return acc;\r\n    }, [] as Array<{\r\n      name: string;\r\n      email: string;\r\n      level: string;\r\n      lessons: number;\r\n      lastSeen: string;\r\n    }>)\r\n    .slice(0, 4);\r\n\r\n  const teachingStats = [\r\n    { label: 'Teaching Hours', value: `${Math.round(completedLessons * 0.75)}`, unit: 'hrs', color: 'blue' },\r\n    { label: 'Student Satisfaction', value: '96', unit: '%', color: 'green' },\r\n    { label: 'Lesson Completion', value: `${Math.round((completedLessons / totalBookings) * 100)}`, unit: '%', color: 'purple' },\r\n    { label: 'Response Rate', value: '98', unit: '%', color: 'orange' }\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout allowedRoles={['teacher']}>\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  // Pending approval notice\r\n  if ((user as any)?.approvalStatus === 'pending' || (user as any)?.isApproved === false) {\r\n    return (\r\n      <DashboardLayout allowedRoles={['teacher']}>\r\n        <div className=\"max-w-2xl mx-auto bg-yellow-50 border border-yellow-200 rounded-xl p-6 mt-6\">\r\n          <h2 className=\"text-lg font-semibold text-yellow-800\">Your teacher account is awaiting approval</h2>\r\n          <p className=\"text-yellow-700 mt-2\">Our team will review your application shortly. You will receive a notification once approved. You can continue exploring as a student in the meantime.</p>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <DashboardLayout allowedRoles={['teacher']}>\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <p className=\"text-red-800\">{error}</p>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout allowedRoles={['teacher']}>\r\n      <div className=\"space-y-4 sm:space-y-6\">\r\n        {/* Welcome Section */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n            <div className=\"flex-1\">\r\n              <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">\r\n                Hi, {user?.name || 'Teacher'} ðŸ‘‹\r\n              </h1>\r\n              <p className=\"text-base sm:text-lg font-semibold text-gray-700 mb-2\">\r\n                Ready to inspire your students today?\r\n              </p>\r\n              <p className=\"text-gray-600 mb-4 text-sm sm:text-base\">\r\n                Manage your schedule, track student progress, and grow your teaching business.\r\n              </p>\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                <Link href=\"/teacher/availability\" className=\"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-semibold hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-sm sm:text-base text-center\">\r\n                  Manage Availability\r\n                </Link>\r\n                <Link href=\"/teacher/reservations\" className=\"bg-white border-2 border-blue-500 text-blue-600 px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-semibold hover:bg-blue-50 transition-all duration-200 transform hover:scale-105 text-center text-sm sm:text-base\">\r\n                  View All Bookings\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div className=\"hidden lg:block lg:ml-8\">\r\n              <div className=\"w-24 sm:w-32 h-24 sm:h-32 bg-gradient-to-br from-green-100 to-blue-100 rounded-full flex items-center justify-center animate-pulse\">\r\n                <i className=\"fas fa-chalkboard-teacher text-2xl sm:text-4xl text-green-600\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Statistics Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n          {stats.map((stat, index) => (\r\n            <div key={index} className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\r\n                  <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{stat.value}</p>\r\n                </div>\r\n                <div className={`w-12 h-12 rounded-lg flex items-center justify-center bg-${stat.color}-100`}>\r\n                  <i className={`${stat.icon} text-xl text-${stat.color}-600`}></i>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 flex items-center\">\r\n                <span className={`text-sm font-medium text-${stat.color}-600 flex items-center`}>\r\n                  <i className={`fas fa-arrow-${stat.trend} mr-1`}></i>\r\n                  {stat.trendValue}\r\n                </span>\r\n                <span className=\"text-sm text-gray-500 ml-2\">from last month</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Upcoming Lessons */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <div className=\"flex items-center justify-between mb-4 sm:mb-6\">\r\n            <h2 className=\"text-lg sm:text-xl font-bold text-gray-900\">Upcoming Lessons</h2>\r\n            <Link href=\"/teacher/reservations\" className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\">\r\n              View All â†’\r\n            </Link>\r\n          </div>\r\n          \r\n          {formattedUpcomingLessons.length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {formattedUpcomingLessons.map((lesson, index) => {\r\n                // Find the original reservation to get time data\r\n                const originalReservation = upcomingReservations.find(r => r.id === lesson.reservationId);\r\n                let canJoin = false;\r\n                let statusMessage = '';\r\n                \r\n                if (originalReservation) {\r\n                  const lessonDate = new Date(originalReservation.date);\r\n                  const now = new Date();\r\n                  \r\n                  // Calculate lesson start and end times\r\n                  const [startHours, startMinutes] = originalReservation.startTime.split(':');\r\n                  const lessonStartTime = new Date(lessonDate);\r\n                  lessonStartTime.setHours(parseInt(startHours), parseInt(startMinutes), 0, 0);\r\n                  \r\n                  const [endHours, endMinutes] = originalReservation.endTime.split(':');\r\n                  const lessonEndTime = new Date(lessonDate);\r\n                  lessonEndTime.setHours(parseInt(endHours), parseInt(endMinutes), 0, 0);\r\n                  \r\n                  // Teachers can join anytime before the lesson ends\r\n                  canJoin = lesson.status === 'booked' && now <= lessonEndTime;\r\n                  \r\n                  if (!canJoin) {\r\n                    statusMessage = now > lessonEndTime ? 'Time expired' : 'Not available';\r\n                  }\r\n                }\r\n                \r\n                return (\r\n                  <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\r\n                        <i className=\"fas fa-user-graduate text-green-600\"></i>\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{lesson.student}</h3>\r\n                        <p className=\"text-sm text-gray-600\">{lesson.topic}</p>\r\n                        <p className=\"text-sm text-gray-500\">{lesson.date}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                        {lesson.status}\r\n                      </span>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">{lesson.duration}</p>\r\n                      {lesson.status === 'booked' && canJoin && (\r\n                        <Link \r\n                          href={`/talk/${lesson.reservationId}`}\r\n                          className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 mt-2\"\r\n                        >\r\n                          Start Lesson\r\n                        </Link>\r\n                      )}\r\n                      {lesson.status === 'booked' && !canJoin && (\r\n                        <span className=\"text-xs text-gray-500 mt-2 block\">\r\n                          {statusMessage}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <i className=\"fas fa-calendar-times text-4xl text-gray-300 mb-4\"></i>\r\n              <p className=\"text-gray-500 mb-4\">No upcoming lessons scheduled</p>\r\n              <Link href=\"/teacher/availability\" className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700\">\r\n                Set Your Availability\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Teaching Statistics */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <h2 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-4 sm:mb-6\">Teaching Statistics</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\r\n            {teachingStats.map((stat, index) => (\r\n              <div key={index} className=\"text-center\">\r\n                <div className={`w-16 h-16 mx-auto mb-3 bg-${stat.color}-100 rounded-full flex items-center justify-center`}>\r\n                  <i className={`fas fa-chart-line text-xl text-${stat.color}-600`}></i>\r\n                </div>\r\n                <h3 className=\"font-semibold text-gray-900 mb-2\">{stat.label}</h3>\r\n                <p className=\"text-2xl font-bold text-gray-900\">{stat.value}</p>\r\n                <p className=\"text-sm text-gray-600\">{stat.unit}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Students */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 sm:p-6 hover:shadow-md transition-all duration-300\">\r\n          <div className=\"flex items-center justify-between mb-4 sm:mb-6\">\r\n            <h2 className=\"text-lg sm:text-xl font-bold text-gray-900\">Recent Students</h2>\r\n            <Link href=\"/teacher/students\" className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\">\r\n              View All â†’\r\n            </Link>\r\n          </div>\r\n          \r\n          {recentStudents.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              {recentStudents.map((student, index) => (\r\n                <div key={index} className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n                  <div className=\"w-12 h-12 mx-auto mb-3 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                    <i className=\"fas fa-user text-blue-600\"></i>\r\n                  </div>\r\n                  <h3 className=\"font-semibold text-gray-900 mb-1\">{student.name}</h3>\r\n                  <p className=\"text-sm text-gray-600 mb-2\">{student.level}</p>\r\n                  <p className=\"text-xs text-gray-500\">{student.lessons} lessons</p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">{student.lastSeen}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <i className=\"fas fa-users text-4xl text-gray-300 mb-4\"></i>\r\n              <p className=\"text-gray-500\">No students yet</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default TeacherDashboardPage; "],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","user","useAuthContext","bookings","setBookings","useState","upcomingReservations","setUpcomingReservations","notifications","setNotifications","unreadCount","setUnreadCount","loading","setLoading","error","setError","calculateDuration","startTime","endTime","startHour","startMin","split","map","Number","endHour","endMin","endMinutes","getTimeAgo","diffInSeconds","Math","floor","now","Date","getTime","date","concat","useEffect","fetchTeacherData","bookingsResponse","upcomingResponse","notificationsResponse","unreadCountResponse","Promise","all","api","get","data","err","console","response","message","completedLessons","filter","b","status","length","upcomingLessons","totalBookings","uniqueStudents","Set","student","email","size","formattedUpcomingLessons","reservation","lessonDate","formattedDate","isNaN","toLocaleDateString","weekday","year","month","day","reservationId","id","name","topic","time","duration","recentStudents","booking","reduce","acc","find","s","level","lessons","lastSeen","slice","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","allowedRoles","div","className","approvalStatus","isApproved","jsxs","h2","p","h1","Link","href","i","stats","title","value","icon","color","trend","trendValue","stat","index","span","lesson","originalReservation","r","canJoin","statusMessage","startHours","startMinutes","lessonStartTime","setHours","parseInt","endHours","lessonEndTime","h3","teachingStats","label","round","unit"],"sourceRoot":""}