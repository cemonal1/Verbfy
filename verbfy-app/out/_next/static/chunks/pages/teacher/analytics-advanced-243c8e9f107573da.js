(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5266],{12337:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/analytics-advanced",function(){return t(82647)}])},82647:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(67294),l=t(36197),n=t(32798),i=t(68283),d=t(55692),c=t(12044),x=t(35892),m=t(64964),o=t(70927),h=t(85615),g=t(3204),u=t(46162),p=t(32201),j=t(74931),N=t(72509);s.default=()=>{let{user:e}=(0,l.aC)(),[s,t]=(0,r.useState)(null),[y,v]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[w,S]=(0,r.useState)(null),[A,M]=(0,r.useState)(!0),[R,k]=(0,r.useState)({timeRange:"30d",includeInactive:!1});(0,r.useEffect)(()=>{L()},[R]);let L=async()=>{try{M(!0);let[e,s,a,r]=await Promise.all([n.Av.getAnalytics(R),n.Av.getStudentPerformance(R),n.Av.getLessonAnalytics(R),n.Av.getEngagementMetrics(R)]);t(e.analytics),v(s.students),b(a.lessons),S(r.metrics)}catch(e){console.error("Error loading teacher analytics:",e),N.Am.error("Failed to load analytics data")}finally{M(!1)}},C=async()=>{try{let e=await n.Av.generateAnalytics({timeRange:R.timeRange,includeStudentDetails:!0,includeRevenueData:!0});t(e.analytics),N.Am.success("Analytics generated successfully!")}catch(e){console.error("Error generating analytics:",e),N.Am.error("Failed to generate analytics")}},Z=(e,s)=>s?e>0?(0,a.jsx)(i.Z,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(d.Z,{className:"h-4 w-4 text-red-500"}):e>0?(0,a.jsx)(d.Z,{className:"h-4 w-4 text-red-500"}):(0,a.jsx)(i.Z,{className:"h-4 w-4 text-green-500"});return A?(0,a.jsx)("div",{className:"bg-gray-50 flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading Advanced Analytics..."})]})}):(0,a.jsx)("div",{className:"bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),"Advanced Teacher Analytics"]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Comprehensive insights into your teaching performance, student progress, and engagement metrics."})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,a.jsxs)("select",{value:R.timeRange,onChange:e=>k(s=>({...s,timeRange:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,a.jsx)("option",{value:"1y",children:"Last year"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Level"}),(0,a.jsxs)("select",{value:R.studentLevel||"",onChange:e=>k(s=>({...s,studentLevel:e.target.value||void 0})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Levels"}),(0,a.jsx)("option",{value:"A1",children:"A1 - Beginner"}),(0,a.jsx)("option",{value:"A2",children:"A2 - Elementary"}),(0,a.jsx)("option",{value:"B1",children:"B1 - Intermediate"}),(0,a.jsx)("option",{value:"B2",children:"B2 - Upper Intermediate"}),(0,a.jsx)("option",{value:"C1",children:"C1 - Advanced"}),(0,a.jsx)("option",{value:"C2",children:"C2 - Mastery"})]})]})]}),(0,a.jsx)("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Generate Analytics"})]})}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Students"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.studentMetrics.totalStudents}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[Z(s.studentMetrics.newStudentsThisMonth,!0),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:["+",s.studentMetrics.newStudentsThisMonth," this month"]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Average Rating"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.performanceMetrics.averageLessonRating.toFixed(1)}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:[s.performanceMetrics.totalLessons," lessons"]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(h.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Monthly Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",s.revenueMetrics.monthlyRevenue.toLocaleString()]}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[Z(s.revenueMetrics.revenueGrowth,!0),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-1",children:[s.revenueMetrics.revenueGrowth>0?"+":"",s.revenueMetrics.revenueGrowth,"% growth"]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(g.Z,{className:"h-8 w-8 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Student Satisfaction"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.studentMetrics.studentSatisfactionScore.toFixed(1)}),(0,a.jsx)("div",{className:"flex items-center mt-1",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[s.engagementMetrics.messageResponseRate,"% response rate"]})})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Students"}),(0,a.jsx)("div",{className:"space-y-3",children:s.studentProgress.topPerformingStudents.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.lessonsCompleted," lessons"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-medium text-green-600",children:[e.progress,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"progress"})]})]},e.studentId))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Students Needing Support"}),(0,a.jsx)("div",{className:"space-y-3",children:s.studentProgress.strugglingStudents.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:"Needs Help"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{children:"Issues:"})," ",e.issues.join(", ")]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Recommendations:"})," ",e.recommendations.slice(0,2).join(", ")]})]})]},e.studentId))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Lesson Performance"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lesson"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.slice(0,10).map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.type}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-yellow-400 mr-1"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:e.rating.toFixed(1)})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.duration," min"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.revenue]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.completionStatus?"bg-green-100 text-green-800":"cancelled"===e.completionStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.completionStatus})})]},e.lessonId))})]})})]}),w&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Engagement Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mx-auto mb-3",children:(0,a.jsx)(u.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Response Time"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.responseTime," min"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mx-auto mb-3",children:(0,a.jsx)(p.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Message Count"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.messageCount})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full mx-auto mb-3",children:(0,a.jsx)(j.Z,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Materials Uploaded"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.materialCount})]})]})]})]})]})})}}},function(e){e.O(0,[1216,2888,179],function(){return e(e.s=12337)}),_N_E=e.O()}]);