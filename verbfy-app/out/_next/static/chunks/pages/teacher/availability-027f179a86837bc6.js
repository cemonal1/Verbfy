(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{55963:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/availability",function(){return a(78476)}])},78476:function(e,s,a){"use strict";a.r(s);var l=a(85893),i=a(67294),t=a(9008),r=a.n(t),n=a(11163),d=a(36197),c=a(56158),o=a(32798);let m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],x=[{value:"conversation",label:"Conversation Practice"},{value:"grammar",label:"Grammar Lessons"},{value:"vocabulary",label:"Vocabulary Building"},{value:"pronunciation",label:"Pronunciation"},{value:"business",label:"Business English"},{value:"exam_prep",label:"Exam Preparation"},{value:"writing",label:"Writing Skills"},{value:"reading",label:"Reading Comprehension"}];s.default=()=>{let{user:e}=(0,d.aC)(),s=(0,n.useRouter)(),{success:a,error:t}=(0,c.pm)(),[u,h]=(0,i.useState)([]),[g,b]=(0,i.useState)(!0),[y,v]=(0,i.useState)(!1),[p,j]=(0,i.useState)(1);(0,i.useEffect)(()=>{if(e&&"teacher"!==e.role){s.push("/dashboard");return}},[e,s]),(0,i.useEffect)(()=>{(null==e?void 0:e.role)==="teacher"&&f()},[e]);let f=async()=>{try{b(!0);let e=await o.ZP.get("/api/teachers/availability");e.data.success&&e.data.availability&&h(e.data.availability.timeSlots||[])}catch(e){t("Failed to load availability settings")}finally{b(!1)}},N=(e,s)=>{h(u.map((a,l)=>l===e?{...a,...s}:a))},w=e=>{h(u.filter((s,a)=>a!==e))},k=(e,s)=>{let a=u[e];N(e,{lessonTypes:a.lessonTypes.includes(s)?a.lessonTypes.filter(e=>e!==s):[...a.lessonTypes,s]})},S=async()=>{try{v(!0);let s={teacherId:(null==e?void 0:e._id)||"",timeSlots:u},l=await o.ZP.post("/api/teachers/availability",s);if(l.data.success)a("Availability settings saved successfully!");else throw Error(l.data.message||"Failed to save availability")}catch(e){var s,l;t((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Failed to save availability settings")}finally{v(!1)}},T=e=>u.map((e,s)=>({...e,originalIndex:s})).filter(s=>s.dayOfWeek===e).sort((e,s)=>e.startTime.localeCompare(s.startTime));return g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r(),{children:[(0,l.jsx)("title",{children:"Manage Availability - Verbfy"}),(0,l.jsx)("meta",{name:"description",content:"Manage your teaching availability and schedule"})]}),(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading availability settings..."})]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r(),{children:[(0,l.jsx)("title",{children:"Manage Availability - Verbfy"}),(0,l.jsx)("meta",{name:"description",content:"Manage your teaching availability and schedule"})]}),(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Availability Settings"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"Set your weekly availability for students to book lessons"})]}),(0,l.jsx)("button",{onClick:S,disabled:y,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Availability"})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Day"}),(0,l.jsx)("div",{className:"space-y-2",children:m.map((e,s)=>(0,l.jsx)("button",{onClick:()=>j(s),className:"w-full text-left px-4 py-3 rounded-lg transition-colors ".concat(p===s?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-50 text-gray-700 hover:bg-gray-100 border-2 border-transparent"),children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-medium",children:e}),(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[T(s).length," slots"]})]})},s))})]})}),(0,l.jsx)("div",{className:"lg:col-span-3",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[m[p]," Time Slots"]}),(0,l.jsxs)("button",{onClick:()=>{h([...u,{dayOfWeek:p,startTime:"09:00",endTime:"10:00",isAvailable:!0,lessonTypes:["conversation"]}])},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Time Slot"]})]}),(0,l.jsx)("div",{className:"space-y-4",children:0===T(p).length?(0,l.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,l.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsxs)("p",{children:["No time slots set for ",m[p]]}),(0,l.jsx)("p",{className:"text-sm",children:'Click "Add Time Slot" to get started'})]}):T(p).map(e=>(0,l.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Range"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"time",value:e.startTime,onChange:s=>N(e.originalIndex,{startTime:s.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,l.jsx)("span",{className:"text-gray-500",children:"to"}),(0,l.jsx)("input",{type:"time",value:e.endTime,onChange:s=>N(e.originalIndex,{endTime:s.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.isAvailable,onChange:s=>N(e.originalIndex,{isAvailable:s.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Available for booking"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lesson Types"}),(0,l.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:x.map(s=>(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.lessonTypes.includes(s.value),onChange:()=>k(e.originalIndex,s.value),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-xs text-gray-700",children:s.label})]},s.value))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Actions"}),(0,l.jsx)("button",{onClick:()=>w(e.originalIndex),className:"w-full bg-red-600 text-white px-3 py-2 rounded-md hover:bg-red-700 text-sm",children:"Remove"})]})]})},e.originalIndex))})]})})]}),(0,l.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Summary"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:m.map((e,s)=>{let a=T(s),i=a.filter(e=>e.isAvailable);return(0,l.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[i.length," available"]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[a.length," total slots"]})]},s)})})]}),(0,l.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How it works"}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Setting Your Schedule"}),(0,l.jsxs)("ul",{className:"space-y-1",children:[(0,l.jsx)("li",{children:"• Select a day from the left sidebar"}),(0,l.jsx)("li",{children:"• Add time slots for when you're available"}),(0,l.jsx)("li",{children:"• Choose which lesson types you offer during each slot"}),(0,l.jsx)("li",{children:"• Toggle availability on/off as needed"}),(0,l.jsx)("li",{children:"• Save your changes to update your schedule"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Student Booking"}),(0,l.jsxs)("ul",{className:"space-y-1",children:[(0,l.jsx)("li",{children:"• Students can only book available time slots"}),(0,l.jsx)("li",{children:"• They'll see your lesson types for each slot"}),(0,l.jsx)("li",{children:"• Bookings are confirmed automatically"}),(0,l.jsx)("li",{children:"• You'll receive notifications for new bookings"}),(0,l.jsx)("li",{children:"• Update your schedule anytime"})]})]})]})]})]})})]})}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,5522,1493,2888,5514,179],function(){return e(e.s=55963)}),_N_E=e.O()}]);