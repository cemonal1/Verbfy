(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3792],{36600:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/materials",function(){return l(48409)}])},48409:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var a=l(85893),s=l(67294),i=l(11088),r=l(54310),n=l(32798);function d(){let{t:e}=(0,r.Q)(),[t,l]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),g=async()=>{try{var e,t;m(!0);let a=await n.Cv.getMaterials({limit:30});l(null!==(t=null!==(e=a.data)&&void 0!==e?e:a)&&void 0!==t?t:[])}finally{m(!1)}};return(0,s.useEffect)(()=>{g()},[]),(0,a.jsxs)(i.Z,{allowedRoles:["teacher"],title:e("tmaterials.title","My Materials"),children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-4 mb-4",children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-3",children:e("tmaterials.upload","Upload new material")}),(0,a.jsx)(c,{onUploaded:g})]}),d?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("common.loading","Loading...")}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(t=>(0,a.jsx)("div",{className:"p-4 rounded-lg border bg-white",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:t.title}),(0,a.jsx)("div",{className:"text-sm text-gray-600 line-clamp-2",children:t.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>x({id:t._id||t.id,title:t.title||"",description:t.description||"",level:t.level||"Beginner",category:t.category||"General"}),className:"px-3 py-1 rounded-md text-xs bg-blue-600 text-white hover:bg-blue-700",children:e("common.edit","Edit")}),(0,a.jsx)("button",{onClick:async()=>{try{let e=await n.Cv.downloadMaterial(t._id||t.id),l=window.URL.createObjectURL(e);window.open(l,"_blank")}catch(e){}},className:"px-3 py-1 rounded-md text-xs bg-gray-100 text-gray-800 hover:bg-gray-200",children:e("common.preview","Preview")}),(0,a.jsx)("button",{onClick:async()=>{try{await n.Cv.deleteMaterial(t._id||t.id),l(e=>e.filter(e=>(e._id||e.id)!==(t._id||t.id)))}catch(e){}},className:"px-3 py-1 rounded-md text-xs bg-red-600 text-white hover:bg-red-700",children:e("common.delete","Delete")})]})]})},t._id||t.id))}),u&&(0,a.jsx)(o,{initial:u,onClose:()=>x(null),onSave:async e=>{try{await n.Cv.updateMaterial(u.id,e),await g(),x(null)}catch(e){}}})]})}function c(e){let{onUploaded:t}=e,{t:l}=(0,r.Q)(),[i,d]=(0,s.useState)(""),[c,o]=(0,s.useState)(""),[m,u]=(0,s.useState)("Beginner"),[x,g]=(0,s.useState)("General"),[b,p]=(0,s.useState)(null),[h,v]=(0,s.useState)(!1),j=async e=>{if(e.preventDefault(),b)try{v(!0),await n.Cv.uploadMaterial({title:i,description:c,level:m,category:x,file:b}),d(""),o(""),p(null),t()}finally{v(!1)}};return(0,a.jsxs)("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:l("tmaterials.titleLabel","Title")}),(0,a.jsx)("input",{value:i,onChange:e=>d(e.target.value),className:"w-full border rounded-md px-3 py-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:l("tmaterials.level","Level")}),(0,a.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{children:"Beginner"}),(0,a.jsx)("option",{children:"Intermediate"}),(0,a.jsx)("option",{children:"Advanced"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:l("tmaterials.category","Category")}),(0,a.jsx)("input",{value:x,onChange:e=>g(e.target.value),className:"w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:l("tmaterials.description","Description")}),(0,a.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),className:"w-full border rounded-md px-3 py-2",rows:3})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:l("tmaterials.file","File")}),(0,a.jsx)("input",{type:"file",onChange:e=>{var t;return p((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"block",required:!0})]}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("button",{disabled:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:h?l("common.submitting","Submitting..."):l("tmaterials.uploadBtn","Upload")})})]})}function o(e){let{initial:t,onClose:l,onSave:i}=e,{t:n}=(0,r.Q)(),[d,c]=(0,s.useState)(t.title),[o,m]=(0,s.useState)(t.description),[u,x]=(0,s.useState)(t.level||"Beginner"),[g,b]=(0,s.useState)(t.category||"General"),[p,h]=(0,s.useState)(!1),v=async e=>{e.preventDefault();try{h(!0),await i({title:d,description:o,level:u,category:g})}finally{h(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b",children:(0,a.jsx)("div",{className:"text-lg font-semibold",children:n("tmaterials.edit","Edit Material")})}),(0,a.jsxs)("form",{onSubmit:v,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:n("tmaterials.titleLabel","Title")}),(0,a.jsx)("input",{value:d,onChange:e=>c(e.target.value),className:"w-full border rounded-md px-3 py-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:n("tmaterials.level","Level")}),(0,a.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"w-full border rounded-md px-3 py-2",children:[(0,a.jsx)("option",{children:"Beginner"}),(0,a.jsx)("option",{children:"Intermediate"}),(0,a.jsx)("option",{children:"Advanced"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:n("tmaterials.category","Category")}),(0,a.jsx)("input",{value:g,onChange:e=>b(e.target.value),className:"w-full border rounded-md px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:n("tmaterials.description","Description")}),(0,a.jsx)("textarea",{value:o,onChange:e=>m(e.target.value),className:"w-full border rounded-md px-3 py-2",rows:3})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-md bg-gray-200 text-gray-800 hover:bg-gray-300",children:n("common.cancel","Cancel")}),(0,a.jsx)("button",{disabled:p,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:p?n("common.submitting","Submitting..."):n("common.save","Save")})]})]})]})})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=36600)}),_N_E=e.O()}]);
//# sourceMappingURL=materials-342e05a32801f2a4.js.map