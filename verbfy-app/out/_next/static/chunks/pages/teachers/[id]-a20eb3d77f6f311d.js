(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5569],{66828:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teachers/[id]",function(){return a(93474)}])},93474:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var t=a(85893),l=a(67294),r=a(11163),i=a(10571),n=a(54310),d=a(32798);function c(){let{id:e}=(0,r.useRouter)().query,{t:s}=(0,n.Q)(),[a,c]=(0,l.useState)(null),[o,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(null),[u,g]=(0,l.useState)(!0),[b,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&(async()=>{try{var s,a,t,l,r;g(!0);let i=await d.ZP.get("/api/users/teachers/".concat(e));c(null!==(a=null===(s=i.data)||void 0===s?void 0:s.data)&&void 0!==a?a:null);try{let s=await d.CM.getAvailability(e);m(null!==(r=null!==(l=null===(t=s.data)||void 0===t?void 0:t.data)&&void 0!==l?l:s.data)&&void 0!==r?r:[])}catch(e){m([])}}catch(e){c(null)}finally{g(!1)}})()},[e]);let j=(0,l.useMemo)(()=>{let e=new Date;return Array.from({length:7}).map((s,a)=>{let t=new Date(e);return t.setDate(e.getDate()+a),t})},[]),v=async()=>{var a,t,l,r,i;if(x&&e)try{p(!0),await d.x4.createReservation({teacherId:e,slotId:x.slotId,actualDate:x.actualDate,lessonType:"VerbfySpeak",lessonLevel:"Intermediate",notes:"Booked via teacher profile"}),h(null),alert(s("teachers.booked","Lesson booked successfully! Check your reservations."));try{let s=await d.CM.getAvailability(e);m(null!==(l=null!==(t=null===(a=s.data)||void 0===a?void 0:a.data)&&void 0!==t?t:s.data)&&void 0!==l?l:[])}catch(e){}}catch(e){alert(s("teachers.bookError",(null===(i=e.response)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.message)||e.message||"Could not book lesson"))}finally{p(!1)}};return u?(0,t.jsx)(i.Z,{title:s("teachers.detail","Teacher"),children:(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),s("common.loading","Loading...")]})}):a?(0,t.jsx)(i.Z,{title:a.name,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:a.profileImage?(0,t.jsx)("img",{src:a.profileImage,alt:a.name,className:"w-24 h-24 rounded-full object-cover"}):(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 font-semibold text-2xl",children:a.name.charAt(0).toUpperCase()})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),a.education&&(0,t.jsx)("div",{className:"text-lg text-gray-600 mb-2",children:a.education}),a.rating&&a.rating>0&&(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(0,t.jsx)("div",{className:"flex mr-2",children:(e=>{let s=[],a=Math.floor(e);for(let e=0;e<a;e++)s.push((0,t.jsx)("span",{className:"text-yellow-400",children:"★"},e));e%1!=0&&s.push((0,t.jsx)("span",{className:"text-yellow-400",children:"☆"},"half"));let l=5-Math.ceil(e);for(let e=0;e<l;e++)s.push((0,t.jsx)("span",{className:"text-gray-300",children:"★"},"empty-".concat(e)));return s})(a.rating)}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[a.rating.toFixed(1)," (",a.totalLessons||0," lessons completed)"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.experience&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Experience:"}),(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:[a.experience," years"]})]}),a.nativeLanguage&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Native Language:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:a.nativeLanguage})]}),a.languages&&a.languages.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Speaks:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:a.languages.join(", ")})]}),a.timezone&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Timezone:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:a.timezone})]})]}),a.hourlyRate&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["$",a.hourlyRate,"/hour"]})})]})]}),a.bio&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"About"}),(0,t.jsx)("p",{className:"text-gray-600 leading-relaxed",children:a.bio})]}),a.specialties&&a.specialties.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Specialties"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.specialties.map((e,s)=>(0,t.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full",children:e},s))})]}),a.certifications&&a.certifications.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Certifications"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:a.certifications.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:s("teachers.availability","Available Time Slots (Next 7 Days)")}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(e=>{let a=e.toDateString(),l=(o||[]).filter(s=>{if(!s.isBooked){let a=new Date(e).getDay();return s.dayOfWeek===a}return!1});return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 mb-3",children:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,t.jsx)("div",{className:"space-y-2",children:0===l.length?(0,t.jsx)("span",{className:"text-sm text-gray-500",children:s("teachers.noSlots","No available slots")}):l.map((s,a)=>(0,t.jsxs)("button",{onClick:()=>h({slotId:s._id,actualDate:e.toISOString().split("T")[0],startTime:s.startTime,endTime:s.endTime}),className:"w-full text-sm px-3 py-2 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[s.startTime," - ",s.endTime]},a))})]},a)})})]}),x&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"font-medium text-blue-900 mb-3",children:s("teachers.confirmBooking","Confirm Lesson Booking")}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Teacher:"})," ",a.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Date:"})," ",new Date(x.actualDate).toLocaleDateString()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Time:"})," ",x.startTime," - ",x.endTime]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Type:"})," VerbfySpeak (Conversation Practice)"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Level:"})," Intermediate"]}),a.hourlyRate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Rate:"})," $",a.hourlyRate,"/hour"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:v,disabled:b,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[b&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("teachers.confirmBook","Confirm Booking")]}),(0,t.jsx)("button",{onClick:()=>h(null),disabled:b,className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-md hover:bg-gray-400 disabled:opacity-50",children:s("common.cancel","Cancel")})]})]})]})}):(0,t.jsx)(i.Z,{title:s("teachers.detail","Teacher"),children:(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,t.jsx)("div",{className:"text-lg mb-2",children:s("teachers.notFound","Teacher not found")}),(0,t.jsx)("div",{className:"text-sm",children:s("teachers.notFoundDesc","This teacher may not be approved or may not exist.")})]})})}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,1493,2888,5514,179],function(){return e(e.s=66828)}),_N_E=e.O()}]);