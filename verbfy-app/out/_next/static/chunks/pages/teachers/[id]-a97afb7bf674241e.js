(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5569],{66828:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teachers/[id]",function(){return a(93474)}])},93474:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(85893),s=a(67294),l=a(11163),i=a(11088),n=a(54310),d=a(32798);function c(){var e;let{id:t}=(0,l.useRouter)().query,{t:a}=(0,n.Q)(),[c,o]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[h,x]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&(async()=>{var e,a,r,s,l;try{let r=await d.Sb.getUserById(t);o(null!==(a=null===(e=r.data)||void 0===e?void 0:e.data)&&void 0!==a?a:null)}catch(e){}try{let e=await d.CM.getAvailability(t);m(null!==(l=null!==(s=null===(r=e.data)||void 0===r?void 0:r.data)&&void 0!==s?s:e.data)&&void 0!==l?l:[])}catch(e){}})()},[t]);let g=(0,s.useMemo)(()=>{let e=new Date;return Array.from({length:7}).map((t,a)=>{let r=new Date(e);return r.setDate(e.getDate()+a),r})},[]);return(0,r.jsx)(i.Z,{title:(null==c?void 0:c.name)||a("teachers.detail","Teacher"),children:c?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,r.jsx)("div",{className:"text-xl font-semibold",children:c.name}),(0,r.jsx)("div",{className:"text-gray-600",children:c.education||""}),(0,r.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:null===(e=c.specialties)||void 0===e?void 0:e.join(", ")})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-4 bg-white",children:[(0,r.jsx)("div",{className:"text-lg font-medium mb-3",children:a("teachers.availability","Availability (next 7 days)")}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:g.map(e=>{let t=e.toDateString(),s=(u||[]).filter(e=>new Date(e.start||e.date||e).toDateString()===t);return(0,r.jsxs)("div",{className:"border rounded-md p-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.toLocaleDateString()}),(0,r.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===s.length?(0,r.jsx)("span",{className:"text-xs text-gray-500",children:a("teachers.noSlots","No slots")}):s.map((e,t)=>{let a=new Date(e.start||e.date||e),s=a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,r.jsx)("button",{onClick:()=>x({start:a.toISOString()}),className:"text-xs px-2 py-1 rounded border hover:bg-blue-50",children:s},t)})})]},t)})})]}),(null==h?void 0:h.start)&&(0,r.jsxs)("div",{className:"rounded-lg border p-4 bg-white flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:[a("teachers.selected","Selected"),": ",new Date(h.start).toLocaleString()]}),(0,r.jsx)("button",{onClick:async()=>{try{await d.x4.createReservation({teacherId:t,startTime:h.start}),x(null),alert(a("teachers.booked","Reservation created"))}catch(e){alert(a("teachers.bookError","Could not create reservation"))}},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:a("teachers.book","Book Lesson")})]})]}):(0,r.jsx)("div",{className:"p-8 text-center text-gray-500",children:a("common.loading","Loading...")})})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=66828)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-a97afb7bf674241e.js.map