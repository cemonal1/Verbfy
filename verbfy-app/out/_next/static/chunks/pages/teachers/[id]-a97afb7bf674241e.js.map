{"version":3,"file":"static/chunks/pages/teachers/[id]-a97afb7bf674241e.js","mappings":"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","sources":["webpack://_N_E/?fdcc","webpack://_N_E/./pages/teachers/[id].tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/teachers/[id]\",\n      function () {\n        return require(\"private-next-pages/teachers/[id].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/teachers/[id]\"])\n      });\n    }\n  ","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { useI18n } from '@/lib/i18n';\r\nimport { adminAPI, reservationAPI, availabilityAPI } from '@/lib/api';\r\n\r\nexport default function TeacherDetailPage() {\r\n  const router = useRouter();\r\n  const { id } = router.query as { id?: string };\r\n  const { t } = useI18n();\r\n  const [teacher, setTeacher] = useState<any | null>(null);\r\n  const [slots, setSlots] = useState<any[]>([]);\r\n  const [booking, setBooking] = useState<{start?: string}|null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    const load = async () => {\r\n      try {\r\n        const res = await adminAPI.getUserById(id);\r\n        setTeacher(res.data?.data ?? null);\r\n      } catch {}\r\n\r\n      try {\r\n        const av = await availabilityAPI.getAvailability(id as string);\r\n        setSlots(av.data?.data ?? av.data ?? []);\r\n      } catch {}\r\n    };\r\n    load();\r\n  }, [id]);\r\n\r\n  const nextDays = useMemo(() => {\r\n    const now = new Date();\r\n    return Array.from({ length: 7 }).map((_, i) => {\r\n      const d = new Date(now);\r\n      d.setDate(now.getDate() + i);\r\n      return d;\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <DashboardLayout title={teacher?.name || t('teachers.detail','Teacher')}>\r\n      {!teacher ? (\r\n        <div className=\"p-8 text-center text-gray-500\">{t('common.loading','Loading...')}</div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"rounded-lg border p-4\">\r\n            <div className=\"text-xl font-semibold\">{teacher.name}</div>\r\n            <div className=\"text-gray-600\">{teacher.education || ''}</div>\r\n            <div className=\"mt-2 text-sm text-gray-600\">{teacher.specialties?.join(', ')}</div>\r\n          </div>\r\n          {/* Availability grid */}\r\n          <div className=\"rounded-lg border p-4 bg-white\">\r\n            <div className=\"text-lg font-medium mb-3\">{t('teachers.availability','Availability (next 7 days)')}</div>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n              {nextDays.map((d) => {\r\n                const dayStr = d.toDateString();\r\n                const daySlots = (slots || []).filter((s: any) => {\r\n                  const ts = new Date(s.start || s.date || s).toDateString();\r\n                  return ts === dayStr;\r\n                });\r\n                return (\r\n                  <div key={dayStr} className=\"border rounded-md p-3\">\r\n                    <div className=\"text-sm font-medium text-gray-900\">{d.toLocaleDateString()}</div>\r\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                      {daySlots.length === 0 ? (\r\n                        <span className=\"text-xs text-gray-500\">{t('teachers.noSlots','No slots')}</span>\r\n                      ) : (\r\n                        daySlots.map((s: any, idx: number) => {\r\n                          const start = new Date(s.start || s.date || s);\r\n                          const label = start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n                          return (\r\n                            <button\r\n                              key={idx}\r\n                              onClick={() => setBooking({ start: start.toISOString() })}\r\n                              className=\"text-xs px-2 py-1 rounded border hover:bg-blue-50\"\r\n                            >\r\n                              {label}\r\n                            </button>\r\n                          );\r\n                        })\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Booking action */}\r\n          {booking?.start && (\r\n            <div className=\"rounded-lg border p-4 bg-white flex items-center justify-between\">\r\n              <div className=\"text-sm text-gray-700\">\r\n                {t('teachers.selected','Selected')}: {new Date(booking.start).toLocaleString()}\r\n              </div>\r\n              <button\r\n                onClick={async () => {\r\n                  try {\r\n                    await reservationAPI.createReservation({ teacherId: id, startTime: booking.start });\r\n                    setBooking(null);\r\n                    alert(t('teachers.booked','Reservation created'));\r\n                  } catch (e) {\r\n                    alert(t('teachers.bookError','Could not create reservation'));\r\n                  }\r\n                }}\r\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\r\n              >\r\n                {t('teachers.book','Book Lesson')}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","TeacherDetailPage","teacher","id","router","useRouter","query","t","useI18n","setTeacher","useState","slots","setSlots","booking","setBooking","useEffect","load","res","av","adminAPI","getUserById","data","e","availabilityAPI","getAvailability","nextDays","useMemo","now","Date","Array","from","length","map","_","i","d","setDate","getDate","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","title","name","jsxs","div","className","education","specialties","join","dayStr","toDateString","daySlots","filter","ts","s","start","date","toLocaleDateString","span","idx","label","toLocaleTimeString","hour","minute","button","onClick","toISOString","toLocaleString","reservationAPI","createReservation","teacherId","startTime","alert"],"sourceRoot":""}