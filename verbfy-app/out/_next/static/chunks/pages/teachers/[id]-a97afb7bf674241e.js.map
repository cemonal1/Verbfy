{"version":3,"file":"static/chunks/pages/teachers/[id]-a97afb7bf674241e.js","mappings":"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","sources":["webpack://_N_E/?fdcc","webpack://_N_E/./pages/teachers/[id].tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/teachers/[id]\",\n      function () {\n        return require(\"private-next-pages/teachers/[id].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/teachers/[id]\"])\n      });\n    }\n  ","import React, { useEffect, useMemo, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { useI18n } from '@/lib/i18n';\nimport { adminAPI, reservationAPI, availabilityAPI } from '@/lib/api';\n\nexport default function TeacherDetailPage() {\n  const router = useRouter();\n  const { id } = router.query as { id?: string };\n  const { t } = useI18n();\n  const [teacher, setTeacher] = useState<any | null>(null);\n  const [slots, setSlots] = useState<any[]>([]);\n  const [booking, setBooking] = useState<{start?: string}|null>(null);\n\n  useEffect(() => {\n    if (!id) return;\n    const load = async () => {\n      try {\n        const res = await adminAPI.getUserById(id);\n        setTeacher(res.data?.data ?? null);\n      } catch {}\n\n      try {\n        const av = await availabilityAPI.getAvailability(id as string);\n        setSlots(av.data?.data ?? av.data ?? []);\n      } catch {}\n    };\n    load();\n  }, [id]);\n\n  const nextDays = useMemo(() => {\n    const now = new Date();\n    return Array.from({ length: 7 }).map((_, i) => {\n      const d = new Date(now);\n      d.setDate(now.getDate() + i);\n      return d;\n    });\n  }, []);\n\n  return (\n    <DashboardLayout title={teacher?.name || t('teachers.detail','Teacher')}>\n      {!teacher ? (\n        <div className=\"p-8 text-center text-gray-500\">{t('common.loading','Loading...')}</div>\n      ) : (\n        <div className=\"space-y-4\">\n          <div className=\"rounded-lg border p-4\">\n            <div className=\"text-xl font-semibold\">{teacher.name}</div>\n            <div className=\"text-gray-600\">{teacher.education || ''}</div>\n            <div className=\"mt-2 text-sm text-gray-600\">{teacher.specialties?.join(', ')}</div>\n          </div>\n          {/* Availability grid */}\n          <div className=\"rounded-lg border p-4 bg-white\">\n            <div className=\"text-lg font-medium mb-3\">{t('teachers.availability','Availability (next 7 days)')}</div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n              {nextDays.map((d) => {\n                const dayStr = d.toDateString();\n                const daySlots = (slots || []).filter((s: any) => {\n                  const ts = new Date(s.start || s.date || s).toDateString();\n                  return ts === dayStr;\n                });\n                return (\n                  <div key={dayStr} className=\"border rounded-md p-3\">\n                    <div className=\"text-sm font-medium text-gray-900\">{d.toLocaleDateString()}</div>\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                      {daySlots.length === 0 ? (\n                        <span className=\"text-xs text-gray-500\">{t('teachers.noSlots','No slots')}</span>\n                      ) : (\n                        daySlots.map((s: any, idx: number) => {\n                          const start = new Date(s.start || s.date || s);\n                          const label = start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n                          return (\n                            <button\n                              key={idx}\n                              onClick={() => setBooking({ start: start.toISOString() })}\n                              className=\"text-xs px-2 py-1 rounded border hover:bg-blue-50\"\n                            >\n                              {label}\n                            </button>\n                          );\n                        })\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Booking action */}\n          {booking?.start && (\n            <div className=\"rounded-lg border p-4 bg-white flex items-center justify-between\">\n              <div className=\"text-sm text-gray-700\">\n                {t('teachers.selected','Selected')}: {new Date(booking.start).toLocaleString()}\n              </div>\n              <button\n                onClick={async () => {\n                  try {\n                    await reservationAPI.createReservation({ teacherId: id, startTime: booking.start });\n                    setBooking(null);\n                    alert(t('teachers.booked','Reservation created'));\n                  } catch (e) {\n                    alert(t('teachers.bookError','Could not create reservation'));\n                  }\n                }}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n              >\n                {t('teachers.book','Book Lesson')}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </DashboardLayout>\n  );\n}\n\n\n"],"names":["window","__NEXT_P","push","__webpack_require__","TeacherDetailPage","teacher","id","router","useRouter","query","t","useI18n","setTeacher","useState","slots","setSlots","booking","setBooking","useEffect","load","res","av","adminAPI","getUserById","data","e","availabilityAPI","getAvailability","nextDays","useMemo","now","Date","Array","from","length","map","_","i","d","setDate","getDate","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","title","name","jsxs","div","className","education","specialties","join","dayStr","toDateString","daySlots","filter","ts","s","start","date","toLocaleDateString","span","idx","label","toLocaleTimeString","hour","minute","button","onClick","toISOString","toLocaleString","reservationAPI","createReservation","teacherId","startTime","alert"],"sourceRoot":""}