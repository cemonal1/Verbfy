(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[205],{43362:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cefr-tests/result/[attemptId]",function(){return t(19344)}])},19344:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var r=t(85893),a=t(67294),l=t(11163),n=t(32798);let i=e=>{let{attemptId:s,onRetake:t}=e,i=(0,l.useRouter)(),[d,c]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s&&h()},[s]);let h=async()=>{try{u(!0);let[e,t]=await Promise.all([n.Vm.getTestAttempt(s),n.Vm.getTest(s.split("-")[0])]);c(e),x(t)}catch(e){}finally{u(!1)}},g=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600",j=e=>({grammar:"\uD83D\uDCDD",reading:"\uD83D\uDCD6",writing:"✍️",speaking:"\uD83D\uDDE3️",listening:"\uD83D\uDC42",vocabulary:"\uD83D\uDCDA"})[e]||"\uD83D\uDCCA";if(o)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading results..."})]})});if(!d||!m)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-red-600",children:"Results not found"})})});let p=d.score/d.maxScore*100,b=d.isPassed;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:m.title}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,r.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat({A1:"bg-red-100 text-red-800",A2:"bg-orange-100 text-orange-800",B1:"bg-yellow-100 text-yellow-800",B2:"bg-green-100 text-green-800",C1:"bg-blue-100 text-blue-800",C2:"bg-purple-100 text-purple-800"}[m.cefrLevel]||"bg-gray-100 text-gray-800"),children:m.cefrLevel}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(d.completedAt||"").toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-6xl font-bold mb-2",children:(0,r.jsxs)("span",{className:g(p),children:[p.toFixed(1),"%"]})}),(0,r.jsxs)("div",{className:"text-2xl font-semibold text-gray-700 mb-2",children:[d.score," / ",d.maxScore," points"]}),(0,r.jsx)("div",{className:"text-lg font-medium ".concat(b?"text-green-600":"text-red-600"),children:b?"✅ Passed":"❌ Not Passed"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Time Spent:"})," ",Math.floor(d.timeSpent/60),"m ",d.timeSpent%60,"s"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Questions Answered:"})," ",d.answers.length]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Skill Breakdown"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(d.skills).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"text-center p-4 border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:j(s)}),(0,r.jsx)("div",{className:"font-medium text-gray-900 capitalize",children:s}),(0,r.jsxs)("div",{className:"text-lg font-bold ".concat(g(t)),children:[t,"%"]})]},s)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Detailed Feedback"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Overall Assessment"}),(0,r.jsx)("p",{className:"text-gray-700",children:d.feedback.overall})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-green-700 mb-2",children:"✅ Your Strengths"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:d.feedback.strengths.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-orange-700 mb-2",children:"\uD83D\uDD27 Areas for Improvement"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:d.feedback.areasForImprovement.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-700 mb-2",children:"\uD83D\uDCA1 Recommendations"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:d.feedback.recommendations.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Question Review"}),(0,r.jsx)("div",{className:"space-y-4",children:d.answers.map((e,s)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["Question ",s+1]}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(e.isCorrect?"text-green-600":"text-red-600"),children:e.isCorrect?"✅ Correct":"❌ Incorrect"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:e.question}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-600",children:"Your Answer:"}),(0,r.jsx)("p",{className:"text-gray-900",children:Array.isArray(e.studentAnswer)?e.studentAnswer.join(", "):e.studentAnswer})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-600",children:"Correct Answer:"}),(0,r.jsx)("p",{className:"text-gray-900",children:Array.isArray(e.correctAnswer)?e.correctAnswer.join(", "):e.correctAnswer})]})]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Points: ",e.points," / ",e.maxPoints]})]},s))})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)("button",{onClick:()=>i.push("/cefr-tests"),className:"px-6 py-3 bg-gray-600 text-white font-medium rounded-md hover:bg-gray-700 transition-colors",children:"Browse More Tests"}),t&&(0,r.jsx)("button",{onClick:t,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Retake Test"}),(0,r.jsx)("button",{onClick:()=>i.push("/dashboard"),className:"px-6 py-3 bg-green-600 text-white font-medium rounded-md hover:bg-green-700 transition-colors",children:"Go to Dashboard"})]})})]})})};var d=t(10571);function c(){let e=(0,l.useRouter)(),{attemptId:s}=e.query;return s&&"string"==typeof s?(0,r.jsx)(d.Z,{title:"Test Results",children:(0,r.jsx)(i,{attemptId:s,onRetake:()=>{e.push("/cefr-tests")}})}):(0,r.jsx)(d.Z,{title:"Invalid Attempt",children:(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-red-600 text-lg",children:"Invalid attempt ID"})})})}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,1493,2888,5514,179],function(){return e(e.s=43362)}),_N_E=e.O()}]);