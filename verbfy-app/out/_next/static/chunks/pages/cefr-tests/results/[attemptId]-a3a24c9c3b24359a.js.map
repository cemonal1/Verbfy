{"version":3,"file":"static/chunks/pages/cefr-tests/results/[attemptId]-a3a24c9c3b24359a.js","mappings":"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","sources":["webpack://_N_E/?d615","webpack://_N_E/./pages/cefr-tests/results/[attemptId].tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/cefr-tests/results/[attemptId]\",\n      function () {\n        return require(\"private-next-pages/cefr-tests/results/[attemptId].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/cefr-tests/results/[attemptId]\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\r\nimport Head from 'next/head';\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { useAuthContext } from '@/context/AuthContext';\r\nimport { cefrTestsAPI } from '@/lib/api';\r\n\r\nexport default function CEFRTestResultPage() {\r\n  const router = useRouter();\r\n  const { attemptId } = router.query;\r\n  const { user } = useAuthContext();\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState<any>(null);\r\n  const [showInfo, setShowInfo] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    if (!attemptId || typeof attemptId !== 'string') return;\r\n    let abort = false;\r\n    const run = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // Prefer immediate sessionStorage payload set by submit flow\r\n        let res: any = null;\r\n        try {\r\n          const cached = typeof window !== 'undefined' ? window.sessionStorage.getItem(`cefr_result_${attemptId}`) : null;\r\n          if (cached) res = JSON.parse(cached);\r\n        } catch {}\r\n        // If not in sessionStorage, we skip backend fetch to avoid 404 on missing endpoint\r\n        if (!abort) setData(res);\r\n      } finally {\r\n        if (!abort) setLoading(false);\r\n      }\r\n    };\r\n    run();\r\n    return () => { abort = true; };\r\n  }, [attemptId]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      <Head>\r\n        <title>CEFR Result - Verbfy</title>\r\n      </Head>\r\n      <main className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\r\n        <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-6\">Test Sonucu</h1>\r\n\r\n        {loading ? (\r\n          <div className=\"text-gray-600\">Yükleniyor...</div>\r\n        ) : (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-white border border-gray-200 rounded-xl p-6 shadow-sm\">\r\n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\r\n                <div>\r\n                  <p className=\"text-gray-700\">Genel Skor</p>\r\n                  <p className=\"text-3xl font-bold\">{data?.score ?? '--'} / {data?.maxScore ?? '--'}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-gray-700\">Önerilen CEFR</p>\r\n                  <p className=\"text-3xl font-bold text-blue-700\">{(data as any)?.recommendedLevel ?? (data as any)?.cefrLevel ?? '--'}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n                <div className=\"bg-blue-50 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-xs text-blue-800\">Grammar&Use</div>\r\n                  <div className=\"text-lg font-semibold\">{(data as any)?.sectionScores?.grammarUse ?? '--'}</div>\r\n                </div>\r\n                <div className=\"bg-green-50 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-xs text-green-800\">Vocabulary</div>\r\n                  <div className=\"text-lg font-semibold\">{(data as any)?.sectionScores?.vocabulary ?? '--'}</div>\r\n                </div>\r\n                <div className=\"bg-purple-50 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-xs text-purple-800\">Reading</div>\r\n                  <div className=\"text-lg font-semibold\">{(data as any)?.sectionScores?.reading ?? '--'}</div>\r\n                </div>\r\n                <div className=\"bg-amber-50 rounded-lg p-3 text-center\">\r\n                  <div className=\"text-xs text-amber-800\">Advanced</div>\r\n                  <div className=\"text-lg font-semibold\">{(data as any)?.sectionScores?.advanced ?? '--'}</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 text-sm text-gray-600\">\r\n                <p>Bağlayıcı kural (sınırda): Öncelik sırası Reading → Grammar → Vocabulary → Advanced.</p>\r\n                {(data as any)?.hasLongWrongStreak && (\r\n                  <p className=\"text-amber-700 mt-1\">6+ ardışık yanlış/boş algılandı: bir seviye aşağıdan başlatma önerildi.</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Bilgilendirme Bloğu (CEFR/ALTE) */}\r\n            <div className=\"bg-white border border-gray-200 rounded-xl p-6 shadow-sm\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h2 className=\"text-lg font-semibold\">Sınav Bilgilendirme</h2>\r\n                <button onClick={() => setShowInfo(!showInfo)} className=\"text-sm px-3 py-1 rounded-md bg-gray-100 hover:bg-gray-200\">\r\n                  {showInfo ? 'Kapat' : 'Detayları Göster'}\r\n                </button>\r\n              </div>\r\n              {showInfo && (\r\n                <div className=\"mt-4 text-sm text-gray-700 space-y-4\">\r\n                  <p>\r\n                    Bu yerleştirme testi CEFR (Avrupa Dilleri Ortak Çerçevesi) düzeyleriyle hizalıdır. Çoktan seçmeli soru formatı, nesnel değerlendirme ve yüksek tutarlılık sağlar.\r\n                    Değerlendirme sonuçları seviyelere dönüştürülür ve eğitim planınıza başlangıç noktası olarak kullanılır.\r\n                  </p>\r\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                    <p className=\"font-medium mb-2\">Örnek Skor Dönüşümü</p>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <p className=\"text-xs uppercase tracking-wide text-gray-500\">50 soruluk test</p>\r\n                        <ul className=\"mt-2 space-y-1\">\r\n                          <li>0–10 → A1</li>\r\n                          <li>11–20 → A2</li>\r\n                          <li>21–30 → B1</li>\r\n                          <li>31–40 → B2</li>\r\n                          <li>41–46 → C1</li>\r\n                          <li>47–50 → C2</li>\r\n                        </ul>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs uppercase tracking-wide text-gray-500\">60 soruluk test</p>\r\n                        <ul className=\"mt-2 space-y-1\">\r\n                          <li>0–29 → B1</li>\r\n                          <li>30–44 → B2</li>\r\n                          <li>45–55 → C1</li>\r\n                          <li>56–60 → C2</li>\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <ul className=\"list-disc pl-5 space-y-1\">\r\n                    <li>Bağlayıcı kararlar için Reading → Grammar → Vocabulary → Advanced bölüm skorları önceliklendirilir.</li>\r\n                    <li>Tahmini azaltmak için ardışık 6+ yanlış/boş varsa bir seviye aşağıdan başlatma önerilir.</li>\r\n                    <li>Seviye önerileri CEFR/ALTE kılavuzlarıyla uyumlu olacak şekilde yorumlanır.</li>\r\n                  </ul>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Not: CEFR ve ALTE kılavuzları doğrultusunda geliştirilen testler, makineyle puanlanabilir ve geçerlik-güvenirlik ilkelerine göre tasarlanır.\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"bg-white border border-gray-200 rounded-xl p-6 shadow-sm\">\r\n              <h2 className=\"text-lg font-semibold mb-3\">Yorumlama ve Öneriler</h2>\r\n              <ul className=\"list-disc pl-5 space-y-1 text-gray-700\">\r\n                <li>Genel bant: 0–10 A1, 11–20 A2, 21–30 B1, 31–40 B2, 41–46 C1, 47–50 C2.</li>\r\n                <li>Sınır durumunda (ör. 20/50, 30/50, 40/50) iki bölüm üst bandı destekliyorsa üst banda yükseltin.</li>\r\n                <li>Proje akışı: Önerilen seviyeye uygun ilk modül dersiyle başlayın.</li>\r\n              </ul>\r\n              <div className=\"mt-4 flex flex-wrap gap-3\">\r\n                {(() => {\r\n                  const level = (data as any)?.recommendedLevel || (data as any)?.cefrLevel;\r\n                  let path = '/verbfy-lessons';\r\n                  if (level === 'B1') path = '/verbfy-read';\r\n                  if (level === 'B2') path = '/verbfy-grammar';\r\n                  if (level === 'C1') path = '/verbfy-talk';\r\n                  if (level === 'C2') path = '/verbfy-read';\r\n                  return (\r\n                    <Link href={path} className=\"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700\">Önerilen Dersi Başlat</Link>\r\n                  );\r\n                })()}\r\n                <Link href=\"/placement\" className=\"px-4 py-2 rounded-md bg-gray-100 text-gray-800 hover:bg-gray-200\">Başka Test Seç</Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-right\">\r\n              <Link href=\"/dashboard\" className=\"text-blue-700 hover:underline\">Panele dön</Link>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":["window","__NEXT_P","push","__webpack_require__","CEFRTestResultPage","_data_sectionScores","_data_sectionScores1","_data_sectionScores2","_data_sectionScores3","data","_data_recommendedLevel","_ref","_data_sectionScores_grammarUse","_data_sectionScores_vocabulary","_data_sectionScores_reading","_data_sectionScores_advanced","attemptId","router","useRouter","query","user","useAuthContext","loading","setLoading","useState","setData","showInfo","setShowInfo","useEffect","abort","run","res","cached","sessionStorage","getItem","concat","JSON","parse","e","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","className","jsx","Head","title","main","h1","p","score","maxScore","recommendedLevel","cefrLevel","sectionScores","grammarUse","vocabulary","reading","advanced","hasLongWrongStreak","h2","button","onClick","ul","li","level","path","Link","href"],"sourceRoot":""}