{"version":3,"file":"static/chunks/pages/materials/[id]-aa8bab601fa699c9.js","mappings":"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","sources":["webpack://_N_E/?96e0","webpack://_N_E/./pages/materials/[id].tsx","webpack://_N_E/./src/types/materials.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/materials/[id]\",\n      function () {\n        return require(\"private-next-pages/materials/[id].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/materials/[id]\"])\n      });\n    }\n  ","import React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { toast } from 'react-hot-toast';\nimport api from '@/lib/api';\nimport { Material, getFileTypeIcon, getFileTypeLabel, formatFileSize, formatDate } from '@/types/materials';\nimport { useAuth } from '@/context/AuthContext';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\n\nexport default function MaterialPreviewPage() {\n  const router = useRouter();\n  const { id } = router.query;\n  const { user } = useAuth();\n  \n  const [material, setMaterial] = useState<Material | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isDownloading, setIsDownloading] = useState(false);\n\n  // Check permissions\n  const canDelete = user?.role === 'teacher' || user?.role === 'admin';\n  const isOwner = material?.uploaderId._id === user?._id;\n  const canManage = canDelete && (isOwner || user?.role === 'admin');\n\n  // Fetch material details\n  const fetchMaterial = async () => {\n    if (!id) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await api.get(`/api/materials/${id}`);\n      \n      if (response.data.success) {\n        setMaterial(response.data.data);\n      }\n    } catch (error: any) {\n      console.error('Error fetching material:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to load material';\n      setError(errorMessage);\n      toast.error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (id) {\n      fetchMaterial();\n    }\n  }, [id]);\n\n  // Handle download\n  const handleDownload = async () => {\n    if (!material) return;\n\n    setIsDownloading(true);\n    try {\n      const response = await api.get(`/api/materials/${material._id}/download`, {\n        responseType: 'blob'\n      });\n\n      // Create download link\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', material.originalName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      window.URL.revokeObjectURL(url);\n\n      toast.success('Download started');\n    } catch (error: any) {\n      console.error('Download error:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to download material';\n      toast.error(errorMessage);\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!material || !canManage) return;\n\n    if (!confirm('Are you sure you want to delete this material? This action cannot be undone.')) {\n      return;\n    }\n\n    try {\n      const response = await api.delete(`/api/materials/${material._id}`);\n      \n      if (response.data.success) {\n        toast.success('Material deleted successfully');\n        router.push('/materials');\n      }\n    } catch (error: any) {\n      console.error('Delete error:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to delete material';\n      toast.error(errorMessage);\n    }\n  };\n\n  // Get preview component based on file type\n  const getPreviewComponent = () => {\n    if (!material) return null;\n\n    const fileType = material.type;\n    const previewUrl = `/api/materials/${material._id}/preview`;\n\n    switch (fileType) {\n      case 'image':\n        return (\n          <div className=\"flex justify-center\">\n            <img \n              src={previewUrl} \n              alt={material.originalName}\n              className=\"max-w-full h-auto rounded-lg shadow-lg\"\n            />\n          </div>\n        );\n      \n      case 'video':\n        return (\n          <div className=\"flex justify-center\">\n            <video \n              controls \n              className=\"max-w-full h-auto rounded-lg shadow-lg\"\n            >\n              <source src={previewUrl} type={material.mimeType} />\n              Your browser does not support the video tag.\n            </video>\n          </div>\n        );\n      \n      case 'pdf':\n        return (\n          <div className=\"w-full h-96\">\n            <iframe\n              src={previewUrl}\n              className=\"w-full h-full border rounded-lg\"\n              title={material.originalName}\n            />\n          </div>\n        );\n      \n      default:\n        return (\n          <div className=\"text-center py-12\">\n            <div className=\"text-gray-400 text-6xl mb-4\">\n              {getFileTypeIcon(material.type)}\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {material.originalName}\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              This file type cannot be previewed directly.\n            </p>\n            <button\n              onClick={handleDownload}\n              disabled={isDownloading}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {isDownloading ? 'Downloading...' : 'Download File'}\n            </button>\n          </div>\n        );\n    }\n  };\n\n  // Loading state\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"p-6\">\n          <div className=\"animate-pulse\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/3 mb-6\"></div>\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  // Error state\n  if (error || !material) {\n    return (\n      <DashboardLayout>\n        <div className=\"p-6\">\n          <div className=\"text-center py-12\">\n            <div className=\"text-gray-400 text-6xl mb-4\">❌</div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Material Not Found\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              {error || 'The requested material could not be found.'}\n            </p>\n            <button\n              onClick={() => router.push('/materials')}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n            >\n              Back to Materials\n            </button>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"p-6\">\n        {/* Header */}\n        <div className=\"flex justify-between items-start mb-6\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              {material.originalName}\n            </h1>\n            <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n              <span className=\"flex items-center\">\n                {getFileTypeIcon(material.type)}\n                <span className=\"ml-1\">{getFileTypeLabel(material.type)}</span>\n              </span>\n              <span>{formatFileSize(material.fileSize)}</span>\n              <span>Uploaded {formatDate(material.createdAt)}</span>\n            </div>\n          </div>\n          \n          <div className=\"flex space-x-2\">\n            <button\n              onClick={handleDownload}\n              disabled={isDownloading}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {isDownloading ? 'Downloading...' : 'Download'}\n            </button>\n            \n            {canManage && (\n              <button\n                onClick={handleDelete}\n                className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700\"\n              >\n                Delete\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Tags */}\n        {material.tags && material.tags.length > 0 && (\n          <div className=\"mb-6\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2\">Tags:</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {material.tags.map((tag, index) => (\n                <span\n                  key={index}\n                  className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-sm\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Preview */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Preview</h3>\n          {getPreviewComponent()}\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n} ","export interface Material {\n  _id: string;\n  uploaderId: {\n    _id: string;\n    name: string;\n    email: string;\n    role: 'student' | 'teacher' | 'admin';\n  };\n  originalName: string;\n  savedName: string;\n  type: 'pdf' | 'image' | 'video' | 'document' | 'audio';\n  mimeType: string;\n  fileSize: number;\n  tags: string[];\n  role: 'teacher' | 'student' | 'admin';\n  description?: string;\n  isPublic: boolean;\n  downloadCount: number;\n  createdAt: string;\n  updatedAt: string;\n  previewURL?: string;\n}\n\nexport interface MaterialFilters {\n  type: string;\n  tags: string;\n  search: string;\n  isPublic: string;\n  uploaderId?: string;\n  page?: number;\n  limit?: number;\n}\n\nexport interface MaterialUploadData {\n  file: File;\n  tags?: string;\n  description?: string;\n  isPublic?: boolean;\n}\n\nexport interface MaterialUpdateData {\n  tags?: string;\n  description?: string;\n  isPublic?: boolean;\n}\n\nexport interface MaterialsResponse {\n  success: boolean;\n  data: {\n    materials: Material[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      pages: number;\n    };\n  };\n  message: string;\n}\n\nexport interface MaterialResponse {\n  success: boolean;\n  data: Material;\n  message: string;\n}\n\nexport interface UploadResponse {\n  success: boolean;\n  data: Material;\n  message: string;\n}\n\n// File type configurations\nexport const FILE_TYPES = {\n  pdf: {\n    label: 'PDF Document',\n    icon: '📄',\n    extensions: ['.pdf'],\n    mimeTypes: ['application/pdf']\n  },\n  image: {\n    label: 'Image',\n    icon: '🖼️',\n    extensions: ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\n    mimeTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\n  },\n  video: {\n    label: 'Video',\n    icon: '🎥',\n    extensions: ['.mp4', '.webm', '.ogg', '.avi'],\n    mimeTypes: ['video/mp4', 'video/webm', 'video/ogg', 'video/avi']\n  },\n  document: {\n    label: 'Document',\n    icon: '📝',\n    extensions: ['.doc', '.docx', '.txt'],\n    mimeTypes: [\n      'application/msword',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'text/plain'\n    ]\n  },\n  audio: {\n    label: 'Audio',\n    icon: '🎵',\n    extensions: ['.mp3', '.wav', '.ogg'],\n    mimeTypes: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/mp3']\n  }\n} as const;\n\nexport const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\n\nexport const getFileTypeIcon = (typeOrMimeType: Material['type'] | string): string => {\n  // If it's a MIME type, determine the type from it\n  if (typeOrMimeType.includes('/')) {\n    if (typeOrMimeType.startsWith('image/')) return '🖼️';\n    if (typeOrMimeType.startsWith('video/')) return '🎥';\n    if (typeOrMimeType.startsWith('audio/')) return '🎵';\n    if (typeOrMimeType === 'application/pdf') return '📄';\n    return '📝';\n  }\n  \n  // If it's a type string, use the existing logic\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.icon || '📄';\n};\n\nexport const getFileTypeLabel = (typeOrMimeType: Material['type'] | string): string => {\n  // If it's a MIME type, determine the type from it\n  if (typeOrMimeType.includes('/')) {\n    if (typeOrMimeType.startsWith('image/')) return 'Image';\n    if (typeOrMimeType.startsWith('video/')) return 'Video';\n    if (typeOrMimeType.startsWith('audio/')) return 'Audio';\n    if (typeOrMimeType === 'application/pdf') return 'PDF Document';\n    return 'Document';\n  }\n  \n  // If it's a type string, use the existing logic\n  return FILE_TYPES[typeOrMimeType as Material['type']]?.label || 'File';\n};\n\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes';\n  \n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\nexport const formatDate = (dateString: string): string => {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","MaterialPreviewPage","router","useRouter","id","query","user","useAuth","material","setMaterial","useState","loading","setLoading","error","setError","isDownloading","setIsDownloading","canDelete","role","isOwner","uploaderId","_id","canManage","fetchMaterial","response","api","get","concat","data","success","console","errorMessage","message","toast","useEffect","handleDownload","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","originalName","body","appendChild","click","remove","revokeObjectURL","handleDelete","confirm","delete","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","div","className","jsxs","h3","p","button","onClick","h1","span","getFileTypeIcon","type","getFileTypeLabel","formatFileSize","fileSize","formatDate","createdAt","disabled","tags","length","map","tag","index","getPreviewComponent","fileType","previewUrl","img","src","alt","video","controls","source","mimeType","iframe","title","FILE_TYPES","pdf","label","icon","extensions","mimeTypes","image","audio","MAX_FILE_SIZE","includes","startsWith","typeOrMimeType","bytes","i","Math","floor","log","parseFloat","pow","toFixed","sizes","date","Date","dateString","toLocaleDateString","year","month","day","hour","minute"],"sourceRoot":""}