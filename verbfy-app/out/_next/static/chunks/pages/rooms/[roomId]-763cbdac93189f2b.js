(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3198],{55353:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms/[roomId]",function(){return t(45649)}])},45649:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(85893),l=t(67294),r=t(11163),o=t(65705),n=t(36197),i=e=>{let{messages:s,sendMessage:t}=e,[r,o]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-bold",children:[e.username,":"]})," ",e.text]},e.id))}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&(t(r),o(""))},className:"p-2 border-t",children:(0,a.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),placeholder:"Type a message...",className:"w-full p-2 border rounded"})})]})},c=function(){let e=(0,r.useRouter)(),{user:s}=(0,n.Eu)(),{roomId:t}=e.query,{currentRoom:c,getRoomDetails:d,leaveRoom:u,loading:x,participants:m}=(0,o.J)(),[h,g]=(0,l.useState)(50),[b,v]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&"string"==typeof t&&d(t)},[t,d]);let f=s&&t?{self:"".concat(s.id,"-room-").concat(t),remote:void 0}:{self:"",remote:void 0},{localStream:N,remoteStreams:y,isMicOn:k,isCameraOn:w,toggleMic:C,toggleCamera:L,reconnect:S,status:M,error:R,muteStates:_,videoStates:I,toggleRemoteMute:z,toggleRemoteVideo:E}=function(e,s,t){let[a,r]=(0,l.useState)(null),[o,n]=(0,l.useState)({}),[i,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(!0),[x,m]=(0,l.useState)("disconnected"),[h,g]=(0,l.useState)(null),[b,v]=(0,l.useState)({}),[p,j]=(0,l.useState)({}),f=(0,l.useCallback)(()=>{c(!i)},[i]),N=(0,l.useCallback)(()=>{u(!d)},[d]);return{localStream:a,remoteStreams:o,isMicOn:i,isCameraOn:d,toggleMic:f,toggleCamera:N,reconnect:(0,l.useCallback)(()=>{console.log("Reconnecting to room:",e)},[e]),status:x,error:h,muteStates:b,videoStates:p,toggleRemoteMute:(0,l.useCallback)(e=>{v(s=>({...s,[e]:!s[e]}))},[]),toggleRemoteVideo:(0,l.useCallback)(e=>{j(s=>({...s,[e]:!s[e]}))},[])}}(t,0,m.map(e=>e.peerId)),{messages:W,sendMessage:H}=function(e){let[s,t]=(0,l.useState)([]);return{messages:s,sendMessage:(0,l.useCallback)(async s=>{console.log("Sending message:",s,"to room:",e);let a={id:Date.now().toString(),text:s,username:"You",timestamp:new Date};t(e=>[...e,a])},[e])}}(t),B=(0,l.useRef)({});(0,l.useEffect)(()=>{Object.entries(y).forEach(e=>{let[s,t]=e,a=B.current[s];a&&t&&(a.srcObject=t)})},[y]);let O=()=>{c&&(u(c.id),e.push("/dashboard"))},D=e=>{g(e)};return x||!c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-700",children:"Loading room..."})]})}):m.length>5?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,a.jsx)("h1",{className:"text-gray-900 text-xl font-semibold mb-2",children:"Room Full"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This room has reached its maximum capacity."}),(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Go to Dashboard"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-3 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-lg font-semibold text-gray-900",children:["Room: ",c.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[m.length," participant",1!==m.length?"s":""]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Status: ",M]}),(0,a.jsx)("button",{onClick:O,className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-sm transition-colors text-white",children:"Leave Room"})]})]})}),(0,a.jsxs)("div",{className:"flex-1 flex",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"flex-1 bg-gray-100 p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 h-full",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,a.jsx)("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm",children:"You"})}),(0,a.jsx)("video",{autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",ref:e=>{e&&N&&(e.srcObject=N)}}),!k&&(0,a.jsx)("div",{className:"absolute bottom-4 left-4 z-10",children:(0,a.jsx)("div",{className:"bg-red-500 text-white p-2 rounded-full",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"})})})})]})}),m.filter(e=>e.peerId!==f.self).map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,a.jsx)("div",{className:"bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm",children:e.name})}),(0,a.jsx)("video",{autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover",ref:s=>{B.current[e.peerId]=s,s&&y[e.peerId]&&(s.srcObject=y[e.peerId])}})]})},e.peerId))]})}),(0,a.jsx)("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,a.jsx)("button",{onClick:C,className:"p-3 rounded-full transition-colors ".concat(k?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-red-500 text-white"),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:k?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>v(!b),className:"p-3 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),b&&(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-white border border-gray-200 rounded-lg p-3 shadow-lg",children:[(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:h,onChange:e=>D(parseInt(e.target.value)),className:"w-24 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-600 mt-1",children:[h,"%"]})]})]}),(0,a.jsx)("button",{onClick:L,className:"p-3 rounded-full transition-colors ".concat(w?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-red-500 text-white"),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})}),(0,a.jsx)("button",{onClick:()=>{j(!p)},className:"p-3 rounded-full transition-colors ".concat(p?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,a.jsx)("button",{onClick:S,className:"p-3 rounded-full bg-yellow-500 text-white hover:bg-yellow-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,a.jsx)("button",{onClick:O,className:"p-3 rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),(0,a.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Participants"}),(0,a.jsx)("div",{className:"space-y-1",children:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(i,{messages:W,sendMessage:H})})]})]})]})}},65705:function(e,s,t){"use strict";t.d(s,{J:function(){return l}});var a=t(67294);function l(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(null),[r,o]=(0,a.useState)(!1),[n,i]=(0,a.useState)([]),c=(0,a.useCallback)(async()=>{o(!0),s([]),o(!1)},[]),d=(0,a.useCallback)(async(e,s)=>{console.log("Joining room:",e,s)},[]);return{rooms:e,currentRoom:t,loading:r,participants:n,getAvailableRooms:c,joinRoom:d,createRoom:(0,a.useCallback)(async(e,s,t,a)=>{console.log("Creating room:",{name:e,description:s,isPrivate:t,password:a})},[]),getRoomDetails:(0,a.useCallback)(async e=>{console.log("Getting room details:",e)},[]),leaveRoom:(0,a.useCallback)(async e=>{console.log("Leaving room:",e)},[])}}}},function(e){e.O(0,[1216,2888,179],function(){return e(e.s=55353)}),_N_E=e.O()}]);
//# sourceMappingURL=[roomId]-763cbdac93189f2b.js.map