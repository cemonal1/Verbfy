(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4110],{61815:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms",function(){return a(44868)}])},44868:function(e,s,a){"use strict";a.r(s);var t=a(85893),n=a(67294),l=a(11088),i=a(65705);s.default=function(){let{rooms:e,getAvailableRooms:s,joinRoom:a,createRoom:r}=(0,i.J)(),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[x,m]=(0,n.useState)({name:"",description:"",isPrivate:!1,password:""}),[p,h]=(0,n.useState)("");(0,n.useEffect)(()=>{s()},[s]);let g=async e=>{e.preventDefault(),await r(x.name,x.description,x.isPrivate,x.isPrivate?x.password:void 0),c(!1),m({name:"",description:"",isPrivate:!1,password:""})},b=async(e,s)=>{s?u({roomId:e,isPrivate:s}):await a(e)},v=async()=>{d&&(await a(d.roomId,p),u(null),h(""))};return(0,t.jsx)(l.Z,{allowedRoles:["teacher","student"],children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Conversation Rooms"}),(0,t.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Create Room"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.filter(e=>e.participants.length<e.maxParticipants).map(e=>(0,t.jsxs)("div",{className:"bg-white rounded shadow p-4 flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"font-bold text-lg",children:e.name}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:e.description}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Created by: ",e.createdBy]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Participants: ",e.participants.length,"/",e.maxParticipants]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("button",{onClick:()=>b(e.id,e.isPrivate),className:"bg-green-500 text-white px-3 py-1 rounded",children:"Join"}),e.isPrivate&&(0,t.jsx)("span",{className:"text-xs text-red-500",children:"Private"})]})]},e.id)),0===e.length&&(0,t.jsx)("div",{className:"text-gray-500 col-span-2",children:"No open rooms found."})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:"Create Room"}),(0,t.jsxs)("form",{onSubmit:g,className:"flex flex-col gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"Room Name",value:x.name,onChange:e=>m(s=>({...s,name:e.target.value})),className:"p-2 border rounded",required:!0}),(0,t.jsx)("textarea",{placeholder:"Description",value:x.description,onChange:e=>m(s=>({...s,description:e.target.value})),className:"p-2 border rounded"}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:x.isPrivate,onChange:e=>m(s=>({...s,isPrivate:e.target.checked}))})," Private Room"]}),x.isPrivate&&(0,t.jsx)("input",{type:"password",placeholder:"Password",value:x.password,onChange:e=>m(s=>({...s,password:e.target.value})),className:"p-2 border rounded",required:!0}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-3 py-1 rounded",children:"Create"}),(0,t.jsx)("button",{type:"button",onClick:()=>c(!1),className:"bg-gray-300 text-black px-3 py-1 rounded",children:"Cancel"})]})]})]})}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded shadow w-full max-w-md",children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:"Enter Room Password"}),(0,t.jsx)("input",{type:"password",placeholder:"Password",value:p,onChange:e=>h(e.target.value),className:"p-2 border rounded w-full mb-2"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("button",{onClick:v,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Join"}),(0,t.jsx)("button",{onClick:()=>u(null),className:"bg-gray-300 text-black px-3 py-1 rounded",children:"Cancel"})]})]})})]})})}},65705:function(e,s,a){"use strict";a.d(s,{J:function(){return n}});var t=a(67294);function n(){let[e,s]=(0,t.useState)([]),[a,n]=(0,t.useState)(null),[l,i]=(0,t.useState)(!1),[r,o]=(0,t.useState)([]),c=(0,t.useCallback)(async()=>{i(!0),s([]),i(!1)},[]),d=(0,t.useCallback)(async(e,s)=>{console.log("Joining room:",e,s)},[]);return{rooms:e,currentRoom:a,loading:l,participants:r,getAvailableRooms:c,joinRoom:d,createRoom:(0,t.useCallback)(async(e,s,a,t)=>{console.log("Creating room:",{name:e,description:s,isPrivate:a,password:t})},[]),getRoomDetails:(0,t.useCallback)(async e=>{console.log("Getting room details:",e)},[]),leaveRoom:(0,t.useCallback)(async e=>{console.log("Leaving room:",e)},[])}}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=61815)}),_N_E=e.O()}]);
//# sourceMappingURL=rooms-2e82ba7f5383b028.js.map