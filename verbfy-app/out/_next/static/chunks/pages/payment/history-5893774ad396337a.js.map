{"version":3,"file":"static/chunks/pages/payment/history-5893774ad396337a.js","mappings":"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","sources":["webpack://_N_E/?b5b5","webpack://_N_E/./pages/payment/history.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/payment/history\",\n      function () {\n        return require(\"private-next-pages/payment/history.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/payment/history\"])\n      });\n    }\n  ","import React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport PaymentHistoryTable from '@/components/payment/PaymentHistoryTable';\nimport { PaymentStats } from '@/types/payment';\nimport { paymentAPI } from '@/lib/api';\nimport { toast } from 'react-hot-toast';\nimport { \n  CreditCardIcon,\n  ChartBarIcon,\n  ClockIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\n\nexport default function PaymentHistoryPage() {\n  const { user } = useAuth();\n  const [stats, setStats] = useState<PaymentStats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadPaymentStats();\n  }, []);\n\n  const loadPaymentStats = async () => {\n    try {\n      setLoading(true);\n      const response = await paymentAPI.getPaymentStats();\n      \n      if (response.data.success) {\n        setStats(response.data.data);\n      }\n    } catch (error) {\n      console.error('Error loading payment stats:', error);\n      toast.error('Failed to load payment statistics');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD'\n    }).format(amount / 100); // Convert from cents\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 rounded w-1/4 mb-8\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"bg-white p-6 rounded-lg shadow\">\n                <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-4\"></div>\n                <div className=\"h-8 bg-gray-200 rounded w-1/3\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center mb-4\">\n            <CreditCardIcon className=\"h-8 w-8 text-blue-600 mr-3\" />\n            <h1 className=\"text-3xl font-bold text-gray-900\">Payments Unavailable</h1>\n          </div>\n          <p className=\"text-gray-600\">Payments are currently unavailable in your region.</p>\n        </div>\n\n        {/* Payment Statistics (optional when disabled) */}\n        {false && stats && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-2 bg-blue-100 rounded-lg\">\n                  <CreditCardIcon className=\"h-6 w-6 text-blue-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Total Payments</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.totalPayments ?? 0}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-2 bg-green-100 rounded-lg\">\n                  <ChartBarIcon className=\"h-6 w-6 text-green-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Total Spent</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">\n                    {formatCurrency(stats?.totalAmount ?? 0)}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-2 bg-purple-100 rounded-lg\">\n                  <ClockIcon className=\"h-6 w-6 text-purple-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Completed</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.completedPayments ?? 0}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow p-6\">\n              <div className=\"flex items-center\">\n                <div className=\"p-2 bg-red-100 rounded-lg\">\n                  <ExclamationTriangleIcon className=\"h-6 w-6 text-red-600\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-600\">Failed</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats?.failedPayments ?? 0}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Current subscription status */}\n        {user && (user.subscriptionStatus || user.lessonTokens) && (\n          <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Current Status</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {user.subscriptionStatus && (\n                <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600\">Subscription</p>\n                    <p className=\"text-lg font-semibold text-gray-900\">\n                      {user.subscriptionStatus === 'active' ? 'Active' : 'Inactive'}\n                    </p>\n                    {user.subscriptionType && (\n                      <p className=\"text-sm text-gray-500\">{user.subscriptionType}</p>\n                    )}\n                    {user.subscriptionExpiry && (\n                      <p className=\"text-sm text-gray-500\">\n                        Expires: {new Date(user.subscriptionExpiry).toLocaleDateString()}\n                      </p>\n                    )}\n                  </div>\n                  <div className={`px-3 py-1 rounded-full text-sm font-medium ${\n                    user.subscriptionStatus === 'active'\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {user.subscriptionStatus}\n                  </div>\n                </div>\n              )}\n\n              {user.lessonTokens !== undefined && (\n                <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600\">Lesson Tokens</p>\n                    <p className=\"text-lg font-semibold text-gray-900\">\n                      {user.lessonTokens} tokens\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      Available for booking lessons\n                    </p>\n                  </div>\n                  <div className=\"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                    {user.lessonTokens > 0 ? 'Available' : 'None'}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Payment History Table hidden while disabled */}\n\n        {/* Help section */}\n        <div className=\"mt-8 bg-gray-50 rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Need Help?</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"font-medium text-gray-900 mb-2\">Payment Issues</h4>\n              <p className=\"text-sm text-gray-600 mb-2\">\n                If you're experiencing payment problems or need a refund, please contact our support team.\n              </p>\n              <a href=\"/support\" className=\"text-sm text-blue-600 hover:text-blue-800\">\n                Contact Support →\n              </a>\n            </div>\n            <div>\n              <h4 className=\"font-medium text-gray-900 mb-2\">Account Questions</h4>\n              <p className=\"text-sm text-gray-600 mb-2\">\n                Have questions about your subscription or lesson tokens? Check our FAQ or reach out to us.\n              </p>\n              <a href=\"/faq\" className=\"text-sm text-blue-600 hover:text-blue-800\">\n                View FAQ →\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n} "],"names":["window","__NEXT_P","push","__webpack_require__","PaymentHistoryPage","user","useAuth","stats","setStats","useState","loading","setLoading","useEffect","loadPaymentStats","response","paymentAPI","getPaymentStats","data","success","error","console","toast","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","DashboardLayout","jsxs","div","className","map","_","i","CreditCardIcon","h1","p","subscriptionStatus","lessonTokens","h2","subscriptionType","subscriptionExpiry","Date","toLocaleDateString","concat","undefined","h3","h4","a","href"],"sourceRoot":""}