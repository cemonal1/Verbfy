(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{83236:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(5353)}])},5353:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(85893),a=s(67294),l=s(11163),o=s(41664),n=s.n(o),i=s(36197),c=s(32798),d=s(6642),u=s(25748),m=s(55797),x=s(54310),h=s(83454);function g(){let{email:e,setEmail:t,password:o,setPassword:g,loading:f,error:b,handleLogin:p}=function(){let{login:e,setUser:t,setAccessToken:s}=(0,i.Eu)(),r=(0,l.useRouter)(),[o,n]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),b=(0,a.useCallback)(()=>/.+@.+\..+/.test(o),[o]),p=(0,a.useCallback)(()=>b()&&u.length>0,[b,u]),y=(0,a.useCallback)(async()=>{if(!p()){f("Invalid credentials");return}h(!0),f("");try{let a=await c.kv.login({email:o,password:u}),l="data"in a?a.data:a,n=l.accessToken||l.token;n&&((0,c.nt)(n),s(n)),t(l.user),await e(o,u);let i=l.user.role;"student"===i?r.push("/student/dashboard"):"teacher"===i?r.push("/teacher/dashboard"):r.push("/dashboard")}catch(t){var a,l;let e=(null===(l=t.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||"Invalid credentials";f(e),(0,d._N)(e)}finally{h(!1)}},[o,u,p,e,t,s,r]);return{email:o,password:u,loading:x,error:g,setEmail:n,setPassword:m,setError:f,handleLogin:y,isValidEmail:b,isFormValid:p}}(),{t:y,locale:v,setLocale:w}=(0,x.Q)(),[j,N]=(0,a.useState)(!1);(0,l.useRouter)();let k=async t=>{t.preventDefault(),e&&o&&await p()},C=e=>{var t,r;let a=(h.env.NEXT_PUBLIC_API_BASE_URL||"https://api.verbfy.com").replace(/\/$/,""),l=(null===(t=window.top)||void 0===t?void 0:t.outerHeight)?Math.max(0,(window.top.outerHeight-600)/2):100,o=(null===(r=window.top)||void 0===r?void 0:r.outerWidth)?Math.max(0,(window.top.outerWidth-520)/2):100,n=window.open("".concat(a,"/api/auth/oauth/").concat(e),"oauthLogin","width=".concat(520,",height=").concat(600,",left=").concat(o,",top=").concat(l,",scrollbars=yes,resizable=yes")),i=e=>{let t=new URL(a).origin;if(e.origin!==t){console.warn("OAuth message from unexpected origin:",e.origin);return}let r=e.data||{};if(console.log("OAuth message received:",r),(null==r?void 0:r.type)==="oauth-success"&&(null==r?void 0:r.token)&&(null==r?void 0:r.user)){try{let{tokenStorage:e}=s(5704);e.setToken(r.token),e.setUser(r.user)}catch(e){}n&&n.close(),window.location.href="/dashboard"}else(null==r?void 0:r.type)==="oauth-error"&&(console.error("OAuth error:",r.message),n&&n.close(),alert("OAuth authentication failed. Please try again."))};window.addEventListener("message",i,{once:!1});let c=setInterval(()=>{(null==n?void 0:n.closed)&&(clearInterval(c),window.removeEventListener("message",i))},1e3)};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,r.jsx)("button",{onClick:()=>w("en"===v?"tr":"en"),className:"px-2 py-1 text-xs rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50","aria-label":"Toggle language",title:"en"===v?"T\xfcrk\xe7e":"English",children:"en"===v?"TR":"EN"})}),(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute -top-40 -right-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),(0,r.jsx)("div",{className:"absolute -bottom-40 -left-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-tr from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),(0,r.jsxs)("div",{className:"relative w-full max-w-sm sm:max-w-md space-y-6 sm:space-y-8",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4 sm:mb-6",children:(0,r.jsx)(m.Z,{size:88,withTitle:!1})}),(0,r.jsx)("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:"Verbing Up Your Language Skills!"}),(0,r.jsx)("p",{className:"text-gray-600 text-base sm:text-lg",children:y("auth.login.welcome","Welcome back to your learning journey")})]}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 sm:p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:y("auth.login.title","Sign in to your account")}),(0,r.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Continue your English learning adventure"})]}),(0,r.jsxs)("form",{className:"space-y-4 sm:space-y-6",onSubmit:k,children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:y("auth.login.email","Email address")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base",placeholder:y("auth.login.emailPlaceholder","Enter your email"),value:e,onChange:e=>t(e.target.value)}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,r.jsx)("i",{className:"fas fa-envelope text-gray-400"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:y("auth.login.password","Password")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"password",name:"password",type:j?"text":"password",autoComplete:"current-password",required:!0,className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base",placeholder:y("auth.login.passwordPlaceholder","Enter your password"),value:o,onChange:e=>g(e.target.value)}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>N(!j),children:(0,r.jsx)("i",{className:"fas ".concat(j?"fa-eye-slash":"fa-eye"," text-gray-400 hover:text-gray-600 transition-colors")})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:y("auth.login.remember","Remember me")})]}),(0,r.jsx)(n(),{href:"/forgot-password",className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline",children:y("auth.login.forgot","Forgot your password?")})]}),b&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("i",{className:"fas fa-exclamation-circle text-red-400 mt-0.5 mr-3"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:b})]})}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-2.5 sm:py-3 px-4 border border-transparent text-sm sm:text-base font-semibold rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl",children:f?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),y("auth.login.signingin","Signing in...")]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-sign-in-alt mr-2"}),y("auth.login.submit","Sign in")]})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:y("auth.login.or","Or continue with")})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,r.jsxs)("button",{onClick:()=>C("google"),className:"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]",children:[(0,r.jsx)("i",{className:"fab fa-google text-red-500 mr-3"}),y("auth.login.google","Sign in with Google")]}),(0,r.jsxs)("button",{onClick:()=>C("outlook"),className:"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]",children:[(0,r.jsx)("i",{className:"fas fa-envelope text-blue-500 mr-3"}),y("auth.login.outlook","Sign in with Outlook")]}),(0,r.jsxs)("button",{onClick:()=>C("apple"),className:"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]",children:[(0,r.jsx)("i",{className:"fab fa-apple text-gray-900 mr-3"}),y("auth.login.apple","Sign in with Apple")]})]})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:[y("auth.login.new","New to Verbfy?")," ",(0,r.jsx)(n(),{href:"/register",className:"font-semibold text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline",children:y("auth.login.join","Join Now")})]})}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4 text-sm text-gray-500",children:[(0,r.jsx)(n(),{href:"/privacy",className:"hover:text-gray-700 transition-colors",children:y("footer.privacy","Privacy Policy")}),(0,r.jsx)(n(),{href:"/terms",className:"hover:text-gray-700 transition-colors",children:y("footer.terms","Terms of Service")}),(0,r.jsx)(n(),{href:"/help",className:"hover:text-gray-700 transition-colors",children:y("footer.help","Help Center")})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["\xa9 2024 Verbfy. ",y("footer.rights","All rights reserved.")]})]})]}),(0,r.jsx)(u.Z,{})]})}function f(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)(n(),{href:"/forgot-password",className:"text-sm text-indigo-600 hover:underline",children:"Forgot password?"})})]})}},55797:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(85893);s(67294);var a=s(41664),l=s.n(a),o=s(25675),n=s.n(o);function i(e){let{size:t=40,withTitle:s=!1,href:a="/",className:o="",titleClassName:i="text-2xl font-extrabold text-gray-900 dark:text-white"}=e;return(0,r.jsxs)(l(),{href:a,className:"flex items-center justify-center ".concat(o),"aria-label":"Verbfy Home",children:[(0,r.jsx)(n(),{src:"/logo.png",alt:"Verbfy logo",width:t,height:t,priority:!0,className:"mx-auto"}),s&&(0,r.jsx)("span",{className:i,children:"Verbfy"})]})}},25748:function(e,t,s){"use strict";var r=s(85893);s(67294);var a=s(41664),l=s.n(a),o=s(36197);t.Z=e=>{let{className:t="",showText:s=!1}=e,{user:a}=(0,o.Eu)(),n=a?"student"===a.role?"/student/dashboard":"/teacher/dashboard":"/";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{href:n,className:"hidden lg:flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 ".concat(t),title:a?"Dashboard":"Anasayfa",children:[(0,r.jsx)("i",{className:"fas fa-home w-5 h-5 mr-2"}),s&&(0,r.jsx)("span",{children:a?"Dashboard":"Anasayfa"})]}),(0,r.jsx)(l(),{href:n,className:"lg:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",title:a?"Dashboard":"Anasayfa",children:(0,r.jsx)("span",{className:"text-white text-xl",children:"\uD83C\uDFE0"})})]})}},6642:function(e,t,s){"use strict";s.d(t,{_N:function(){return a},x9:function(){return l}});var r=s(56158);let a=e=>{r.Am.error(e)},l=e=>{r.Am.success(e)}}},function(e){e.O(0,[1216,2888,179],function(){return e(e.s=83236)}),_N_E=e.O()}]);
//# sourceMappingURL=login-82c26aa25b695568.js.map