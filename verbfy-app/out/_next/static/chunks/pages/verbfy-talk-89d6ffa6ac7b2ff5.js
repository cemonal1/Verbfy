(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1763],{54053:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verbfy-talk",function(){return a(99491)}])},99491:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(85893),l=a(67294),r=a(11163),n=a(11088),i=a(32798),o=a(72509),c=a(64964),d=a(32201),x=a(96019),m=a(68606),u=a(93681),p=a(35892),g=function(){let e=(0,r.useRouter)(),[s,a]=(0,l.useState)([]),[g,h]=(0,l.useState)(!0),[b,v]=(0,l.useState)(!1),[f,j]=(0,l.useState)({level:"All",isPrivate:!1,page:1,limit:10}),[y,N]=(0,l.useState)({page:1,limit:10,total:0,pages:0}),[w,k]=(0,l.useState)({name:"",description:"",isPrivate:!1,password:"",topic:"",level:"Mixed",maxParticipants:5}),C=(0,l.useCallback)(async()=>{try{h(!0);let e=await i.bl.getRooms(f);a((null==e?void 0:e.data)||[]),N((null==e?void 0:e.pagination)||{page:1,limit:10,total:0,pages:0})}catch(e){o.Am.error("Failed to load rooms"),a([]),N({page:1,limit:10,total:0,pages:0})}finally{h(!1)}},[f]);(0,l.useEffect)(()=>{C()},[C]);let P=async s=>{s.preventDefault();try{let s={...w};s.isPrivate||delete s.password;let a=await i.bl.createRoom(s);o.Am.success("Room created successfully!"),v(!1),k({name:"",description:"",isPrivate:!1,password:"",topic:"",level:"Mixed",maxParticipants:5}),C(),e.push("/verbfy-talk/".concat(a.data._id))}catch(s){let e=s instanceof Error&&"response"in s&&"object"==typeof s.response&&null!==s.response&&"data"in s.response&&"object"==typeof s.response.data&&null!==s.response.data&&"message"in s.response.data?String(s.response.data.message):"Failed to create room";o.Am.error(e)}},_=e=>{if(e.isPrivate){let s=prompt("Enter room password:");s&&A(e._id,s)}else A(e._id)},A=async(s,a)=>{try{e.push("/verbfy-talk/".concat(s))}catch(e){o.Am.error("Failed to join room")}},Z=e=>{switch(e){case"Beginner":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-green-500"});case"Intermediate":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-yellow-500"});case"Advanced":return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-red-500"});default:return(0,t.jsx)(c.Z,{className:"w-4 h-4 text-blue-500"})}},B=e=>{switch(e){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}};return(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(d.Z,{className:"w-8 h-8 text-blue-600"}),"VerbfyTalk"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Join conversation rooms with up to 5 people"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>e.push("/verbfy-talk/test-media"),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors text-sm",children:"Test Media"}),(0,t.jsxs)("button",{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),"Create Room"]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("select",{value:f.level,onChange:e=>j({...f,level:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"All",children:"All Levels"}),(0,t.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"Advanced",children:"Advanced"}),(0,t.jsx)("option",{value:"Mixed",children:"Mixed"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:f.isPrivate,onChange:e=>j({...f,isPrivate:e.target.checked}),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Show private rooms"})]})]})}),g?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},s))}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==s?void 0:s.map(e=>{var s;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:e.name}),e.isPrivate?(0,t.jsx)(m.Z,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}):(0,t.jsx)(x.Z,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),e.topic&&(0,t.jsxs)("div",{className:"text-sm text-blue-600 mb-3",children:["Topic: ",e.topic]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[Z(e.level),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(B(e.level)),children:e.level})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[e.activeParticipantCount||0,"/",e.maxParticipants]})]})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mb-4",children:["Created by ","string"==typeof e.createdBy?"Unknown":(null===(s=e.createdBy)||void 0===s?void 0:s.name)||"Unknown"]}),(0,t.jsx)("button",{onClick:()=>_(e),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Join Room"})]},e._id)})}),!g&&0===s.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.Z,{className:"w-12 h-12 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No rooms available"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Be the first to create a conversation room!"}),(0,t.jsxs)("button",{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),"Create Room"]})]}),y.pages>1&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsx)("div",{className:"flex gap-2",children:Array.from({length:y.pages},(e,s)=>(0,t.jsx)("button",{onClick:()=>j({...f,page:s+1}),className:"px-3 py-2 rounded-md ".concat(f.page===s+1?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:s+1},s))})}),b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create VerbfyTalk Room"}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Name"}),(0,t.jsx)("input",{type:"text",value:w.name,onChange:e=>k({...w,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:w.description,onChange:e=>k({...w,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic (Optional)"}),(0,t.jsx)("input",{type:"text",value:w.topic,onChange:e=>k({...w,topic:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Travel, Business, Daily Life"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,t.jsxs)("select",{value:w.level,onChange:e=>k({...w,level:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Mixed",children:"Mixed"}),(0,t.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,t.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,t.jsx)("option",{value:"Advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Participants"}),(0,t.jsxs)("select",{value:w.maxParticipants,onChange:e=>k({...w,maxParticipants:Number(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:2,children:"2 people"}),(0,t.jsx)("option",{value:3,children:"3 people"}),(0,t.jsx)("option",{value:4,children:"4 people"}),(0,t.jsx)("option",{value:5,children:"5 people"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:w.isPrivate,onChange:e=>k({...w,isPrivate:e.target.checked}),className:"rounded"}),(0,t.jsx)("label",{className:"text-sm text-gray-700",children:"Private room"})]}),w.isPrivate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:w.password,onChange:e=>k({...w,password:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition-colors",children:"Create Room"}),(0,t.jsx)("button",{type:"button",onClick:()=>v(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors",children:"Cancel"})]})]})]})})})]})})}}},function(e){e.O(0,[5522,2138,9226,9496,8484,437,1883,7,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,1088,1493,2888,5514,179],function(){return e(e.s=54053)}),_N_E=e.O()}]);