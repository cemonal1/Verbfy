{"version":3,"file":"static/chunks/pages/verbfy-listen-0b879caf5ac8d46b.js","mappings":"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","sources":["webpack://_N_E/?2c0d","webpack://_N_E/./pages/verbfy-listen/index.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/verbfy-listen\",\n      function () {\n        return require(\"private-next-pages/verbfy-listen/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/verbfy-listen\"])\n      });\n    }\n  ","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Head from 'next/head';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { freeMaterialsAPI } from '@/lib/api';\r\nimport { useI18n } from '@/lib/i18n';\r\n\r\ntype FreeMaterial = {\r\n  _id?: string;\r\n  id?: string;\r\n  title: string;\r\n  description?: string;\r\n  category?: string;\r\n  level?: string;\r\n  thumbnailUrl?: string;\r\n};\r\n\r\nexport default function VerbfyListenPage() {\r\n  const { t, locale } = useI18n();\r\n  const [materials, setMaterials] = useState<FreeMaterial[]>([]);\r\n  const [levels, setLevels] = useState<string[]>([]);\r\n  const [search, setSearch] = useState('');\r\n  const [level, setLevel] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [selected, setSelected] = useState<Record<string, FreeMaterial>>({});\r\n\r\n  const category = useMemo(() => 'Listening', []);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const run = async () => {\r\n      try {\r\n        const levelResp = await freeMaterialsAPI.getLevels();\r\n        if (isMounted && Array.isArray(levelResp?.data)) setLevels(levelResp.data);\r\n      } catch {}\r\n    };\r\n    run();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let abort = false;\r\n    const load = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await freeMaterialsAPI.getMaterials({ category, level, search });\r\n        if (!abort) setMaterials(res?.data || res || []);\r\n      } catch {\r\n        if (!abort) setMaterials([]);\r\n      } finally {\r\n        if (!abort) setLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => {\r\n      abort = true;\r\n    };\r\n  }, [category, level, search]);\r\n\r\n  const toggleSelect = (m: FreeMaterial) => {\r\n    const id = (m as any)._id || (m as any).id || m.title;\r\n    setSelected((prev) => {\r\n      const next = { ...prev } as Record<string, FreeMaterial>;\r\n      if (next[id]) delete next[id];\r\n      else next[id] = m;\r\n      return next;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white\">\r\n      <Head>\r\n        <title>VerbfyListen</title>\r\n      </Head>\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900\">VerbfyListen</h1>\r\n          <p className=\"text-gray-600 mt-2\">\r\n            {locale === 'tr'\r\n              ? 'Podcast\\'ler, gerçek yaşam diyalogları ve aksan çeşitliliğiyle dinleme pratiği yapın.'\r\n              : 'Practice listening with podcasts, real-life dialogues and accent diversity.'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6 flex flex-col sm:flex-row gap-4 sm:items-center\">\r\n          <input\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            placeholder={locale === 'tr' ? 'Ara...' : 'Search...'}\r\n            className=\"w-full sm:w-auto flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          <select\r\n            value={level}\r\n            onChange={(e) => setLevel(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"\">{locale === 'tr' ? 'Tüm seviyeler' : 'All levels'}</option>\r\n            {levels.map((l) => (\r\n              <option key={l} value={l}>\r\n                {l}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Selection summary */}\r\n        {Object.keys(selected).length > 0 && (\r\n          <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n            <p className=\"font-semibold mb-2\">\r\n              {locale === 'tr' ? 'Seçtiklerim' : 'My selection'} ({Object.keys(selected).length})\r\n            </p>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {Object.values(selected).map((m) => (\r\n                <span key={(m as any)._id || (m as any).id || m.title} className=\"px-2 py-1 text-sm bg-white border border-gray-200 rounded-md\">\r\n                  {m.title}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Materials */}\r\n        {loading ? (\r\n          <p className=\"text-gray-600\">{locale === 'tr' ? 'Yükleniyor...' : 'Loading...'}</p>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {(materials || []).map((m) => {\r\n              const id = (m as any)._id || (m as any).id || m.title;\r\n              const isSel = !!selected[id];\r\n              return (\r\n                <div key={id} className=\"group bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all\">\r\n                  <div className=\"relative h-40\">\r\n                    <Image\r\n                      src={m.thumbnailUrl || '/images/verbfy-listen.png'}\r\n                      alt={m.title}\r\n                      fill\r\n                      className=\"object-contain p-4 group-hover:scale-105 transition-transform duration-200\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"p-4\">\r\n                    <h3 className=\"font-semibold text-gray-900 line-clamp-1\">{m.title}</h3>\r\n                    <p className=\"text-sm text-gray-600 line-clamp-2 mt-1\">{m.description}</p>\r\n                    <div className=\"mt-3 flex items-center justify-between text-sm text-gray-500\">\r\n                      <span>{m.level || '-'}</span>\r\n                      <button\r\n                        onClick={() => toggleSelect(m)}\r\n                        className={`px-3 py-1 rounded-md border ${\r\n                          isSel ? 'bg-blue-600 text-white border-blue-600' : 'border-gray-300 hover:bg-gray-50'\r\n                        }`}\r\n                      >\r\n                        {isSel ? (locale === 'tr' ? 'Seçildi' : 'Selected') : (locale === 'tr' ? 'Seç' : 'Select')}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","VerbfyListenPage","t","locale","useI18n","materials","setMaterials","useState","levels","setLevels","search","setSearch","level","setLevel","loading","setLoading","selected","setSelected","category","useMemo","useEffect","isMounted","run","levelResp","freeMaterialsAPI","getLevels","Array","isArray","data","e","abort","load","res","getMaterials","toggleSelect","id","m","_id","title","next","prev","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","className","jsx","Head","main","h1","p","input","value","onChange","target","placeholder","select","option","map","l","Object","keys","length","values","span","isSel","Image","src","thumbnailUrl","alt","fill","h3","description","button","onClick","concat"],"sourceRoot":""}