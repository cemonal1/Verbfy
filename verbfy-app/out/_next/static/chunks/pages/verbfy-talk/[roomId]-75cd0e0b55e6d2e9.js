(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8939],{4333:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verbfy-talk/[roomId]",function(){return t(74501)}])},74501:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(85893),i=t(67294),l=t(11163),r=t(11088),n=t(54310),d=t(32798),o=t(64964),c=t(32201),m=t(68606),x=t(96019),u=t(35892),h=t(71263);function p(){var e,s;let{roomId:t}=(0,l.useRouter)().query,{t:p}=(0,n.Q)(),[g,v]=(0,i.useState)(null),[b,f]=(0,i.useState)(!0),[j,N]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[R,Z]=(0,i.useState)(""),[k,_]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t&&(async()=>{try{var e,s;let a=await d.bl.getRoomDetails(t);if(v(a.data||a),(null===(e=a.data)||void 0===e?void 0:e.participants)||(null==a?void 0:a.participants)){let e=((null===(s=a.data)||void 0===s?void 0:s.participants)||(null==a?void 0:a.participants)).some(e=>e.isActive);y(e)}}finally{f(!1)}})()},[t]);let P=async()=>{if(t){if((null==g?void 0:g.isPrivate)&&!R){_(!0);return}try{if(N(!0),(await d.bl.joinRoom(t,{password:R})).success){y(!0),Z(""),_(!1);let e=await d.bl.getRoomDetails(t);v(e.data||e)}}catch(t){var e,s;console.error("Failed to join room:",t),alert((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to join room")}finally{N(!1)}}},A=async()=>{if(t)try{await d.bl.leaveRoom(t),y(!1);let e=await d.bl.getRoomDetails(t);v(e.data||e)}catch(e){console.error("Failed to leave room:",e)}},S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return b?(0,a.jsx)(r.Z,{title:"Loading Room...",children:(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading room details..."})}):g?(0,a.jsx)(r.Z,{title:g.name||"VerbfyTalk Room",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-blue-600"}),g.name]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:g.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g.isPrivate?(0,a.jsx)(m.Z,{className:"w-4 h-4"}):(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:g.isPrivate?"Private":"Public"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"Beginner":return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-green-500"});case"Intermediate":return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-yellow-500"});case"Advanced":return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-red-500"});default:return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-blue-500"})}})(g.level),(0,a.jsx)("span",{children:g.level})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(null===(e=g.participants)||void 0===e?void 0:e.filter(e=>e.isActive).length)||0,"/",g.maxParticipants]})]}),g.startedAt&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Started ",S(g.startedAt)]})]})]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:w?(0,a.jsx)("button",{onClick:A,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Leave Room"}):(0,a.jsx)("button",{onClick:P,disabled:j,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50",children:j?"Joining...":"Join Room"})})]}),g.topic&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Discussion Topic"}),(0,a.jsx)("p",{className:"text-blue-800",children:g.topic})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"Participants (",(null===(s=g.participants)||void 0===s?void 0:s.filter(e=>e.isActive).length)||0,")"]}),g.participants&&g.participants.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.participants.filter(e=>e.isActive).map((e,s)=>{var t,i,l;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium",children:(null===(i=e.userId)||void 0===i?void 0:null===(t=i.name)||void 0===t?void 0:t.charAt(0))||"U"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(null===(l=e.userId)||void 0===l?void 0:l.name)||"Unknown User"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Joined ",S(e.joinedAt)]})]})]},s)})}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No participants yet"})]}),k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enter Room Password"}),(0,a.jsx)("input",{type:"password",value:R,onChange:e=>Z(e.target.value),placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{_(!1),Z("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:P,disabled:j,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:j?"Joining...":"Join"})]})]})})]})}):(0,a.jsx)(r.Z,{title:"Room Not Found",children:(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Room not found"})})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=4333)}),_N_E=e.O()}]);
//# sourceMappingURL=[roomId]-75cd0e0b55e6d2e9.js.map