(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9189],{52599:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return s(99482)}])},99482:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var r=s(85893),t=s(67294),l=s(36197),d=s(11163),i=s(11088),c=s(32798),n=s(56158);function x(){let[e,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[d,i]=(0,t.useState)(null),[x,m]=(0,t.useState)(null),[o,g]=(0,t.useState)(""),[h,u]=(0,t.useState)(null),{success:b,error:f}=(0,n.pm)();(0,t.useEffect)(()=>{j()},[]);let j=async()=>{try{l(!0);let e=await c.ZP.get("/api/admin/teachers/pending");a(e.data.data||[])}catch(e){console.error("Error loading pending teachers:",e),f("Failed to load pending teachers")}finally{l(!1)}},y=async e=>{try{i(e),await c.ZP.patch("/api/admin/teachers/".concat(e,"/approve")),a(a=>a.filter(a=>a._id!==e)),b("Teacher approved successfully!")}catch(e){console.error("Error approving teacher:",e),f("Failed to approve teacher")}finally{i(null)}},p=async(e,s)=>{try{m(e),await c.ZP.patch("/api/admin/teachers/".concat(e,"/reject"),{reason:s}),a(a=>a.filter(a=>a._id!==e)),b("Teacher rejected successfully!"),u(null),g("")}catch(e){console.error("Error rejecting teacher:",e),f("Failed to reject teacher")}finally{m(null)}},N=e=>{u(e),g("")};return s?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading pending teachers..."})]}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("i",{className:"fas fa-check text-2xl text-green-600 dark:text-green-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Pending Approvals"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"All teacher applications have been reviewed."})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 border border-gray-200 dark:border-gray-600",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher text-blue-600 dark:text-blue-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:e.email}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.bio&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Bio:"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e.bio})]}),e.specialties&&e.specialties.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Specialties:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.specialties.map((e,a)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 text-xs rounded-full",children:e},a))})]}),e.experience&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Experience:"}),(0,r.jsxs)("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:[e.experience," years"]})]}),e.education&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Education:"}),(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:e.education})]}),e.hourlyRate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Hourly Rate:"}),(0,r.jsxs)("span",{className:"text-gray-600 dark:text-gray-400 ml-2",children:["$",e.hourlyRate]})]})]}),(0,r.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Applied: ",new Date(e.createdAt).toLocaleDateString()]})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 lg:flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>y(e._id),disabled:d===e._id,className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:d===e._id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Approving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-check mr-2"}),"Approve"]})}),(0,r.jsxs)("button",{onClick:()=>N(e._id),disabled:x===e._id,className:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:[(0,r.jsx)("i",{className:"fas fa-times mr-2"}),"Reject"]})]})]})},e._id)),h&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Reject Teacher Application"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"rejectReason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for rejection (optional)"}),(0,r.jsx)("textarea",{id:"rejectReason",value:o,onChange:e=>g(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-700 dark:text-white",placeholder:"Provide a reason for rejection..."})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>p(h,o),disabled:x===h,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-medium rounded-lg transition-colors duration-200",children:x===h?"Rejecting...":"Reject"}),(0,r.jsx)("button",{onClick:()=>{u(null),g("")},className:"flex-1 px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium rounded-lg transition-colors duration-200",children:"Cancel"})]})]})})]})}function m(){let{user:e,loading:a}=(0,l.Eu)(),s=(0,d.useRouter)(),[n,m]=(0,t.useState)(null),[o,g]=(0,t.useState)([]),[h,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{a||(e?"admin"!==e.role?s.replace("/unauthorized"):b():s.replace("/login"))},[e,a,s]);let b=async()=>{try{u(!0);let e=await c.ZP.get("/api/admin/stats");m(e.data);let a=await c.ZP.get("/api/admin/activities");g(a.data.activities||[])}catch(e){console.error("Error fetching admin data:",e)}finally{u(!1)}};return a||h?(0,r.jsx)(i.Z,{allowedRoles:["admin"],children:(0,r.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})})}):(0,r.jsxs)(i.Z,{allowedRoles:["admin"],children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 sm:p-8 mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Dashboard \uD83D\uDEE1Ô∏è"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 text-base sm:text-lg",children:["Welcome back, ",null==e?void 0:e.name,"! Manage your platform with full administrative control."]}),(0,r.jsx)("div",{className:"flex items-center mt-4",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200",children:"\uD83D\uDD27 Administrator"})})]}),(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-purple-100 to-red-100 dark:from-purple-900/30 dark:to-red-900/30 rounded-full flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-shield-alt text-4xl text-purple-600 dark:text-purple-400"})})})]})}),(0,r.jsx)("div",{className:"mb-8",children:n&&(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-users text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.totalUsers})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Teachers"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.totalTeachers})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-user-graduate text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Students"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.totalStudents})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-calendar-check text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Reservations"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.totalReservations})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-file-alt text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Materials"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.totalMaterials})]})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-video text-white"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Lessons"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.activeLessons})]})]})})]})}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-8",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Teacher Approval Requests"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Review and approve new teacher applications"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(x,{})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Activities"})}),(0,r.jsx)("div",{className:"p-6",children:o.length>0?(0,r.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"fas fa-info text-blue-600 dark:text-blue-400"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.description}),e.user&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["by ",e.user.name," (",e.user.email,")"]})]}),(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleDateString()})})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("i",{className:"fas fa-info-circle text-4xl text-gray-300 dark:text-gray-600 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent activities"})]})})]})]})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=52599)}),_N_E=e.O()}]);