(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8508],{92520:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/materials",function(){return t(33770)}])},33770:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return s}});var l=t(85893),i=t(67294),n=t(11088),r=t(32798),d=t(54310);function s(){let{t:e}=(0,d.Q)(),[a,t]=(0,i.useState)([]),[s,x]=(0,i.useState)(!0),[m,p]=(0,i.useState)(""),[u,h]=(0,i.useState)("all"),v=async()=>{try{var e,a,l,i;x(!0);let n=await r.Sb.getMaterials({search:m,status:u});t(null!==(i=null!==(l=null!==(a=null===(e=n.data)||void 0===e?void 0:e.materials)&&void 0!==a?a:n.data)&&void 0!==l?l:n.materials)&&void 0!==i?i:[])}finally{x(!1)}};(0,i.useEffect)(()=>{v()},[m,u]);let g=async(e,a)=>{try{await r.Sb.approveMaterial(e,{approved:a}),await v()}catch(e){}},y=async e=>{try{await r.Sb.deleteMaterial(e),t(a=>a.filter(a=>a._id!==e))}catch(e){}};return(0,l.jsxs)(n.Z,{allowedRoles:["admin"],title:e("admin.materials.title","Admin â€¢ Materials"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,l.jsx)("input",{value:m,onChange:e=>p(e.target.value),placeholder:e("admin.search","Search..."),className:"w-full sm:w-80 border rounded-md px-3 py-2"}),(0,l.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"border rounded-md px-3 py-2",children:[(0,l.jsx)("option",{value:"all",children:e("admin.all","All")}),(0,l.jsx)("option",{value:"pending",children:e("admin.pending","Pending")}),(0,l.jsx)("option",{value:"approved",children:e("admin.approved","Approved")})]})]}),s?(0,l.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("common.loading","Loading...")}):0===a.length?(0,l.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("admin.materials.empty","No materials")}):(0,l.jsx)("div",{className:"overflow-x-auto rounded-lg border bg-white",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)(c,{children:e("admin.materials.titleCol","Title")}),(0,l.jsx)(c,{children:e("admin.materials.level","Level")}),(0,l.jsx)(c,{children:e("admin.materials.category","Category")}),(0,l.jsx)(c,{children:e("admin.materials.uploader","Uploader")}),(0,l.jsx)(c,{children:e("admin.materials.status","Status")}),(0,l.jsx)(c,{className:"text-right",children:e("admin.actions","Actions")})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-100",children:a.map(a=>{var t;return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsxs)(o,{children:[(0,l.jsx)("div",{className:"font-medium text-gray-900",children:a.title}),(0,l.jsx)("div",{className:"text-xs text-gray-500 line-clamp-1",children:a.description})]}),(0,l.jsx)(o,{children:a.level||"-"}),(0,l.jsx)(o,{children:a.category||"-"}),(0,l.jsx)(o,{children:(null===(t=a.uploadedBy)||void 0===t?void 0:t.name)||"-"}),(0,l.jsx)(o,{children:a.approved?(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700",children:e("admin.approved","Approved")}):(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-700",children:e("admin.pending","Pending")})}),(0,l.jsxs)(o,{className:"text-right space-x-2",children:[!a.approved&&(0,l.jsx)("button",{onClick:()=>g(a._id,!0),className:"px-3 py-1 rounded-md text-xs bg-green-600 text-white hover:bg-green-700",children:e("admin.materials.approve","Approve")}),a.approved&&(0,l.jsx)("button",{onClick:()=>g(a._id,!1),className:"px-3 py-1 rounded-md text-xs bg-yellow-600 text-white hover:bg-yellow-700",children:e("admin.materials.reject","Unapprove")}),(0,l.jsx)("button",{onClick:()=>y(a._id),className:"px-3 py-1 rounded-md text-xs bg-red-600 text-white hover:bg-red-700",children:e("admin.delete","Delete")})]})]},a._id)})})]})})]})}function c(e){let{children:a,className:t=""}=e;return(0,l.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider ".concat(t),children:a})}function o(e){let{children:a,className:t=""}=e;return(0,l.jsx)("td",{className:"px-4 py-2 text-sm text-gray-800 ".concat(t),children:a})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=92520)}),_N_E=e.O()}]);
//# sourceMappingURL=materials-d0fb79e66fd96826.js.map