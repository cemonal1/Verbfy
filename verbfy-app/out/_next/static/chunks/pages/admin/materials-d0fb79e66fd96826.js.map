{"version":3,"file":"static/chunks/pages/admin/materials-d0fb79e66fd96826.js","mappings":"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","sources":["webpack://_N_E/?4ad7","webpack://_N_E/./pages/admin/materials.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/materials\",\n      function () {\n        return require(\"private-next-pages/admin/materials.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/materials\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { adminAPI } from '@/lib/api';\r\nimport { useI18n } from '@/lib/i18n';\r\n\r\ntype AdminMaterial = {\r\n  _id: string;\r\n  title: string;\r\n  description?: string;\r\n  level?: string;\r\n  category?: string;\r\n  uploadedBy?: { _id: string; name: string };\r\n  approved?: boolean;\r\n  createdAt?: string;\r\n};\r\n\r\nexport default function AdminMaterialsPage() {\r\n  const { t } = useI18n();\r\n  const [materials, setMaterials] = useState<AdminMaterial[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState<'all'|'approved'|'pending'>('all');\r\n\r\n  const load = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await adminAPI.getMaterials({ search: q, status });\r\n      setMaterials((res as any).data?.materials ?? (res as any).data ?? (res as any).materials ?? []);\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  useEffect(() => { load(); }, [q, status]);\r\n\r\n  const approve = async (id: string, approved: boolean) => {\r\n    try {\r\n      await adminAPI.approveMaterial(id, { approved });\r\n      await load();\r\n    } catch {}\r\n  };\r\n\r\n  const remove = async (id: string) => {\r\n    try {\r\n      await adminAPI.deleteMaterial(id);\r\n      setMaterials(prev => prev.filter(m => m._id !== id));\r\n    } catch {}\r\n  };\r\n\r\n  return (\r\n    <DashboardLayout allowedRoles={['admin']} title={t('admin.materials.title','Admin â€¢ Materials')}>\r\n      <div className=\"flex items-center gap-2 mb-4\">\r\n        <input value={q} onChange={(e)=>setQ(e.target.value)} placeholder={t('admin.search','Search...')}\r\n          className=\"w-full sm:w-80 border rounded-md px-3 py-2\" />\r\n        <select value={status} onChange={(e)=>setStatus(e.target.value as any)} className=\"border rounded-md px-3 py-2\">\r\n          <option value=\"all\">{t('admin.all','All')}</option>\r\n          <option value=\"pending\">{t('admin.pending','Pending')}</option>\r\n          <option value=\"approved\">{t('admin.approved','Approved')}</option>\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"p-8 text-center text-gray-500\">{t('common.loading','Loading...')}</div>\r\n      ) : materials.length === 0 ? (\r\n        <div className=\"p-8 text-center text-gray-500\">{t('admin.materials.empty','No materials')}</div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto rounded-lg border bg-white\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <Th>{t('admin.materials.titleCol','Title')}</Th>\r\n                <Th>{t('admin.materials.level','Level')}</Th>\r\n                <Th>{t('admin.materials.category','Category')}</Th>\r\n                <Th>{t('admin.materials.uploader','Uploader')}</Th>\r\n                <Th>{t('admin.materials.status','Status')}</Th>\r\n                <Th className=\"text-right\">{t('admin.actions','Actions')}</Th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-100\">\r\n              {materials.map((m) => (\r\n                <tr key={m._id} className=\"hover:bg-gray-50\">\r\n                  <Td>\r\n                    <div className=\"font-medium text-gray-900\">{m.title}</div>\r\n                    <div className=\"text-xs text-gray-500 line-clamp-1\">{m.description}</div>\r\n                  </Td>\r\n                  <Td>{m.level || '-'}</Td>\r\n                  <Td>{m.category || '-'}</Td>\r\n                  <Td>{m.uploadedBy?.name || '-'}</Td>\r\n                  <Td>\r\n                    {m.approved ? (\r\n                      <span className=\"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700\">{t('admin.approved','Approved')}</span>\r\n                    ) : (\r\n                      <span className=\"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-700\">{t('admin.pending','Pending')}</span>\r\n                    )}\r\n                  </Td>\r\n                  <Td className=\"text-right space-x-2\">\r\n                    {!m.approved && (\r\n                      <button onClick={()=>approve(m._id, true)} className=\"px-3 py-1 rounded-md text-xs bg-green-600 text-white hover:bg-green-700\">\r\n                        {t('admin.materials.approve','Approve')}\r\n                      </button>\r\n                    )}\r\n                    {m.approved && (\r\n                      <button onClick={()=>approve(m._id, false)} className=\"px-3 py-1 rounded-md text-xs bg-yellow-600 text-white hover:bg-yellow-700\">\r\n                        {t('admin.materials.reject','Unapprove')}\r\n                      </button>\r\n                    )}\r\n                    <button onClick={()=>remove(m._id)} className=\"px-3 py-1 rounded-md text-xs bg-red-600 text-white hover:bg-red-700\">\r\n                      {t('admin.delete','Delete')}\r\n                    </button>\r\n                  </Td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nfunction Th({ children, className = '' }: { children: React.ReactNode; className?: string }) {\r\n  return <th className={`px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider ${className}`}>{children}</th>;\r\n}\r\n\r\nfunction Td({ children, className = '' }: { children: React.ReactNode; className?: string }) {\r\n  return <td className={`px-4 py-2 text-sm text-gray-800 ${className}`}>{children}</td>;\r\n}\r\n\r\n\r\n"],"names":["window","__NEXT_P","push","__webpack_require__","AdminMaterialsPage","t","useI18n","materials","setMaterials","useState","loading","setLoading","q","setQ","status","setStatus","load","_res_data","_res_data_materials","_ref","_ref1","res","adminAPI","getMaterials","search","data","useEffect","approve","id","approved","approveMaterial","e","remove","deleteMaterial","prev","filter","m","_id","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","DashboardLayout","allowedRoles","title","div","className","jsx","input","value","onChange","target","placeholder","select","option","length","table","thead","tr","Th","tbody","map","Td","description","level","category","uploadedBy","name","span","button","onClick","param","children","th","concat","td"],"sourceRoot":""}