(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1774],{23426:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/logs",function(){return t(72029)}])},72029:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return r}});var s=t(85893),n=t(67294),l=t(10571),d=t(32798),i=t(54310);function r(){let{t:e}=(0,i.Q)(),[a,t]=(0,n.useState)([]),[r,c]=(0,n.useState)(!0),[o,m]=(0,n.useState)(""),[u,x]=(0,n.useState)(1),g=async()=>{try{var e,a,s,n;c(!0);let l=await d.Sb.getLogs({search:o,page:u,limit:20});t(null!==(n=null!==(s=null!==(a=null===(e=l.data)||void 0===e?void 0:e.logs)&&void 0!==a?a:l.data)&&void 0!==s?s:l.logs)&&void 0!==n?n:[])}finally{c(!1)}};return(0,n.useEffect)(()=>{g()},[o,u]),(0,s.jsxs)(l.Z,{allowedRoles:["admin"],title:e("admin.logs.title","Admin • Logs"),children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,s.jsx)("input",{value:o,onChange:e=>{m(e.target.value),x(1)},placeholder:e("admin.search","Search..."),className:"w-full sm:w-80 border rounded-md px-3 py-2"})}),r?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("common.loading","Loading...")}):0===a.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("admin.logs.empty","No logs")}):(0,s.jsxs)("div",{className:"space-y-2",children:[a.map(e=>{var a;return(0,s.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsx)("div",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:e.action})]}),(0,s.jsxs)("div",{className:"mt-2 text-gray-800",children:[(0,s.jsx)("span",{className:"font-medium",children:(null===(a=e.actor)||void 0===a?void 0:a.name)||"-"})," → ",(0,s.jsx)("span",{className:"text-gray-600",children:e.target||"-"})]}),e.metadata&&(0,s.jsx)("pre",{className:"mt-2 text-xs text-gray-600 overflow-auto max-h-40 bg-gray-50 p-2 rounded",children:JSON.stringify(e.metadata,null,2)})]},e._id)}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:()=>x(Math.max(1,u-1)),className:"px-3 py-1 rounded border disabled:opacity-50",disabled:1===u,children:e("admin.prev","Prev")}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[e("admin.page","Page")," ",u]}),(0,s.jsx)("button",{onClick:()=>x(u+1),className:"px-3 py-1 rounded border",children:e("admin.next","Next")})]})]})]})}}},function(e){e.O(0,[2138,9226,9496,8484,437,5823,2244,6235,5323,747,3365,8638,9806,7093,8510,8424,8639,7855,7446,2169,8308,1408,6259,4657,8212,571,5522,1493,2888,5514,179],function(){return e(e.s=23426)}),_N_E=e.O()}]);