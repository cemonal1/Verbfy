{"version":3,"file":"static/chunks/pages/admin/payments-8d6da4382721ae96.js","mappings":"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","sources":["webpack://_N_E/?67de","webpack://_N_E/./pages/admin/payments.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/payments\",\n      function () {\n        return require(\"private-next-pages/admin/payments.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/payments\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { adminAPI } from '@/lib/api';\nimport { useI18n } from '@/lib/i18n';\n\ntype AdminPayment = {\n  _id: string;\n  amount: number;\n  currency?: string;\n  status: string;\n  user?: { _id: string; name: string; email: string };\n  createdAt?: string;\n};\n\nexport default function AdminPaymentsPage() {\n  const { t } = useI18n();\n  const [items, setItems] = useState<AdminPayment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [q, setQ] = useState('');\n  const [status, setStatus] = useState('all');\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      const res = await adminAPI.getPayments({ search: q, status });\n      setItems((res as any).data?.payments ?? (res as any).data ?? (res as any).payments ?? []);\n    } finally { setLoading(false); }\n  };\n\n  useEffect(() => { load(); }, [q, status]);\n\n  const refund = async (id: string) => {\n    try { await adminAPI.refundPayment(id, {}); await load(); } catch {}\n  };\n\n  return (\n    <DashboardLayout allowedRoles={['admin']} title={t('admin.payments.title','Admin â€¢ Payments')}>\n      <div className=\"flex items-center gap-2 mb-4\">\n        <input value={q} onChange={(e)=>setQ(e.target.value)} placeholder={t('admin.search','Search...')}\n          className=\"w-full sm:w-80 border rounded-md px-3 py-2\" />\n        <select value={status} onChange={(e)=>setStatus(e.target.value)} className=\"border rounded-md px-3 py-2\">\n          <option value=\"all\">{t('admin.all','All')}</option>\n          <option value=\"succeeded\">{t('admin.succeeded','Succeeded')}</option>\n          <option value=\"refunded\">{t('admin.refunded','Refunded')}</option>\n          <option value=\"failed\">{t('admin.failed','Failed')}</option>\n        </select>\n      </div>\n\n      {loading ? (\n        <div className=\"p-8 text-center text-gray-500\">{t('common.loading','Loading...')}</div>\n      ) : items.length === 0 ? (\n        <div className=\"p-8 text-center text-gray-500\">{t('admin.payments.empty','No payments')}</div>\n      ) : (\n        <div className=\"overflow-x-auto rounded-lg border bg-white\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <Th>{t('admin.user','User')}</Th>\n                <Th>{t('admin.payments.amount','Amount')}</Th>\n                <Th>{t('admin.status','Status')}</Th>\n                <Th>{t('admin.created','Created')}</Th>\n                <Th className=\"text-right\">{t('admin.actions','Actions')}</Th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-100\">\n              {items.map((p) => (\n                <tr key={p._id} className=\"hover:bg-gray-50\">\n                  <Td>\n                    <div className=\"font-medium text-gray-900\">{p.user?.name || '-'}</div>\n                    <div className=\"text-xs text-gray-500\">{p.user?.email}</div>\n                  </Td>\n                  <Td>{(p.amount/100).toFixed(2)} {p.currency?.toUpperCase() || 'USD'}</Td>\n                  <Td>\n                    <span className=\"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700\">{p.status}</span>\n                  </Td>\n                  <Td>{p.createdAt ? new Date(p.createdAt).toLocaleString() : '-'}</Td>\n                  <Td className=\"text-right\">\n                    {p.status === 'succeeded' && (\n                      <button onClick={()=>refund(p._id)} className=\"px-3 py-1 rounded-md text-xs bg-red-600 text-white hover:bg-red-700\">\n                        {t('admin.refund','Refund')}\n                      </button>\n                    )}\n                  </Td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </DashboardLayout>\n  );\n}\n\nfunction Th({ children, className = '' }: { children: React.ReactNode; className?: string }) {\n  return <th className={`px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider ${className}`}>{children}</th>;\n}\n\nfunction Td({ children, className = '' }: { children: React.ReactNode; className?: string }) {\n  return <td className={`px-4 py-2 text-sm text-gray-800 ${className}`}>{children}</td>;\n}\n\n\n"],"names":["window","__NEXT_P","push","__webpack_require__","AdminPaymentsPage","t","useI18n","items","setItems","useState","loading","setLoading","q","setQ","status","setStatus","load","_res_data","_res_data_payments","_ref","_ref1","res","adminAPI","getPayments","search","data","payments","useEffect","refund","id","refundPayment","e","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","DashboardLayout","allowedRoles","title","div","className","jsx","input","value","onChange","target","placeholder","select","option","length","table","thead","tr","Th","tbody","map","p","Td","user","name","email","amount","toFixed","currency","toUpperCase","span","createdAt","Date","toLocaleString","button","onClick","_id","param","children","th","concat","td"],"sourceRoot":""}