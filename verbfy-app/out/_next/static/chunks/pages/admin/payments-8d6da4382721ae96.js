(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3613],{14831:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/payments",function(){return a(64845)}])},64845:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var n=a(85893),d=a(67294),s=a(11088),i=a(32798),l=a(54310);function r(){let{t:e}=(0,l.Q)(),[t,a]=(0,d.useState)([]),[r,o]=(0,d.useState)(!0),[m,x]=(0,d.useState)(""),[h,p]=(0,d.useState)("all"),y=async()=>{try{var e,t,n,d;o(!0);let s=await i.Sb.getPayments({search:m,status:h});a(null!==(d=null!==(n=null!==(t=null===(e=s.data)||void 0===e?void 0:e.payments)&&void 0!==t?t:s.data)&&void 0!==n?n:s.payments)&&void 0!==d?d:[])}finally{o(!1)}};(0,d.useEffect)(()=>{y()},[m,h]);let v=async e=>{try{await i.Sb.refundPayment(e,{}),await y()}catch(e){}};return(0,n.jsxs)(s.Z,{allowedRoles:["admin"],title:e("admin.payments.title","Admin â€¢ Payments"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,n.jsx)("input",{value:m,onChange:e=>x(e.target.value),placeholder:e("admin.search","Search..."),className:"w-full sm:w-80 border rounded-md px-3 py-2"}),(0,n.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"border rounded-md px-3 py-2",children:[(0,n.jsx)("option",{value:"all",children:e("admin.all","All")}),(0,n.jsx)("option",{value:"succeeded",children:e("admin.succeeded","Succeeded")}),(0,n.jsx)("option",{value:"refunded",children:e("admin.refunded","Refunded")}),(0,n.jsx)("option",{value:"failed",children:e("admin.failed","Failed")})]})]}),r?(0,n.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("common.loading","Loading...")}):0===t.length?(0,n.jsx)("div",{className:"p-8 text-center text-gray-500",children:e("admin.payments.empty","No payments")}):(0,n.jsx)("div",{className:"overflow-x-auto rounded-lg border bg-white",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)(c,{children:e("admin.user","User")}),(0,n.jsx)(c,{children:e("admin.payments.amount","Amount")}),(0,n.jsx)(c,{children:e("admin.status","Status")}),(0,n.jsx)(c,{children:e("admin.created","Created")}),(0,n.jsx)(c,{className:"text-right",children:e("admin.actions","Actions")})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-gray-100",children:t.map(t=>{var a,d,s;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsxs)(u,{children:[(0,n.jsx)("div",{className:"font-medium text-gray-900",children:(null===(a=t.user)||void 0===a?void 0:a.name)||"-"}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:null===(d=t.user)||void 0===d?void 0:d.email})]}),(0,n.jsxs)(u,{children:[(t.amount/100).toFixed(2)," ",(null===(s=t.currency)||void 0===s?void 0:s.toUpperCase())||"USD"]}),(0,n.jsx)(u,{children:(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:t.status})}),(0,n.jsx)(u,{children:t.createdAt?new Date(t.createdAt).toLocaleString():"-"}),(0,n.jsx)(u,{className:"text-right",children:"succeeded"===t.status&&(0,n.jsx)("button",{onClick:()=>v(t._id),className:"px-3 py-1 rounded-md text-xs bg-red-600 text-white hover:bg-red-700",children:e("admin.refund","Refund")})})]},t._id)})})]})})]})}function c(e){let{children:t,className:a=""}=e;return(0,n.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider ".concat(a),children:t})}function u(e){let{children:t,className:a=""}=e;return(0,n.jsx)("td",{className:"px-4 py-2 text-sm text-gray-800 ".concat(a),children:t})}}},function(e){e.O(0,[1216,1088,2888,179],function(){return e(e.s=14831)}),_N_E=e.O()}]);
//# sourceMappingURL=payments-8d6da4382721ae96.js.map