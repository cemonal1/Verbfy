{"version":3,"file":"static/chunks/pages/admin/logs-365394fa199850e9.js","mappings":"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","sources":["webpack://_N_E/?a1b7","webpack://_N_E/./pages/admin/logs.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/logs\",\n      function () {\n        return require(\"private-next-pages/admin/logs.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/logs\"])\n      });\n    }\n  ","import React, { useEffect, useState } from 'react';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { adminAPI } from '@/lib/api';\nimport { useI18n } from '@/lib/i18n';\n\ntype AuditLog = {\n  _id: string;\n  action: string;\n  actor?: { _id: string; name: string; email: string };\n  target?: string;\n  metadata?: any;\n  createdAt?: string;\n};\n\nexport default function AdminLogsPage() {\n  const { t } = useI18n();\n  const [items, setItems] = useState<AuditLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [q, setQ] = useState('');\n  const [page, setPage] = useState(1);\n\n  const load = async () => {\n    try {\n      setLoading(true);\n      const res = await adminAPI.getLogs({ search: q, page, limit: 20 });\n      setItems((res as any).data?.logs ?? (res as any).data ?? (res as any).logs ?? []);\n    } finally { setLoading(false); }\n  };\n\n  useEffect(() => { load(); }, [q, page]);\n\n  return (\n    <DashboardLayout allowedRoles={['admin']} title={t('admin.logs.title','Admin • Logs')}>\n      <div className=\"flex items-center gap-2 mb-4\">\n        <input value={q} onChange={(e)=>{ setQ(e.target.value); setPage(1); }} placeholder={t('admin.search','Search...')}\n          className=\"w-full sm:w-80 border rounded-md px-3 py-2\" />\n      </div>\n\n      {loading ? (\n        <div className=\"p-8 text-center text-gray-500\">{t('common.loading','Loading...')}</div>\n      ) : items.length === 0 ? (\n        <div className=\"p-8 text-center text-gray-500\">{t('admin.logs.empty','No logs')}</div>\n      ) : (\n        <div className=\"space-y-2\">\n          {items.map((log) => (\n            <div key={log._id} className=\"rounded-lg border bg-white p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-sm text-gray-500\">{log.createdAt ? new Date(log.createdAt).toLocaleString() : '-'}</div>\n                <div className=\"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700\">{log.action}</div>\n              </div>\n              <div className=\"mt-2 text-gray-800\">\n                <span className=\"font-medium\">{log.actor?.name || '-'}</span> → <span className=\"text-gray-600\">{log.target || '-'}</span>\n              </div>\n              {log.metadata && (\n                <pre className=\"mt-2 text-xs text-gray-600 overflow-auto max-h-40 bg-gray-50 p-2 rounded\">{JSON.stringify(log.metadata, null, 2)}</pre>\n              )}\n            </div>\n          ))}\n          <div className=\"flex items-center justify-end gap-2 pt-2\">\n            <button onClick={()=>setPage(Math.max(1, page-1))} className=\"px-3 py-1 rounded border disabled:opacity-50\" disabled={page===1}>{t('admin.prev','Prev')}</button>\n            <span className=\"text-sm text-gray-600\">{t('admin.page','Page')} {page}</span>\n            <button onClick={()=>setPage(page+1)} className=\"px-3 py-1 rounded border\">{t('admin.next','Next')}</button>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  );\n}\n\n\n"],"names":["window","__NEXT_P","push","__webpack_require__","AdminLogsPage","t","useI18n","items","setItems","useState","loading","setLoading","q","setQ","page","setPage","load","_res_data","_res_data_logs","_ref","_ref1","res","adminAPI","getLogs","search","limit","data","logs","useEffect","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","DashboardLayout","allowedRoles","title","jsx","div","className","input","value","onChange","e","target","placeholder","length","map","log","createdAt","Date","toLocaleString","action","span","actor","name","metadata","pre","JSON","stringify","_id","button","onClick","Math","max","disabled"],"sourceRoot":""}