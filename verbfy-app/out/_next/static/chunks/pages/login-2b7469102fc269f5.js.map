{"version":3,"file":"static/chunks/pages/login-2b7469102fc269f5.js","mappings":"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","sources":["webpack://_N_E/?f1d5","webpack://_N_E/./src/features/auth/viewmodel/useLoginViewModel.ts","webpack://_N_E/./src/features/auth/view/LoginPage.tsx","webpack://_N_E/./pages/login.tsx","webpack://_N_E/./src/components/shared/BrandLogo.tsx","webpack://_N_E/./src/components/shared/HomeButton.tsx","webpack://_N_E/./src/lib/toast.ts"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/login\",\n      function () {\n        return require(\"private-next-pages/login.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/login\"])\n      });\n    }\n  ","import { useState, useCallback } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { useAuthContext, User } from '@/context/AuthContext';\r\nimport api, { authAPI, setApiAccessToken } from '@/lib/api';\r\nimport { toastError } from '@/lib/toast';\r\n\r\ninterface LoginResponse {\r\n  accessToken?: string;\r\n  token?: string;\r\n  user: User;\r\n}\r\n\r\nexport function useLoginViewModel() {\r\n  const { login: contextLogin, setUser, setAccessToken } = useAuthContext();\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const isValidEmail = useCallback(() => {\r\n    return /.+@.+\\..+/.test(email);\r\n  }, [email]);\r\n\r\n  const isFormValid = useCallback(() => {\r\n    return isValidEmail() && password.length > 0;\r\n  }, [isValidEmail, password]);\r\n\r\n  const handleLogin = useCallback(async () => {\r\n    if (!isFormValid()) {\r\n      setError('Invalid credentials');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const res = await authAPI.login({ email, password }) as unknown as { data: LoginResponse } | LoginResponse;\r\n      const payload: LoginResponse = 'data' in (res as any) ? (res as any).data : (res as any);\r\n      const access = payload.accessToken || payload.token;\r\n      if (access) {\r\n        setApiAccessToken(access);\r\n        setAccessToken(access);\r\n      }\r\n      setUser(payload.user);\r\n      // Let context login know as well (for backward compatibility in tests)\r\n      await contextLogin(email, password);\r\n      // Redirect based on role\r\n      const role = payload.user.role;\r\n      if (role === 'student') {\r\n        router.push('/student/dashboard');\r\n      } else if (role === 'teacher') {\r\n        router.push('/teacher/dashboard');\r\n      } else {\r\n        router.push('/dashboard');\r\n      }\r\n    } catch (err: unknown) {\r\n      const errorObj = err as { response?: { data?: { message?: string } } };\r\n      const msg = errorObj.response?.data?.message || 'Invalid credentials';\r\n      setError(msg);\r\n      toastError(msg);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [email, password, isFormValid, contextLogin, setUser, setAccessToken, router]);\r\n\r\n  return {\r\n    email,\r\n    password,\r\n    loading,\r\n    error,\r\n    setEmail,\r\n    setPassword,\r\n    setError,\r\n    handleLogin,\r\n    isValidEmail,\r\n    isFormValid,\r\n  };\r\n} ","import React, { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\nimport { useLoginViewModel } from '../viewmodel/useLoginViewModel';\r\nimport HomeButton from '@/components/shared/HomeButton';\r\nimport BrandLogo from '@/components/shared/BrandLogo';\r\nimport { useI18n } from '@/lib/i18n';\r\n\r\nexport default function LoginPage() {\r\n  const { \r\n    email, \r\n    setEmail, \r\n    password, \r\n    setPassword, \r\n    loading, \r\n    error, \r\n    handleLogin \r\n  } = useLoginViewModel();\r\n  const { t, locale, setLocale } = useI18n();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!email || !password) return;\r\n    \r\n    await handleLogin();\r\n  };\r\n\r\n  const handleSocialLogin = (provider: 'google' | 'outlook' | 'apple') => {\r\n    // Default to production API if env not present (Cloudflare Pages static deploys)\r\n    const base = (process.env.NEXT_PUBLIC_API_BASE_URL || 'https://api.verbfy.com').replace(/\\/$/, '');\r\n    const w = 520, h = 600;\r\n    const y = window.top?.outerHeight ? Math.max(0, (window.top!.outerHeight - h) / 2) : 100;\r\n    const x = window.top?.outerWidth ? Math.max(0, (window.top!.outerWidth - w) / 2) : 100;\r\n    window.open(`${base}/api/auth/oauth/${provider}`, 'oauthLogin', `width=${w},height=${h},left=${x},top=${y}`);\r\n    const handler = (event: MessageEvent) => {\r\n      const data: any = event.data || {};\r\n      if (data?.type === 'oauth-success' && data?.token) {\r\n        window.location.href = '/dashboard';\r\n      }\r\n    };\r\n    window.addEventListener('message', handler, { once: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8 relative overflow-hidden\">\r\n      {/* Language toggle */}\r\n      <div className=\"absolute top-4 right-4 z-10\">\r\n        <button\r\n          onClick={() => setLocale(locale === 'en' ? 'tr' : 'en')}\r\n          className=\"px-2 py-1 text-xs rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50\"\r\n          aria-label=\"Toggle language\"\r\n          title={locale === 'en' ? 'Türkçe' : 'English'}\r\n        >\r\n          {locale === 'en' ? 'TR' : 'EN'}\r\n        </button>\r\n      </div>\r\n      {/* Background decorative elements */}\r\n      <div className=\"absolute inset-0 overflow-hidden\">\r\n        <div className=\"absolute -top-40 -right-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse\"></div>\r\n        <div className=\"absolute -bottom-40 -left-40 w-60 h-60 sm:w-80 sm:h-80 bg-gradient-to-tr from-indigo-400/20 to-pink-400/20 rounded-full blur-3xl animate-pulse delay-1000\"></div>\r\n      </div>\r\n\r\n      <div className=\"relative w-full max-w-sm sm:max-w-md space-y-6 sm:space-y-8\">\r\n        {/* Logo and Brand */}\r\n        <div className=\"text-center\">\r\n          <div className=\"flex justify-center mb-4 sm:mb-6\">\r\n            <BrandLogo size={88} />\r\n          </div>\r\n          <p className=\"text-xs text-blue-600 font-semibold mb-1\">Verbing Up Your Language Skills!</p>\r\n          <p className=\"text-gray-600 text-base sm:text-lg\">{t('auth.login.welcome','Welcome back to your learning journey')}</p>\r\n        </div>\r\n\r\n        {/* Main Login Form */}\r\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 sm:p-8 space-y-6\">\r\n            <div className=\"text-center\">\r\n            <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">{t('auth.login.title','Sign in to your account')}</h2>\r\n            <p className=\"text-gray-600 text-sm sm:text-base\">\r\n              Continue your English learning adventure\r\n            </p>\r\n          </div>\r\n\r\n          <form className=\"space-y-4 sm:space-y-6\" onSubmit={handleSubmit}>\r\n            {/* Email Field */}\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">{t('auth.login.email','Email address')}</label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                  className=\"w-full px-3 sm:px-4 py-2.5 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base\"\r\n                  placeholder={t('auth.login.emailPlaceholder','Enter your email')}\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\r\n                  <i className=\"fas fa-envelope text-gray-400\"></i>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* If the user is a teacher awaiting approval, we could show a notice after login; handled post-auth */}\r\n\r\n            {/* Password Field */}\r\n            <div className=\"space-y-2\">\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">{t('auth.login.password','Password')}</label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  className=\"w-full px-3 sm:px-4 py-2.5 sm:py-3 pr-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400 text-gray-900 bg-white/50 backdrop-blur-sm text-sm sm:text-base\"\r\n                  placeholder={t('auth.login.passwordPlaceholder','Enter your password')}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                >\r\n                  <i className={`fas ${showPassword ? 'fa-eye-slash' : 'fa-eye'} text-gray-400 hover:text-gray-600 transition-colors`}></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Forgot Password Link */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  id=\"remember-me\"\r\n                  name=\"remember-me\"\r\n                  type=\"checkbox\"\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-700\">\r\n                  {t('auth.login.remember','Remember me')}\r\n                </label>\r\n              </div>\r\n              <Link \r\n                href=\"/forgot-password\" \r\n                className=\"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline\"\r\n              >\r\n                {t('auth.login.forgot','Forgot your password?')}\r\n              </Link>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded-xl p-3 sm:p-4\">\r\n                <div className=\"flex\">\r\n                  <i className=\"fas fa-exclamation-circle text-red-400 mt-0.5 mr-3\"></i>\r\n                  <p className=\"text-sm text-red-600\">{error}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Sign In Button */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"group relative w-full flex justify-center py-2.5 sm:py-3 px-4 border border-transparent text-sm sm:text-base font-semibold rounded-xl text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  {t('auth.login.signingin','Signing in...')}\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <i className=\"fas fa-sign-in-alt mr-2\"></i>\r\n                  {t('auth.login.submit','Sign in')}\r\n                </>\r\n              )}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Divider */}\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-gray-300\"></div>\r\n            </div>\r\n            <div className=\"relative flex justify-center text-sm\">\r\n              <span className=\"px-2 bg-white text-gray-500\">{t('auth.login.or','Or continue with')}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Social Login Buttons */}\r\n          <div className=\"grid grid-cols-1 gap-3\">\r\n            <button\r\n              onClick={() => handleSocialLogin('google')}\r\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\r\n            >\r\n              <i className=\"fab fa-google text-red-500 mr-3\"></i>\r\n              {t('auth.login.google','Sign in with Google')}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => handleSocialLogin('outlook')}\r\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\r\n            >\r\n              <i className=\"fas fa-envelope text-blue-500 mr-3\"></i>\r\n              {t('auth.login.outlook','Sign in with Outlook')}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => handleSocialLogin('apple')}\r\n              className=\"w-full inline-flex justify-center py-2.5 sm:py-3 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]\"\r\n            >\r\n              <i className=\"fab fa-apple text-gray-900 mr-3\"></i>\r\n              {t('auth.login.apple','Sign in with Apple')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sign Up CTA */}\r\n        <div className=\"text-center\">\r\n          <p className=\"text-gray-600 text-sm sm:text-base\">\r\n            {t('auth.login.new','New to Verbfy?')}{' '}\r\n            <Link \r\n              href=\"/register\" \r\n              className=\"font-semibold text-blue-600 hover:text-blue-500 transition-colors duration-200 hover:underline\"\r\n            >\r\n              {t('auth.login.join','Join Now')}\r\n            </Link>\r\n          </p>\r\n        </div>\r\n\r\n        {/* Footer Links */}\r\n        <div className=\"text-center space-y-2\">\r\n          <div className=\"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-4 text-sm text-gray-500\">\r\n            <Link href=\"/privacy\" className=\"hover:text-gray-700 transition-colors\">\r\n              {t('footer.privacy','Privacy Policy')}\r\n            </Link>\r\n            <Link href=\"/terms\" className=\"hover:text-gray-700 transition-colors\">\r\n              {t('footer.terms','Terms of Service')}\r\n            </Link>\r\n            <Link href=\"/help\" className=\"hover:text-gray-700 transition-colors\">\r\n              {t('footer.help','Help Center')}\r\n            </Link>\r\n          </div>\r\n          <p className=\"text-xs text-gray-400\">\r\n            © 2024 Verbfy. {t('footer.rights','All rights reserved.')}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Home Button - Floating */}\r\n      <HomeButton />\r\n    </div>\r\n  );\r\n} ","import LoginPage from '../src/features/auth/view/LoginPage';\r\nimport Link from 'next/link';\r\n\r\nexport default function Login() {\r\n  return (\r\n    <>\r\n      <LoginPage />\r\n      <div className=\"mt-6 text-center\">\r\n        <Link href=\"/forgot-password\" className=\"text-sm text-indigo-600 hover:underline\">Forgot password?</Link>\r\n      </div>\r\n    </>\r\n  );\r\n}","import React from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\n\r\ninterface BrandLogoProps {\r\n  size?: number; // width/height in px\r\n  withTitle?: boolean;\r\n  href?: string;\r\n  className?: string;\r\n  titleClassName?: string;\r\n}\r\n\r\nexport default function BrandLogo({\r\n  size = 40,\r\n  withTitle = true,\r\n  href = '/',\r\n  className = '',\r\n  titleClassName = 'text-2xl font-extrabold text-gray-900 dark:text-white'\r\n}: BrandLogoProps) {\r\n  return (\r\n    <Link href={href} className={`flex items-center space-x-2 ${className}`} aria-label=\"Verbfy Home\">\r\n      <Image\r\n        src=\"/logo.png\"\r\n        alt=\"Verbfy logo\"\r\n        width={size}\r\n        height={size}\r\n        priority\r\n      />\r\n      {withTitle && <span className={titleClassName}>Verbfy</span>}\r\n    </Link>\r\n  );\r\n}\r\n\r\n\r\n","import React from 'react';\nimport Link from 'next/link';\nimport { useAuthContext } from '@/context/AuthContext';\n\ninterface HomeButtonProps {\n  className?: string;\n  showText?: boolean;\n}\n\nconst HomeButton: React.FC<HomeButtonProps> = ({ \n  className = '', \n  showText = false \n}) => {\n  const { user } = useAuthContext();\n  \n  // Determine the home destination based on authentication status\n  const homeDestination = user ? \n    (user.role === 'student' ? '/student/dashboard' : '/teacher/dashboard') : \n    '/';\n\n  return (\n    <>\n      {/* Desktop version - shows in header/navbar */}\n      <Link\n        href={homeDestination}\n        className={`hidden lg:flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 ${className}`}\n        title={user ? 'Dashboard' : 'Anasayfa'}\n      >\n        <i className=\"fas fa-home w-5 h-5 mr-2\"></i>\n        {showText && <span>{user ? 'Dashboard' : 'Anasayfa'}</span>}\n      </Link>\n\n      {/* Mobile version - floating button */}\n      <Link\n        href={homeDestination}\n        className=\"lg:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200\"\n        title={user ? 'Dashboard' : 'Anasayfa'}\n      >\n        <span className=\"text-white text-xl\">🏠</span>\n      </Link>\n    </>\n  );\n};\n\nexport default HomeButton; ","// Toast implementation that integrates with the existing Toast component system\r\nimport { toast } from '../components/common/Toast';\r\n\r\nexport const toastError = (message: string) => {\r\n  toast.error(message);\r\n};\r\n\r\nexport const toastSuccess = (message: string) => {\r\n  toast.success(message);\r\n};\r\n\r\nexport const toastWarning = (message: string) => {\r\n  toast.warning(message);\r\n};\r\n\r\nexport const toastInfo = (message: string) => {\r\n  toast.info(message);\r\n}; "],"names":["window","__NEXT_P","push","__webpack_require__","LoginPage","email","setEmail","password","setPassword","loading","error","handleLogin","useLoginViewModel","login","contextLogin","setUser","setAccessToken","useAuthContext","router","useRouter","useState","setLoading","setError","isValidEmail","useCallback","test","isFormValid","length","res","authAPI","payload","data","access","accessToken","token","setApiAccessToken","user","role","err","errorObj","msg","response","message","toastError","t","locale","setLocale","useI18n","showPassword","setShowPassword","handleSubmit","e","preventDefault","handleSocialLogin","base","process","env","NEXT_PUBLIC_API_BASE_URL","replace","y","top","outerHeight","Math","max","h","x","outerWidth","w","open","provider","concat","addEventListener","event","type","location","href","once","jsx_runtime","jsxs","div","className","jsx","button","onClick","aria-label","title","BrandLogo","size","p","h2","form","onSubmit","label","htmlFor","input","id","name","autoComplete","required","placeholder","value","onChange","target","i","Link","disabled","Fragment","span","HomeButton","Login","param","withTitle","titleClassName","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","Image","src","alt","width","height","priority","__webpack_exports__","Z","showText","homeDestination","toast","toastSuccess","success"],"sourceRoot":""}