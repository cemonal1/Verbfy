(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2244],{31134:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(67294);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),a=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:d,iconNode:f,...p}=e;return(0,r.createElement)("svg",{ref:t,...u,width:i,height:i,stroke:n,strokeWidth:a?24*Number(o)/Number(i):o,className:l("lucide",s),...!d&&!c(p)&&{"aria-hidden":"true"},...p},[...f.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let n=(0,r.forwardRef)((n,o)=>{let{className:c,...u}=n;return(0,r.createElement)(s,{ref:o,iconNode:t,className:l("lucide-".concat(i(a(e))),"lucide-".concat(e),c),...u})});return n.displayName=a(e),n}},77918:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},68655:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},23050:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},14235:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},95494:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},12779:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2553:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},83691:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},1998:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},82591:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},68760:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},74598:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},2287:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},85111:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},23603:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},73416:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},37864:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},43283:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},8267:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},89176:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},63594:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},12658:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},32203:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},62190:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(31134).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},13618:function(){},37213:function(e,t,n){"use strict";let r;n.d(t,{IC:function(){return nL},Z5:function(){return rk},zc:function(){return rA}});var i,o,a,l,c=n(67294),u=n(95591);let s=Math.min,d=Math.max,f=Math.round,p=Math.floor,h=e=>({x:e,y:e}),m={left:"right",right:"left",bottom:"top",top:"bottom"},v={start:"end",end:"start"};function g(e,t){return"function"==typeof e?e(t):e}function y(e){return e.split("-")[0]}function b(e){return e.split("-")[1]}function w(e){return"x"===e?"y":"x"}function k(e){return"y"===e?"height":"width"}function E(e){return["top","bottom"].includes(y(e))?"y":"x"}function S(e){return e.replace(/start|end/g,e=>v[e])}function x(e){return e.replace(/left|right|bottom|top/g,e=>m[e])}function C(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function M(e,t,n){let r,{reference:i,floating:o}=e,a=E(t),l=w(E(t)),c=k(l),u=y(t),s="y"===a,d=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,p=i[c]/2-o[c]/2;switch(u){case"top":r={x:d,y:i.y-o.height};break;case"bottom":r={x:d,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:f};break;case"left":r={x:i.x-o.width,y:f};break;default:r={x:i.x,y:i.y}}switch(b(t)){case"start":r[l]-=p*(n&&s?-1:1);break;case"end":r[l]+=p*(n&&s?-1:1)}return r}let T=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await (null==a.isRTL?void 0:a.isRTL(t)),u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:s,y:d}=M(u,r,c),f=r,p={},h=0;for(let n=0;n<l.length;n++){let{name:o,fn:m}=l[n],{x:v,y:g,data:y,reset:b}=await m({x:s,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});s=v??s,d=g??d,p={...p,[o]:{...p[o],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:s,y:d}=M(u,f,c)),n=-1)}return{x:s,y:d,placement:f,strategy:i,middlewareData:p}};async function P(e,t){var n;void 0===t&&(t={});let{x:r,y:i,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:s="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=g(t,e),h="number"!=typeof p?{top:0,right:0,bottom:0,left:0,...p}:{top:p,right:p,bottom:p,left:p},m=l[f?"floating"===d?"reference":"floating":d],v=C(await o.getClippingRect({element:null==(n=await (null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:s,strategy:c})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await (null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),w=await (null==o.isElement?void 0:o.isElement(b))&&await (null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},k=C(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-k.top+h.top)/w.y,bottom:(k.bottom-v.bottom+h.bottom)/w.y,left:(v.left-k.left+h.left)/w.x,right:(k.right-v.right+h.right)/w.x}}async function R(e,t){let{placement:n,platform:r,elements:i}=e,o=await (null==r.isRTL?void 0:r.isRTL(i.floating)),a=y(n),l=b(n),c="y"===E(n),u=["left","top"].includes(a)?-1:1,s=o&&c?-1:1,d=g(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&"number"==typeof h&&(p="end"===l?-1*h:h),c?{x:p*s,y:f*u}:{x:f*u,y:p*s}}function A(){return"u">typeof window}function L(e){return I(e)?(e.nodeName||"").toLowerCase():"#document"}function N(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function O(e){var t;return null==(t=(I(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function I(e){return!!A()&&(e instanceof Node||e instanceof N(e).Node)}function D(e){return!!A()&&(e instanceof Element||e instanceof N(e).Element)}function _(e){return!!A()&&(e instanceof HTMLElement||e instanceof N(e).HTMLElement)}function Q(e){return!(!A()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof N(e).ShadowRoot)}function Z(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=H(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function V(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function z(e){let t=j(),n=D(e)?H(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function j(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function F(e){return["html","body","#document"].includes(L(e))}function H(e){return N(e).getComputedStyle(e)}function U(e){return D(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $(e){if("html"===L(e))return e;let t=e.assignedSlot||e.parentNode||Q(e)&&e.host||O(e);return Q(t)?t.host:t}function W(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let i=function e(t){let n=$(t);return F(n)?t.ownerDocument?t.ownerDocument.body:t.body:_(n)&&Z(n)?n:e(n)}(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=N(i);if(o){let e=q(a);return t.concat(a,a.visualViewport||[],Z(i)?i:[],e&&n?W(e):[])}return t.concat(i,W(i,[],n))}function q(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function B(e){let t=H(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=_(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,l=f(n)!==o||f(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function J(e){return D(e)?e:e.contextElement}function Y(e){let t=J(e);if(!_(t))return h(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:o}=B(t),a=(o?f(n.width):n.width)/r,l=(o?f(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}let X=h(0);function G(e){let t=N(e);return j()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:X}function K(e,t,n,r){var i;void 0===t&&(t=!1),void 0===n&&(n=!1);let o=e.getBoundingClientRect(),a=J(e),l=h(1);t&&(r?D(r)&&(l=Y(r)):l=Y(e));let c=(void 0===(i=n)&&(i=!1),r&&(!i||r===N(a))&&i)?G(a):h(0),u=(o.left+c.x)/l.x,s=(o.top+c.y)/l.y,d=o.width/l.x,f=o.height/l.y;if(a){let e=N(a),t=r&&D(r)?N(r):r,n=e,i=q(n);for(;i&&r&&t!==n;){let e=Y(i),t=i.getBoundingClientRect(),r=H(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,s*=e.y,d*=e.x,f*=e.y,u+=o,s+=a,i=q(n=N(i))}}return C({width:d,height:f,x:u,y:s})}function ee(e,t){let n=U(e).scrollLeft;return t?t.left+n:K(O(e)).left+n}function et(e,t,n){void 0===n&&(n=!1);let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:ee(e,r)),y:r.top+t.scrollTop}}function en(e,t,n){let r;if("viewport"===t)r=function(e,t){let n=N(e),r=O(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(i){o=i.width,a=i.height;let e=j();(!e||e&&"fixed"===t)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:l,y:c}}(e,n);else if("document"===t)r=function(e){let t=O(e),n=U(e),r=e.ownerDocument.body,i=d(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=d(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+ee(e),l=-n.scrollTop;return"rtl"===H(r).direction&&(a+=d(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:l}}(O(e));else if(D(t))r=function(e,t){let n=K(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=_(e)?Y(e):h(1),a=e.clientWidth*o.x;return{width:a,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{let n=G(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return C(r)}function er(e){return"static"===H(e).position}function ei(e,t){if(!_(e)||"fixed"===H(e).position)return null;if(t)return t(e);let n=e.offsetParent;return O(e)===n&&(n=n.ownerDocument.body),n}function eo(e,t){let n=N(e);if(V(e))return n;if(!_(e)){let t=$(e);for(;t&&!F(t);){if(D(t)&&!er(t))return t;t=$(t)}return n}let r=ei(e,t);for(;r&&["table","td","th"].includes(L(r))&&er(r);)r=ei(r,t);return r&&F(r)&&er(r)&&!z(r)?n:r||function(e){let t=$(e);for(;_(t)&&!F(t);){if(z(t))return t;if(V(t))break;t=$(t)}return null}(e)||n}let ea=async function(e){let t=this.getOffsetParent||eo,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=_(t),i=O(t),o="fixed"===n,a=K(e,!0,o,t),l={scrollLeft:0,scrollTop:0},c=h(0);if(r||!r&&!o){if(("body"!==L(t)||Z(i))&&(l=U(t)),r){let e=K(t,!0,o,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&(c.x=ee(i))}let u=!i||r||o?h(0):et(i,l);return{x:a.left+l.scrollLeft-c.x-u.x,y:a.top+l.scrollTop-c.y-u.y,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},el={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,o="fixed"===i,a=O(r),l=!!t&&V(t.floating);if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=h(1),s=h(0),d=_(r);if((d||!d&&!o)&&(("body"!==L(r)||Z(a))&&(c=U(r)),_(r))){let e=K(r);u=Y(r),s.x=e.x+r.clientLeft,s.y=e.y+r.clientTop}let f=!a||d||o?h(0):et(a,c,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+s.x+f.x,y:n.y*u.y-c.scrollTop*u.y+s.y+f.y}},getDocumentElement:O,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,o=[..."clippingAncestors"===n?V(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=W(e,[],!1).filter(e=>D(e)&&"body"!==L(e)),i=null,o="fixed"===H(e).position,a=o?$(e):e;for(;D(a)&&!F(a);){let t=H(a),n=z(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||Z(a)&&!n&&function e(t,n){let r=$(t);return!(r===n||!D(r)||F(r))&&("fixed"===H(r).position||e(r,n))}(e,a))?r=r.filter(e=>e!==a):i=t,a=$(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((e,n)=>{let r=en(t,n,i);return e.top=d(r.top,e.top),e.right=s(r.right,e.right),e.bottom=s(r.bottom,e.bottom),e.left=d(r.left,e.left),e},en(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:eo,getElementRects:ea,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=B(e);return{width:t,height:n}},getScale:Y,isElement:D,isRTL:function(e){return"rtl"===H(e).direction}};function ec(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let eu=(e,t,n)=>{let r=new Map,i={platform:el,...n},o={...i.platform,_c:r};return T(e,t,{...i,platform:o})};var es="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ef,ep={exports:{}},eh=ep.exports;let em=ed((ef||(ef=1,i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},o=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),i=0;i<r.length;i++){var o=r[i];this[o]=i<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function s(r,i,o){var c;return"debug"===(c=r)&&(c="log"),typeof console!==t&&("trace"===c&&n?l:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,"log"):e)||u.apply(this,arguments)}function d(e,n){var a,l,u,d=this,f="loglevel";function p(){var e;if(!(typeof window===t||!f)){try{e=window.localStorage[f]}catch{}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(f),i=n.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||s,d.getLevel=function(){return u??l??a},d.setLevel=function(e,n){return u=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(!(typeof window===t||!f)){try{window.localStorage[f]=n;return}catch{}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch{}}}(u),c.call(d)},d.setDefaultLevel=function(e){l=h(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){u=null,function(){if(!(typeof window===t||!f)){try{window.localStorage.removeItem(f)}catch{}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(a=h(o.getLevel())),c.call(d),o===d)for(var e in i)i[e].rebuild()},a=h(o?o.getLevel():"WARN");var m=p();null!=m&&(u=h(m)),c.call(d)}(o=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,o.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=f),o},o.getLoggers=function(){return i},o.default=o,o},ep.exports?ep.exports=i():eh.log=i()),ep.exports));var ev=function(e,t){return(ev=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function eg(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ev(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ey(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){return function(l){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}function eb(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ew(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ek(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function eE(e){return this instanceof eE?(this.v=e,this):new eE(e)}function eS(e){return"function"==typeof e}function ex(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var eC=ex(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function eM(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var eT=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var a=eb(o),l=a.next();!l.done;l=a.next())l.value.remove(this)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this)}var c=this.initialTeardown;if(eS(c))try{c()}catch(e){i=e instanceof eC?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var s=eb(u),d=s.next();!d.done;d=s.next()){var f=d.value;try{eA(f)}catch(e){i=i??[],e instanceof eC?i=ek(ek([],ew(i)),ew(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}if(i)throw new eC(i)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)eA(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&eM(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&eM(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),eP=eT.EMPTY;function eR(e){return e instanceof eT||e&&"closed"in e&&eS(e.remove)&&eS(e.add)&&eS(e.unsubscribe)}function eA(e){eS(e)?e():e.unsubscribe()}var eL={Promise:void 0},eN=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,ek([e,t],ew(n)))};function eO(e){eN(function(){throw e})}function eI(){}var eD=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,eR(t)&&t.add(n)):n.destination=eZ,n}return eg(t,e),t.create=function(e,t,n){return new eQ(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(eT),e_=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){eO(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){eO(e)}else eO(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){eO(e)}},e}(),eQ=function(e){function t(t,n,r){var i,o=e.call(this)||this;return i=eS(t)||!t?{next:t??void 0,error:n??void 0,complete:r??void 0}:t,o.destination=new e_(i),o}return eg(t,e),t}(eD),eZ={closed:!0,next:eI,error:function(e){throw e},complete:eI},eV="function"==typeof Symbol&&Symbol.observable||"@@observable";function ez(e){return e}var ej=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i,o,a=(r=e)&&r instanceof eD||r&&eS(r.next)&&eS(r.error)&&eS(r.complete)&&eR(r)?e:new eQ(e,t,n);return i=this.operator,o=this.source,a.add(i?i.call(a,o):o?this._subscribe(a):this._trySubscribe(a)),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=eF(t))(function(t,r){var i=new eQ({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[eV]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?ez:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=eF(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function eF(e){var t;return null!==(t=e??eL.Promise)&&void 0!==t?t:Promise}function eH(e){return function(t){if(eS(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function eU(e,t,n,r,i){return new e$(e,t,n,r,i)}var e$=function(e){function t(t,n,r,i,o,a){var l=e.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return eg(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(eD),eW=ex(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),eq=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return eg(t,e),t.prototype.lift=function(e){var t=new eB(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new eW},t.prototype.next=function(e){var t=this;(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=eb(t.currentObservers),o=i.next();!o.done;o=i.next())o.value.next(e)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}})()},t.prototype.error=function(e){var t=this;(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})()},t.prototype.complete=function(){var e=this;(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})()},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,i=this.observers;return n||r?eP:(this.currentObservers=null,i.push(e),new eT(function(){t.currentObservers=null,eM(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new ej;return e.source=this,e},t.create=function(e,t){return new eB(e,t)},t}(ej),eB=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return eg(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:eP},t}(eq),eJ=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return eg(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(eq),eY=function(){return Date.now()},eX=function(e){function t(t,n){return e.call(this)||this}return eg(t,e),t.prototype.schedule=function(e,t){return this},t}(eT),eG={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,ek([e,t],ew(n)))},clearInterval:function(e){return clearInterval(e)}},eK=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return eg(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),eG.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&eG.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,eM(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(eX),e0=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=eY,e}(),e1=new(function(e){function t(t,n){void 0===n&&(n=e0.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return eg(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(e0))(eK);function e5(e){var t;return(t=e[e.length-1])&&eS(t.schedule)?e.pop():void 0}var e2=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function e7(e){return eS(null==e?void 0:e.then)}function e6(e){return Symbol.asyncIterator&&eS(null==e?void 0:e[Symbol.asyncIterator])}function e4(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var e3="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function e9(e){return eS(null==e?void 0:e[e3])}function e8(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||l(e,t)})},t&&(r[e]=t(r[e])))}function l(e,t){try{var n;(n=i[e](t)).value instanceof eE?Promise.resolve(n.value.v).then(c,u):s(o[0][2],n)}catch(e){s(o[0][3],e)}}function c(e){l("next",e)}function u(e){l("throw",e)}function s(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function(){var t,n,r;return ey(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,eE(t.read())];case 3:return r=(n=i.sent()).value,n.done?[4,eE(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,eE(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function te(e){return eS(null==e?void 0:e.getReader)}function tt(e){if(e instanceof ej)return e;if(null!=e){if(eS(e[eV]))return new ej(function(t){var n=e[eV]();if(eS(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e2(e))return new ej(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(e7(e))return new ej(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,eO)});if(e6(e))return tn(e);if(e9(e))return new ej(function(t){var n,r;try{for(var i=eb(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()});if(te(e))return tn(e8(e))}throw e4(e)}function tn(e){return new ej(function(t){(function(e,t){var n,r,i,o,a,l,c,u;return a=this,l=void 0,c=void 0,u=function(){var a;return ey(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=eb(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:l.sent()},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(c||(c=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof c?i:new c(function(e){e(i)})).then(n,r)}i((u=u.apply(a,l||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function tr(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ti(e,t){return void 0===t&&(t=0),eH(function(n,r){n.subscribe(eU(r,function(n){return tr(r,e,function(){return r.next(n)},t)},function(){return tr(r,e,function(){return r.complete()},t)},function(n){return tr(r,e,function(){return r.error(n)},t)}))})}function to(e,t){return void 0===t&&(t=0),eH(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ta(e,t){if(!e)throw Error("Iterable cannot be null");return new ej(function(n){tr(n,t,function(){var r=e[Symbol.asyncIterator]();tr(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function tl(e,t){return t?function(e,t){if(null!=e){if(eS(e[eV]))return tt(e).pipe(to(t),ti(t));if(e2(e))return new ej(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(e7(e))return tt(e).pipe(to(t),ti(t));if(e6(e))return ta(e,t);if(e9(e))return new ej(function(n){var r;return tr(n,t,function(){r=e[e3](),tr(n,t,function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){n.error(e);return}i?n.complete():n.next(t)},0,!0)}),function(){return eS(null==r?void 0:r.return)&&r.return()}});if(te(e))return ta(e8(e),t)}throw e4(e)}(e,t):tt(e)}function tc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e5(e);return tl(e,n)}var tu=ex(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function ts(e){throw new tu(e)}function td(e,t){return eH(function(n,r){var i=0;n.subscribe(eU(r,function(n){r.next(e.call(t,n,i++))}))})}var tf=Array.isArray;function tp(e,t,n){return void 0===n&&(n=1/0),eS(t)?tp(function(n,r){return td(function(e,i){return t(n,e,r,i)})(tt(e(n,r)))},n):("number"==typeof t&&(n=t),eH(function(t,r){var i,o,a,l,c,u,s;return i=n,o=[],a=0,l=0,c=!1,u=function(){!c||o.length||a||r.complete()},s=function(t){a++;var n=!1;tt(e(t,l++)).subscribe(eU(r,function(e){r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(a--;o.length&&a<i;)!function(){var e=o.shift();s(e)}();u()}catch(e){r.error(e)}}))},t.subscribe(eU(r,function(e){return a<i?s(e):o.push(e)},function(){c=!0,u()})),function(){}}))}function th(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tp(ez,1)(tl(e,e5(e)))}var tm=["addListener","removeListener"],tv=["addEventListener","removeEventListener"],tg=["on","off"];function ty(e,t){return function(n){return function(r){return e[n](t,r)}}}function tb(e,t){return eH(function(n,r){var i=0;n.subscribe(eU(r,function(n){return e.call(t,n,i++)&&r.next(n)}))})}function tw(e,t){return e===t}function tk(e,t){var n;return eH((n=arguments.length>=2,function(r,i){var o=n,a=t,l=0;r.subscribe(eU(i,function(t){var n=l++;a=o?e(a,t,n):(o=!0,t),i.next(a)},void 0))}))}function tE(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e5(e);return eH(function(t,r){(n?th(e,t,n):th(e,t)).subscribe(r)})}function tS(e){return eH(function(t,n){tt(e).subscribe(eU(n,function(){return n.complete()},eI)),n.closed||t.subscribe(n)})}var tx=Object.defineProperty,tC=Object.defineProperties,tM=Object.getOwnPropertyDescriptors,tT=Object.getOwnPropertySymbols,tP=Object.prototype.hasOwnProperty,tR=Object.prototype.propertyIsEnumerable,tA=(e,t,n)=>t in e?tx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tL=(e,t)=>{for(var n in t||(t={}))tP.call(t,n)&&tA(e,n,t[n]);if(tT)for(var n of tT(t))tR.call(t,n)&&tA(e,n,t[n]);return e},tN=(e,t)=>tC(e,tM(t)),tO=(e,t,n)=>new Promise((r,i)=>{var o=e=>{try{l(n.next(e))}catch(e){i(e)}},a=e=>{try{l(n.throw(e))}catch(e){i(e)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);l((n=n.apply(e,t)).next())});function tI(e){var t;return!(typeof e>"u")&&(!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&"u">typeof(null==(t=e.publication)?void 0:t.track)||!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&"u">typeof e.publication)}function tD(e){return!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u"}function t_(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(tD(e))return`${e.participant.identity}_${e.source}_placeholder`;if(tI(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}function tQ(e,t){return!(typeof t>"u")&&(tI(e)?t.some(t=>t.participant.identity===e.participant.identity&&tI(t)&&t.publication.trackSid===e.publication.trackSid):!!tD(e)&&t.some(t=>t.participant.identity===e.participant.identity&&tD(t)&&t.source===e.source))}var tZ=[u.TQ.ConnectionStateChanged,u.TQ.RoomMetadataChanged,u.TQ.ActiveSpeakersChanged,u.TQ.ConnectionQualityChanged,u.TQ.ParticipantConnected,u.TQ.ParticipantDisconnected,u.TQ.ParticipantPermissionsChanged,u.TQ.ParticipantMetadataChanged,u.TQ.ParticipantNameChanged,u.TQ.ParticipantAttributesChanged,u.TQ.TrackMuted,u.TQ.TrackUnmuted,u.TQ.TrackPublished,u.TQ.TrackUnpublished,u.TQ.TrackStreamStateChanged,u.TQ.TrackSubscriptionFailed,u.TQ.TrackSubscriptionPermissionChanged,u.TQ.TrackSubscriptionStatusChanged,u.TQ.LocalTrackPublished,u.TQ.LocalTrackUnpublished],tV=([...(u.dd.TrackPublished,u.dd.TrackUnpublished,u.dd.TrackMuted,u.dd.TrackUnmuted,u.dd.TrackStreamStateChanged,u.dd.TrackSubscribed,u.dd.TrackUnsubscribed,u.dd.TrackSubscriptionPermissionChanged,u.dd.TrackSubscriptionFailed,u.dd.LocalTrackPublished,u.dd.LocalTrackUnpublished,[u.dd.ConnectionQualityChanged,u.dd.IsSpeakingChanged,u.dd.ParticipantMetadataChanged,u.dd.ParticipantPermissionsChanged,u.dd.TrackMuted,u.dd.TrackUnmuted,u.dd.TrackPublished,u.dd.TrackUnpublished,u.dd.TrackStreamStateChanged,u.dd.TrackSubscriptionFailed,u.dd.TrackSubscriptionPermissionChanged,u.dd.TrackSubscriptionStatusChanged]),u.dd.LocalTrackPublished,u.dd.LocalTrackUnpublished],em.getLogger("lk-components-js"));tV.setDefaultLevel("WARN");var tz=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}],tj=[],tF={showChat:!1,unreadMessages:0,showSettings:!1};function tH(e){return"object"==typeof e}function tU(e){return Array.isArray(e)&&e.filter(tH).length>0}function t$(e,t){var n,r,i,o;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(o=null==(i=t.joinedAt)?void 0:i.getTime())?o:0)}function tW(e,t){return Array(Math.max(e.length,t.length)).fill([]).map((n,r)=>[e[r],t[r]])}function tq(e,t,n){return e.filter(e=>!t.map(e=>n(e)).includes(n(e)))}function tB(e){return e.map(e=>"string"==typeof e||"number"==typeof e?`${e}`:t_(e))}function tJ(e,t){let n=t.findIndex(t=>t_(t)===t_(e));if(-1===n)throw Error(`Element not part of the array: ${t_(e)} not in ${tB(t)}`);return n}function tY(e,t){return e.reduce((e,n,r)=>r%t==0?[...e,[n]]:[...e.slice(0,-1),[...e.slice(-1)[0],n]],[])}function tX(e){return`lk-${e}`}function tG(e){if(tI(e))return e.publication;{let{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(e=>e.source===t&&e.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw Error("At least one of source and name needs to be defined")}}function tK(e,...t){return new ej(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tE(e))}function t0(e,t){return new ej(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function t1(e){return tK(e,u.TQ.AudioPlaybackStatusChanged).pipe(td(e=>({canPlayAudio:e.canPlaybackAudio})))}function t5(e){return tK(e,u.TQ.VideoPlaybackStatusChanged).pipe(td(e=>({canPlayVideo:e.canPlaybackVideo})))}function t2(e,...t){return new ej(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tE(e))}function t7(e){return t2(e,u.dd.TrackMuted,u.dd.TrackUnmuted,u.dd.ParticipantPermissionsChanged,u.dd.TrackPublished,u.dd.TrackUnpublished,u.dd.LocalTrackPublished,u.dd.LocalTrackUnpublished,u.dd.MediaDevicesError,u.dd.TrackSubscriptionStatusChanged).pipe(td(e=>{let{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,i=e.getTrackPublication(u.fQ.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrackPublication(u.fQ.Source.Camera),microphoneTrack:i,participant:e}}))}function t6(e,t){return new ej(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function t4(e){var t,n,r,i;return t2(e.participant,u.dd.TrackMuted,u.dd.TrackUnmuted,u.dd.TrackSubscribed,u.dd.TrackUnsubscribed,u.dd.LocalTrackPublished,u.dd.LocalTrackUnpublished).pipe(td(t=>{var n,r;let i=null!=(n=e.publication)?n:t.getTrackPublication(e.source);return null==(r=null==i?void 0:i.isMuted)||r}),tE(null==(i=null!=(r=null==(t=e.publication)?void 0:t.isMuted)?r:null==(n=e.participant.getTrackPublication(e.source))?void 0:n.isMuted)||i))}var t3={CHAT:"lk.chat"},t9={CHAT:"lk-chat-topic"};function t8(e,t){return tO(this,arguments,function*(e,t,n={}){let{reliable:r,destinationIdentities:i,topic:o}=n;yield e.publishData(t,{destinationIdentities:i,topic:o,reliable:r})})}var ne=new WeakMap,nt=e=>JSON.parse(new TextDecoder().decode(e)),nn=e=>new TextEncoder().encode(JSON.stringify(e));function nr(e,t,n=!0){let r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],i=[];return r.forEach(e=>{t.forEach(t=>{let r=Array.from(e.trackPublications.values()).filter(e=>e.source===t&&(!n||e.track)).map(t=>({participant:e,publication:t,source:t.source}));i.push(...r)})}),{trackReferences:i,participants:r}}var ni={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:no,save:na}=(o="lk-user-choices",{load:()=>(function(e){if(typeof localStorage>"u"){tV.error("Local storage is not available.");return}try{let t=localStorage.getItem(e);if(!t){tV.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(e){tV.error(`Error getting item from local storage: ${e}`);return}})(o),save:e=>(function(e,t){if(typeof localStorage>"u"){tV.error("Local storage is not available.");return}try{if(t){let n=Object.fromEntries(Object.entries(t).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(n))}}catch(e){tV.error(`Error setting item to local storage: ${e}`)}})(o,e)});function nl(e,t){if("show_chat"===t.msg)return{...e,showChat:!0,unreadMessages:0};if("hide_chat"===t.msg)return{...e,showChat:!1};if("toggle_chat"!==t.msg)return"unread_msg"===t.msg?{...e,unreadMessages:t.count}:"toggle_settings"===t.msg?{...e,showSettings:!e.showSettings}:{...e};{let t={...e,showChat:!e.showChat};return!0===t.showChat&&(t.unreadMessages=0),t}}function nc(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:{...e}}let nu=c.createContext(void 0);function ns(){let e=c.useContext(nu);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function nd(){return c.useContext(nu)}let nf=c.createContext(void 0);function np(){return c.useContext(nf)}function nh(e){let t=np(),n=e??t;if(!n)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}let nm=c.createContext(void 0);function nv(){return c.useContext(nm)}function ng(e){let t=nv(),n=np(),r=e??t??(null==n?void 0:n.participant);if(!r)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}let ny=c.createContext(void 0);function nb(){let e=c.useContext(ny);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function nw(){return c.useContext(ny)}function nk(e){let t=nw(),n=e??t;if(!n)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}let nE=c.createContext(void 0);var nS=n(83454);function nx(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r}function nC(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)if("function"==typeof n)try{n(...t)}catch(e){console.error(e)}}}(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=nx(n,i):t[e]=void 0!==i?i:n}}return t}function nM(e){return void 0!==e}function nT(...e){return nC(...e.filter(nM))}function nP(e,t,n){return c.Children.map(e,r=>c.isValidElement(r)&&c.Children.only(e)?(r.props.className&&(t??(t={}),t.className=nx(r.props.className,t.className),t.style={...r.props.style,...t.style}),c.cloneElement(r,{...t,key:n})):r)}function nR(e,t){return"processor"===e&&t&&"object"==typeof t&&"name"in t?t.name:"e2ee"===e&&t?"e2ee-enabled":t}let nA={connect:!0,audio:!1,video:!1},nL=c.forwardRef(function(e,t){let{room:n,htmlProps:r}=function(e){let{token:t,serverUrl:n,options:r,room:i,connectOptions:o,connect:a,audio:l,video:s,screen:d,onConnected:f,onDisconnected:p,onError:h,onMediaDeviceFailure:m,onEncryptionError:v,simulateParticipants:g,...y}={...nA,...e};r&&i&&tV.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[b,w]=c.useState(),k=c.useRef(a);c.useEffect(()=>{w(i??new u.du(r))},[i,JSON.stringify(r,nR)]);let E=c.useMemo(()=>{let{className:e}={className:"lk-room-container"};return nC(y,{className:e})},[y]);return c.useEffect(()=>{if(!b)return;let e=()=>{let e=b.localParticipant;tV.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!l,"boolean"!=typeof l?l:void 0),e.setCameraEnabled(!!s,"boolean"!=typeof s?s:void 0),e.setScreenShareEnabled(!!d,"boolean"!=typeof d?d:void 0)]).catch(e=>{tV.warn(e),null==h||h(e)})},t=(e,t)=>{let n=u.CB.getFailure(e);null==m||m(n,t)},n=e=>{null==v||v(e)},r=e=>{null==p||p(e)},i=()=>{null==f||f()};return b.on(u.TQ.SignalConnected,e).on(u.TQ.MediaDevicesError,t).on(u.TQ.EncryptionError,n).on(u.TQ.Disconnected,r).on(u.TQ.Connected,i),()=>{b.off(u.TQ.SignalConnected,e).off(u.TQ.MediaDevicesError,t).off(u.TQ.EncryptionError,n).off(u.TQ.Disconnected,r).off(u.TQ.Connected,i)}},[b,l,s,d,h,v,m,f,p]),c.useEffect(()=>{if(b){if(g){b.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});return}if(a){if(k.current=!0,tV.debug("connecting"),!t){tV.debug("no token yet");return}if(!n){tV.warn("no livekit url provided"),null==h||h(Error("no livekit url provided"));return}b.connect(n,t,o).catch(e=>{tV.warn(e),!0===k.current&&(null==h||h(e))})}else tV.debug("disconnecting because connect is false"),k.current=!1,b.disconnect()}},[a,t,JSON.stringify(o),b,h,n,g]),c.useEffect(()=>{if(b)return()=>{tV.info("disconnecting on onmount"),b.disconnect()}},[b]),{room:b,htmlProps:E}}(e);return c.createElement("div",{ref:t,...r},n&&c.createElement(ny.Provider,{value:n},c.createElement(nE.Provider,{value:e.featureFlags},e.children)))}),nN=e=>{let t=c.useRef(e);return c.useEffect(()=>{t.current=e}),t},nO=()=>r||(r=function(){let e=!1,t=[],n=new Map;if(typeof window>"u")return;let r=new ResizeObserver((r,i)=>{t=t.concat(r),e||window.requestAnimationFrame(()=>{let r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);let o=n.get(t[e].target);null==o||o.forEach(n=>n(t[e],i))}t=[],e=!1}),e=!0});return{observer:r,subscribe(e,t){r.observe(e);let i=n.get(e)??[];i.push(t),n.set(e,i)},unsubscribe(e,t){let i=n.get(e)??[];if(1===i.length){r.unobserve(e),n.delete(e);return}let o=i.indexOf(t);-1!==o&&i.splice(o,1),n.set(e,i)}}}()),nI=e=>{let[t,n]=c.useState({width:0,height:0});return c.useLayoutEffect(()=>{if(e.current){let{width:t,height:r}=e.current.getBoundingClientRect();n({width:t,height:r})}},[e.current]),function(e,t){let n=nO(),r=nN(t);c.useLayoutEffect(()=>{let t=!1,i=e.current;if(i)return null==n||n.subscribe(i,o),()=>{t=!0,null==n||n.unsubscribe(i,o)};function o(e,n){t||r.current(e,n)}},[e.current,n,r]),null==n||n.observer}(e,c.useCallback(e=>n(e.contentRect),[])),t};function nD(e,t,n=!0){let[r,i]=c.useState(t);return c.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;let r=e.subscribe(i);return()=>r.unsubscribe()},[e,n]),r}function n_(e){let t=nk(e);return nD(c.useMemo(()=>t0(t,u.TQ.ConnectionStateChanged).pipe(td(([e])=>e),tE(t.state)),[t]),t.state)}function nQ(e,t={}){var n,r;let i=ng("string"==typeof e?t.participant:e.participant),o="string"==typeof e?{participant:i,source:e}:e,[a,l]=c.useState(!!(null!=(n=o.publication)&&n.isMuted||null!=(r=i.getTrackPublication(o.source))&&r.isMuted));return c.useEffect(()=>{let e=t4(o).subscribe(l);return()=>e.unsubscribe()},[t_(o)]),a}function nZ(e,t,n={}){let r=c.useRef([]),i=c.useRef(-1),o=t!==i.current,a="function"==typeof n.customSortFunction?n.customSortFunction(e):function(e){let t=[],n=[],r=[],i=[];return e.forEach(e=>{e.participant.isLocal&&e.source===u.fQ.Source.Camera?t.push(e):e.source===u.fQ.Source.ScreenShare?n.push(e):e.source===u.fQ.Source.Camera?r.push(e):i.push(e)}),[...t,...function(e){let t=[],n=[];return e.forEach(e=>{e.participant.isLocal?t.push(e):n.push(e)}),t.sort((e,t)=>t$(e.participant,t.participant)),n.sort((e,t)=>t$(e.participant,t.participant)),[...n,...t]}(n),...function(e){let t=[],n=[];return e.forEach(e=>{e.participant.isLocal?t.push(e):n.push(e)}),n.sort((e,t)=>{var n,r,i,o,a,l,c,u,s;return e.participant.isSpeaking&&t.participant.isSpeaking?(n=e.participant,t.participant.audioLevel-n.audioLevel):e.participant.isSpeaking!==t.participant.isSpeaking?(r=e.participant,i=t.participant,r.isSpeaking===i.isSpeaking?0:r.isSpeaking?-1:1):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?(o=e.participant,a=t.participant,void 0!==o.lastSpokeAt||void 0!==a.lastSpokeAt?(null!=(c=null==(l=a.lastSpokeAt)?void 0:l.getTime())?c:0)-(null!=(s=null==(u=o.lastSpokeAt)?void 0:u.getTime())?s:0):0):tI(e)!==tI(t)?tI(e)?tI(t)?0:-1:tI(t)?1:0:e.participant.isCameraEnabled!==t.participant.isCameraEnabled?function(e,t){let n=e.participant.isCameraEnabled;return n!==t.participant.isCameraEnabled?n?-1:1:0}(e,t):t$(e.participant,t.participant)}),[...t,...n]}(r),...i]}(e),l=[...a];if(!1===o)try{l=function(e,t,n){let r=e.map(e=>t.find(t=>t_(e)===t_(t)||"number"!=typeof e&&tD(e)&&tI(t)&&tD(e)&&tI(t)&&t.participant.identity===e.participant.identity&&t.source===e.source)??e);if(r.length<t.length){let e=tq(t,r,t_);r=[...r,...e]}let i=tY(r,n);if(tW(i,tY(t,n)).forEach(([e,t],i)=>{if(e&&t){var o;let a={dropped:tq(o=tY(r,n)[i],t,t_),added:tq(t,o,t_)};(0!==a.added.length||0!==a.dropped.length)&&(tV.debug(`Detected visual changes on page: ${i}, current: ${tB(e)}, next: ${tB(t)}`,{changes:a}),a.added.length===a.dropped.length&&tW(a.added,a.dropped).forEach(([e,t])=>{if(e&&t)r=function(e,t,n){let r=tJ(e,n),i=tJ(t,n);return n.splice(r,1,t),n.splice(i,1,e),n}(e,t,r);else throw Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`)}),0===a.added.length&&a.dropped.length>0&&a.dropped.forEach(e=>{r=function(e,t){let n=tJ(e,t);return t.splice(n,1),t}(e,r)}),a.added.length>0&&0===a.dropped.length&&a.added.forEach(e=>{r=[...r,e]}))}}),r.length>t.length){let e=tq(r,t,t_);r=r.filter(t=>!e.map(t_).includes(t_(t)))}return r}(r.current,a,t)}catch(e){tV.error("Error while running updatePages(): ",e)}return o?r.current=a:r.current=l,i.current=t,l}function nV(e=[u.fQ.Source.Camera,u.fQ.Source.Microphone,u.fQ.Source.ScreenShare,u.fQ.Source.ScreenShareAudio,u.fQ.Source.Unknown],t={}){let n=nk(t.room),[r,i]=c.useState([]),[o,a]=c.useState([]),l=c.useMemo(()=>e.map(e=>tH(e)?e.source:e),[JSON.stringify(e)]);return c.useEffect(()=>{let e=(function(e,t,n){var r,i;let o=null!=(r=n.additionalRoomEvents)?r:tZ,a=null==(i=n.onlySubscribed)||i;return tK(e,...Array.from(new Set([u.TQ.ParticipantConnected,u.TQ.ParticipantDisconnected,u.TQ.ConnectionStateChanged,u.TQ.LocalTrackPublished,u.TQ.LocalTrackUnpublished,u.TQ.TrackPublished,u.TQ.TrackUnpublished,u.TQ.TrackSubscriptionStatusChanged,...o]).values())).pipe(td(e=>{let n=nr(e,t,a);return tV.debug(`TrackReference[] was updated. (length ${n.trackReferences.length})`,n),n}),tE(nr(e,t,a)))})(n,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:e,participants:t})=>{tV.debug("setting track bundles",e,t),i(e),a(t)});return()=>e.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),c.useMemo(()=>{if(!tU(e))return r;{let t=function(e,t){let n=new Map;if(tU(e)){let r=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),i=Array.from(function(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}(new Set(r),new Set(t)));i.length>0&&n.set(e.identity,i)})}return n}(e,o),n=Array.from(r);return o.forEach(e=>{t.has(e.identity)&&(t.get(e.identity)??[]).forEach(t=>{r.find(({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)||(tV.debug(`Add ${t} placeholder for participant ${e.identity}.`),n.push({participant:e,source:t}))})}),n}},[r,o,e])}let nz=c.forwardRef(function(e,t){let{mergedProps:n}=function({props:e}){let{dispatch:t,state:n}=ns().widget,{className:r}=c.useMemo(()=>({className:[tX("button"),tX("chat-toggle")].join(" ")}),[]);return{mergedProps:c.useMemo(()=>nC(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":null!=n&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}({props:e});return c.createElement("button",{ref:t,...n},e.children)}),nj=c.forwardRef(function(e,t){let{buttonProps:n}=function(e){let t=nb(),n=n_(t);return{buttonProps:c.useMemo(()=>{let{className:r,disconnect:i}={className:tX("disconnect-button"),disconnect:e=>{t.disconnect(e)}};return nC(e,{className:r,onClick:()=>i(e.stopTracks??!0),disabled:n===u.em.Disconnected})},[t,e,n])}}(e);return c.createElement("button",{ref:t,...n},e.children)}),nF=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},c.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),c.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),nH=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},c.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),nU=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},c.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),n$=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),nW=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),nq=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},c.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),nB=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),nJ=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),nY=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),nX=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},c.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),c.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),nG=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},c.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),c.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),nK=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),n0=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("g",{opacity:.25},c.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),n1=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("g",{opacity:.25},c.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),c.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),n5=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},c.createElement("g",{opacity:.25},c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),c.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),n2=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),n7=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},c.createElement("g",{fill:"currentColor"},c.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),c.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),n6=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),n4=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},c.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),n3=c.forwardRef(function({trackRef:e,...t},n){let r=np(),{mergedProps:i,inFocus:o}=function({trackRef:e,props:t}){let n=nh(e),r=nd(),{className:i}=c.useMemo(()=>({className:[tX("button"),tX("focus-toggle-button")].join(" ")}),[]),o=c.useMemo(()=>tQ(n,null==r?void 0:r.pin.state),[n,null==r?void 0:r.pin.state]);return{mergedProps:c.useMemo(()=>nC(t,{className:i,onClick:e=>{var i,a,l,c,u;null==(i=t.onClick)||i.call(t,e),o?null==(l=null==r?void 0:(a=r.pin).dispatch)||l.call(a,{msg:"clear_pin"}):null==(u=null==r?void 0:(c=r.pin).dispatch)||u.call(c,{msg:"set_pin",trackReference:n})}}),[t,i,n,o,null==r?void 0:r.pin]),inFocus:o}}({trackRef:e??r,props:t});return c.createElement(nu.Consumer,null,e=>void 0!==e&&c.createElement("button",{ref:n,...i},t.children?t.children:o?c.createElement(n4,null):c.createElement(nq,null)))}),n9=c.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:o,track:a,requestPermissions:l,onError:s,...d},f){let p=nw(),h=c.useRef("default"),m=c.useCallback(e=>{p&&p.emit(u.TQ.MediaDevicesError,e),null==s||s(e)},[p,s]),{devices:v,activeDeviceId:g,setActiveMediaDevice:y,className:b}=function({kind:e,room:t,track:n,requestPermissions:r,onError:i}){let o=nw(),a=c.useMemo(()=>t??o??new u.du,[t,o]),l=nD(c.useMemo(()=>(function(e,t,n=!0){return th(new ej(r=>{u.du.getLocalDevices(e,n).then(e=>{r.next(e),r.complete()}).catch(e=>{null==t||t(e),r.next([]),r.complete()})}),new ej(r=>{var i;let o=()=>tO(this,null,function*(){try{let t=yield u.du.getLocalDevices(e,n);r.next(t)}catch(e){null==t||t(e)}});if("u">typeof window){if(!window.isSecureContext)throw Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(i=null==navigator?void 0:navigator.mediaDevices)||i.addEventListener("devicechange",o)}return()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",o)}}))})(e,i,r),[e,r,i]),[]),[s,d]=c.useState((null==a?void 0:a.getActiveDevice(e))??"default"),{className:f,activeDeviceObservable:p,setActiveMediaDevice:h}=c.useMemo(()=>(function(e,t,n){let r=new eJ(void 0),i=t0(t,u.TQ.ActiveDeviceChanged).pipe(tb(([t])=>t===e),td(([e,t])=>(tV.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t)));return{className:tX("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:(n,...i)=>tO(this,[n,...i],function*(n,i={}){var o,a,l;if(t){let c;let s=(0,u.qs)();if("audiooutput"===e&&((null==s?void 0:s.name)==="Safari"||(null==s?void 0:s.os)==="iOS")){tV.warn("Switching audio output device is not supported on Safari and iOS.");return}tV.debug(`Switching active device of kind "${e}" with id ${n}.`),yield t.switchActiveDevice(e,n,i.exact);let d=null!=(o=t.getActiveDevice(e))?o:n;d!==n&&"default"!==n&&tV.info(`We tried to select the device with id (${n}), but the browser decided to select the device with id (${d}) instead.`),"audioinput"===e?c=null==(a=t.localParticipant.getTrackPublication(u.fQ.Source.Microphone))?void 0:a.track:"videoinput"===e&&(c=null==(l=t.localParticipant.getTrackPublication(u.fQ.Source.Camera))?void 0:l.track);let f="default"===n&&!c||"default"===n&&(null==c?void 0:c.mediaStreamTrack.label.startsWith("Default"));r.next(f?n:d)}})}})(e,a),[e,a,n]);return c.useEffect(()=>{let e=p.subscribe(e=>{e&&(tV.info("setCurrentDeviceId",e),d(e))});return()=>{null==e||e.unsubscribe()}},[p]),{devices:l,className:f,activeDeviceId:s,setActiveMediaDevice:h}}({kind:e,room:p,track:a,requestPermissions:l,onError:m});c.useEffect(()=>{void 0!==t&&y(t)},[y]),c.useEffect(()=>{"function"==typeof r&&r(v)},[r,v]),c.useEffect(()=>{g!==h.current&&(null==n||n(g)),h.current=g},[g]);let w=async e=>{try{await y(e,{exact:o??!0})}catch(e){if(e instanceof Error)null==i||i(e);else throw e}},k=c.useMemo(()=>nT(d,{className:b},{className:"lk-list"}),[b,d]),E=!!v.find(e=>e.label.toLowerCase().startsWith("default"));function S(e,t,n){return e===t||!E&&0===n&&"default"===t}return c.createElement("ul",{ref:f,...k},v.map((e,t)=>c.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":S(e.deviceId,g,t),"aria-selected":S(e.deviceId,g,t),role:"option"},c.createElement("button",{className:"lk-button",onClick:()=>w(e.deviceId)},e.label))))}),n8=c.forwardRef(function({label:e,...t},n){let r=nb(),{mergedProps:i,canPlayAudio:o}=function({room:e,props:t}){let n=nk(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=c.useMemo(()=>(function(){return{className:tX("start-audio-button"),roomAudioPlaybackAllowedObservable:t1,handleStartAudioPlayback:e=>tO(this,null,function*(){tV.info("Start Audio for room: ",e),yield e.startAudio()})}})(),[]),{canPlayAudio:a}=nD(c.useMemo(()=>i(n),[n,i]),{canPlayAudio:n.canPlaybackAudio});return{mergedProps:c.useMemo(()=>nC(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayAudio:a}}({room:r,props:t}),{mergedProps:a,canPlayVideo:l}=function({room:e,props:t}){let n=nk(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=c.useMemo(()=>(function(){return{className:tX("start-audio-button"),roomVideoPlaybackAllowedObservable:t5,handleStartVideoPlayback:e=>tO(this,null,function*(){tV.info("Start Video for room: ",e),yield e.startVideo()})}})(),[]),{canPlayVideo:a}=nD(c.useMemo(()=>i(n),[n,i]),{canPlayVideo:n.canPlaybackVideo});return{mergedProps:c.useMemo(()=>nC(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayVideo:a}}({room:r,props:i}),{style:u,...s}=a;return u.display=o&&l?"none":"block",c.createElement("button",{ref:n,style:u,...s},e??`Start ${o?"Video":"Audio"}`)});function re(e,t){switch(e){case u.fQ.Source.Microphone:return t?c.createElement(nG,null):c.createElement(nX,null);case u.fQ.Source.Camera:return t?c.createElement(nH,null):c.createElement(nF,null);case u.fQ.Source.ScreenShare:return t?c.createElement(n7,null):c.createElement(n2,null);default:return}}let rt=c.forwardRef(function({showIcon:e,...t},n){let{buttonProps:r,enabled:i}=function({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:o,...a}){var l;let s=nw(),d=null==(l=null==s?void 0:s.localParticipant)?void 0:l.getTrackPublication(e),f=c.useRef(!1),{toggle:p,className:h,pendingObserver:m,enabledObserver:v}=c.useMemo(()=>s?function(e,t,n,r,i){let{localParticipant:o}=t,a=(e,t)=>{let n=!1;switch(e){case u.fQ.Source.Camera:n=t.isCameraEnabled;break;case u.fQ.Source.Microphone:n=t.isMicrophoneEnabled;break;case u.fQ.Source.ScreenShare:n=t.isScreenShareEnabled}return n},l=t7(o).pipe(td(t=>a(e,t.participant)),tE(a(e,o))),c=new eq;return{className:tX("button"),toggle:(t,a)=>tO(this,null,function*(){try{switch(a??(a=n),c.next(!0),e){case u.fQ.Source.Camera:return yield o.setCameraEnabled(t??!o.isCameraEnabled,a,r),o.isCameraEnabled;case u.fQ.Source.Microphone:return yield o.setMicrophoneEnabled(t??!o.isMicrophoneEnabled,a,r),o.isMicrophoneEnabled;case u.fQ.Source.ScreenShare:return yield o.setScreenShareEnabled(t??!o.isScreenShareEnabled,a,r),o.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(e){if(i&&e instanceof Error){null==i||i(e);return}throw e}finally{c.next(!1)}}),enabledObserver:l,pendingObserver:c.asObservable()}}(e,s,r,i,o):function(){let e=!1,t=new eq,n=new eq;return{className:tX("button"),toggle:r=>tO(this,null,function*(){n.next(!0),e=r??!e,t.next(e),n.next(!1)}),enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}(),[s,e,JSON.stringify(r),i]),g=nD(m,!1),y=nD(v,n??!!(null!=d&&d.isEnabled));c.useEffect(()=>{null==t||t(y,f.current),f.current=!1},[y,t]),c.useEffect(()=>{void 0!==n&&(tV.debug("forcing initial toggle state",e,n),p(n))},[]);let b=c.useMemo(()=>nC(a,{className:h}),[a,h]),w=c.useCallback(e=>{var t;f.current=!0,p().catch(()=>f.current=!1),null==(t=a.onClick)||t.call(a,e)},[a,p]);return{toggle:p,enabled:y,pending:g,track:d,buttonProps:{...b,"aria-pressed":y,"data-lk-source":e,"data-lk-enabled":y,disabled:g,onClick:w}}}(t),[o,a]=c.useState(!1);return c.useEffect(()=>{a(!0)},[]),o&&c.createElement("button",{ref:n,...r},(e??!0)&&re(t.source,i),t.children)}),rn=c.forwardRef(function(e,t){let{className:n,quality:r}=function(e={}){let t=ng(e.participant),{className:n,connectionQualityObserver:r}=c.useMemo(()=>{var e;return e=t,{className:tX("connection-quality"),connectionQualityObserver:t6(e,u.dd.ConnectionQualityChanged).pipe(td(([e])=>e),tE(e.connectionQuality))}},[t]);return{className:n,quality:nD(r,t.connectionQuality)}}(e),i=c.useMemo(()=>({...nT(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return c.createElement("div",{ref:t,...i},e.children??function(e){switch(e){case u.ZV.Excellent:return c.createElement(nK,null);case u.ZV.Good:return c.createElement(n0,null);case u.ZV.Poor:return c.createElement(n1,null);default:return c.createElement(n5,null)}}(r))}),rr=c.forwardRef(function({participant:e,...t},n){let r=ng(e),{className:i,infoObserver:o}=c.useMemo(()=>({className:"lk-participant-name",infoObserver:r?t2(r,u.dd.ParticipantMetadataChanged,u.dd.ParticipantNameChanged).pipe(td(({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n})),tE({name:r.name,identity:r.identity,metadata:r.metadata})):void 0}),[r]),{identity:a,name:l}=nD(o,{name:r.name,identity:r.identity,metadata:r.metadata}),s=c.useMemo(()=>nT(t,{className:i,"data-lk-participant-name":l}),[t,i,l]);return c.createElement("span",{ref:n,...s},""!==l?l:a,t.children)}),ri=c.forwardRef(function({trackRef:e,show:t="always",...n},r){let{className:i,isMuted:o}=function(e){var t,n;let r=nh(e),{className:i,mediaMutedObserver:o}=c.useMemo(()=>(function(e){let t="track-muted-indicator-camera";switch(e.source){case u.fQ.Source.Camera:t="track-muted-indicator-camera";break;case u.fQ.Source.Microphone:t="track-muted-indicator-microphone"}return{className:tX(t),mediaMutedObserver:t4(e)}})(r),[t_(r)]);return{isMuted:nD(o,!!(null!=(t=r.publication)&&t.isMuted||null!=(n=r.participant.getTrackPublication(r.source))&&n.isMuted)),className:i}}(e),a="always"===t||"muted"===t&&o||"unmuted"===t&&!o,l=c.useMemo(()=>nT(n,{className:i}),[i,n]);return a?c.createElement("div",{ref:r,...l,"data-lk-muted":o},n.children??re(e.source,!o)):null}),ro=e=>c.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),c.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function ra(e,t={}){let[n,r]=c.useState(tG(e)),[i,o]=c.useState(null==n?void 0:n.isMuted),[a,l]=c.useState(null==n?void 0:n.isSubscribed),[s,d]=c.useState(null==n?void 0:n.track),[f,p]=c.useState("landscape"),h=c.useRef(),{className:m,trackObserver:v}=c.useMemo(()=>(function(e){let t=tG(e),n=t7(e.participant).pipe(td(()=>tG(e)),tE(t));return{className:tX(e.source===u.fQ.Source.Camera||e.source===u.fQ.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}})(e),[e.participant.sid??e.participant.identity,e.source,tI(e)&&e.publication.trackSid]);return c.useEffect(()=>{let e=v.subscribe(e=>{tV.debug("update track",e),r(e),o(null==e?void 0:e.isMuted),l(null==e?void 0:e.isSubscribed),d(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[v]),c.useEffect(()=>{var n,r;return s&&(h.current&&s.detach(h.current),null!=(n=t.element)&&n.current&&!(e.participant.isLocal&&(null==s?void 0:s.kind)==="audio")&&s.attach(t.element.current)),h.current=null==(r=t.element)?void 0:r.current,()=>{h.current&&(null==s||s.detach(h.current))}},[s,t.element]),c.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)&&p(n.dimensions.width>n.dimensions.height?"landscape":"portrait")},[n]),{publication:n,isMuted:i,isSubscribed:a,track:s,elementProps:nT(t.props,{className:m,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source,...(null==n?void 0:n.kind)==="video"&&{"data-lk-orientation":f}})}}let rl=ed(function(){if(l)return a;l=1;var e=NaN,t=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,c="object"==typeof es&&es&&es.Object===Object&&es,u="object"==typeof self&&self&&self.Object===Object&&self,s=c||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return s.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(a){if("number"==typeof a)return a;if("symbol"==typeof(l=a)||l&&"object"==typeof l&&"[object Symbol]"==d.call(l))return e;if(m(a)){var l,c="function"==typeof a.valueOf?a.valueOf():a;a=m(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(t,"");var u=r.test(a);return u||i.test(a)?o(a.slice(2),u?2:8):n.test(a)?e:+a}return a=function(e,t,n){var r,i,o,a,l,c,u=0,s=!1,d=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function b(e){var n=e-c,r=e-u;return void 0===c||n>=t||n<0||d&&r>=o}function w(){var e,n,r,i=h();if(b(i))return k(i);l=setTimeout(w,(e=i-c,n=i-u,r=t-e,d?p(r,o-n):r))}function k(e){return l=void 0,g&&r?y(e):(r=i=void 0,a)}function E(){var e,n=h(),o=b(n);if(r=arguments,i=this,c=n,o){if(void 0===l)return u=e=c,l=setTimeout(w,t),s?y(e):a;if(d)return l=setTimeout(w,t),y(c)}return void 0===l&&(l=setTimeout(w,t)),a}return t=v(t)||0,m(n)&&(s=!!n.leading,o=(d="maxWait"in n)?f(v(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},E.flush=function(){return void 0===l?a:k(h())},E}}()),rc=c.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:i,...o},a){let l=nh(r),s=c.useRef(null);c.useImperativeHandle(a,()=>s.current);let d=function({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:o}={}){var a;let[l,u]=(0,c.useState)(null),[s,d]=(0,c.useState)(()=>({isIntersecting:i,entry:void 0})),f=(0,c.useRef)();f.current=o;let p=(null==(a=s.entry)?void 0:a.isIntersecting)&&r;(0,c.useEffect)(()=>{if(!l||!("IntersectionObserver"in window)||p)return;let r=new IntersectionObserver(e=>{let t=Array.isArray(r.thresholds)?r.thresholds:[r.thresholds];e.forEach(e=>{let n=e.isIntersecting&&t.some(t=>e.intersectionRatio>=t);d({isIntersecting:n,entry:e}),f.current&&f.current(n,e)})},{threshold:e,root:t,rootMargin:n});return r.observe(l),()=>{r.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);let h=(0,c.useRef)(null);(0,c.useEffect)(()=>{var e;l||null==(e=s.entry)||!e.target||r||p||h.current===s.entry.target||(h.current=s.entry.target,d({isIntersecting:i,entry:void 0}))},[l,s.entry,r,p,i]);let m=[u,!!s.isIntersecting,s.entry];return m.ref=m[0],m.isIntersecting=m[1],m.entry=m[2],m}({root:s.current}),[f]=function(e,t,n){let r=e instanceof Function?e():e,[i,o]=(0,c.useState)(r),a=(0,c.useRef)(r),l=function(e,t=500,n){let r=(0,c.useRef)();!function(e){let t=(0,c.useRef)(e);t.current=e,(0,c.useEffect)(()=>()=>{t.current()},[])}(()=>{r.current&&r.current.cancel()});let i=(0,c.useMemo)(()=>{let i=rl(e,t,n),o=(...e)=>i(...e);return o.cancel=()=>{i.cancel()},o.isPending=()=>!!r.current,o.flush=()=>i.flush(),o},[e,t,n]);return(0,c.useEffect)(()=>{r.current=rl(e,t,n)},[e,t,n]),i}(o,3e3,void 0);return a.current===r||(l(r),a.current=r),[i,l]}(d,0);c.useEffect(()=>{i&&l.publication instanceof u.E8&&(null==f?void 0:f.isIntersecting)===!1&&(null==d?void 0:d.isIntersecting)===!1&&l.publication.setSubscribed(!1)},[f,l,i]),c.useEffect(()=>{i&&l.publication instanceof u.E8&&(null==d?void 0:d.isIntersecting)===!0&&l.publication.setSubscribed(!0)},[d,l,i]);let{elementProps:p,publication:h,isSubscribed:m}=ra(l,{element:s,props:o});return c.useEffect(()=>{null==n||n(!!m)},[m,n]),c.createElement("video",{ref:s,...p,muted:!0,onClick:n=>{null==t||t(n),null==e||e({participant:null==l?void 0:l.participant,track:h})}})}),ru=c.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...r},i){let o=nh(e),a=c.useRef(null);c.useImperativeHandle(i,()=>a.current);let{elementProps:l,isSubscribed:s,track:d,publication:f}=ra(o,{element:a,props:r});return c.useEffect(()=>{null==t||t(!!s)},[s,t]),c.useEffect(()=>{void 0===d||void 0===n||(d instanceof u.rl?d.setVolume(n):tV.warn("Volume can only be set on remote audio tracks."))},[n,d]),c.useEffect(()=>{void 0===f||void 0===r.muted||(f instanceof u.E8?f.setEnabled(!r.muted):tV.warn("Can only call setEnabled on remote track publications."))},[r.muted,f,d]),c.createElement("audio",{ref:a,...l})});function rs(e){let t=!!nv();return e.participant&&!t?c.createElement(nm.Provider,{value:e.participant},e.children):c.createElement(c.Fragment,null,e.children)}function rd(e){let t=!!np();return e.trackRef&&!t?c.createElement(nf.Provider,{value:e.trackRef},e.children):c.createElement(c.Fragment,null,e.children)}let rf=c.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:r,...i},o){var a,l,s;let d=nh(e),{elementProps:f}=function({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){let i=nh(e),o=c.useMemo(()=>{let{className:e}={className:tX("participant-tile")};return nC(r,{className:e,onClick:e=>{var n;if(null==(n=r.onClick)||n.call(r,e),"function"==typeof t){let e=i.publication??i.participant.getTrackPublication(i.source);t({participant:i.participant,track:e})}}})},[r,t,i.publication,i.source,i.participant]),a=i.participant.getTrackPublication(u.fQ.Source.Microphone),l=c.useMemo(()=>({participant:i.participant,source:u.fQ.Source.Microphone,publication:a}),[a,i.participant]),s=nQ(i),d=nQ(l),f=function(e){let t=ng(e);return nD(c.useMemo(()=>t6(t,u.dd.IsSpeakingChanged).pipe(td(([e])=>e)),[t]),t.isSpeaking)}(i.participant),p=function(e){if(e.publication instanceof u.Zr){let t=e.publication.track;if(t){let{facingMode:e}=(0,u.ul)(t);return e}}return"undefined"}(i);return{elementProps:{"data-lk-audio-muted":d,"data-lk-video-muted":s,"data-lk-speaking":!0!==n&&f,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":p,...o}}}({htmlProps:i,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:d}),p=function(e,t={}){let n=ng(e),r=nk(t.room);return nD(c.useMemo(()=>t0(r,u.TQ.ParticipantEncryptionStatusChanged).pipe(tb(([,e])=>(null==n?void 0:n.identity)===(null==e?void 0:e.identity)||!e&&(null==n?void 0:n.identity)===r.localParticipant.identity),td(([e])=>e),tE(null!=n&&n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))),[r,n]),n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))}(d.participant),h=nd(),m=null==(a=c.useContext(nE))?void 0:a.autoSubscription,v=c.useCallback(e=>{d.source&&!e&&h&&h.pin.dispatch&&tQ(d,h.pin.state)&&h.pin.dispatch({msg:"clear_pin"})},[d,h]);return c.createElement("div",{ref:o,style:{position:"relative"},...f},c.createElement(rd,{trackRef:d},c.createElement(rs,{participant:d.participant},t??c.createElement(c.Fragment,null,tI(d)&&((null==(l=d.publication)?void 0:l.kind)==="video"||d.source===u.fQ.Source.Camera||d.source===u.fQ.Source.ScreenShare)?c.createElement(rc,{trackRef:d,onSubscriptionStatusChanged:v,manageSubscription:m}):tI(d)&&c.createElement(ru,{trackRef:d,onSubscriptionStatusChanged:v}),c.createElement("div",{className:"lk-participant-placeholder"},c.createElement(ro,null)),c.createElement("div",{className:"lk-participant-metadata"},c.createElement("div",{className:"lk-participant-metadata-item"},d.source===u.fQ.Source.Camera?c.createElement(c.Fragment,null,p&&c.createElement(nY,{style:{marginRight:"0.25rem"}}),c.createElement(ri,{trackRef:{participant:d.participant,source:u.fQ.Source.Microphone},show:"muted"}),c.createElement(rr,null)):c.createElement(c.Fragment,null,c.createElement(n2,{style:{marginRight:"0.25rem"}}),c.createElement(rr,null,"'s screen"))),c.createElement(rn,{className:"lk-participant-metadata-item"}))),c.createElement(n3,{trackRef:d}))))});function rp(e){let t=nT(e,{className:"lk-focus-layout"});return c.createElement("div",{...t},e.children)}function rh({trackRef:e,...t}){return c.createElement(rf,{trackRef:e,...t})}function rm({tracks:e,...t}){return c.createElement(c.Fragment,null,e.map(e=>c.createElement(nf.Provider,{value:e,key:t_(e)},nP(t.children))))}function rv({totalPageCount:e,nextPage:t,prevPage:n,currentPage:r,pagesContainer:i}){let[o,a]=c.useState(!1);return c.useEffect(()=>{let e;return i&&(e=(function(e,t=1e3){var n,r;if(null===e)return tc(!1);let i=(function e(t,n,r,i){if(eS(r)&&(i=r,r=void 0),i)return e(t,n,r).pipe((o=i,td(function(e){return tf(e)?o.apply(void 0,ek([],ew(e))):o(e)})));var o,a=ew(eS(t.addEventListener)&&eS(t.removeEventListener)?tv.map(function(e){return function(i){return t[e](n,i,r)}}):eS(t.addListener)&&eS(t.removeListener)?tm.map(ty(t,n)):eS(t.on)&&eS(t.off)?tg.map(ty(t,n)):[],2),l=a[0],c=a[1];if(!l&&e2(t))return tp(function(t){return e(t,n,r)})(tt(t));if(!l)throw TypeError("Invalid event target");return new ej(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return l(t),function(){return c(t)}})})(e,"mousemove",{passive:!0}).pipe(td(()=>!0)),o=i.pipe(function(e,t){var n=e instanceof Date&&!isNaN(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,a=void 0===o?ts:o,l=n.scheduler,c=void 0===l?e1:l,u=n.meta,s=void 0===u?null:u;if(null==r&&null==i)throw TypeError("No timeout provided.");return eH(function(e,t){var n,o,l=null,u=0,d=function(e){o=tr(t,c,function(){try{n.unsubscribe(),tt(a({meta:s,lastValue:l,seen:u})).subscribe(t)}catch(e){t.error(e)}},e)};n=e.subscribe(eU(t,function(e){null==o||o.unsubscribe(),u++,t.next(l=e),i>0&&d(i)},void 0,void 0,function(){null!=o&&o.closed||null==o||o.unsubscribe(),l=null})),u||d(null!=r?"number"==typeof r?r:+r-c.now():i)})}({each:t,with:()=>th(tc(!1),o.pipe(eH(function(e,t){var n=!1,r=eU(t,function(){null==r||r.unsubscribe(),n=!0},eI);tt(i).subscribe(r),e.subscribe(eU(t,function(e){return n&&t.next(e)}))})))}),(void 0===r&&(r=ez),n=n??tw,eH(function(e,t){var i,o=!0;e.subscribe(eU(t,function(e){var a=r(e);(o||!n(i,a))&&(o=!1,i=a,t.next(e))}))})));return o})(i.current,2e3).subscribe(a)),()=>{e&&e.unsubscribe()}},[i]),c.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},c.createElement("button",{className:"lk-button",onClick:n},c.createElement(nW,null)),c.createElement("span",{className:"lk-pagination-count"},`${r} of ${e}`),c.createElement("button",{className:"lk-button",onClick:t},c.createElement(nW,null)))}let rg=c.forwardRef(function({totalPageCount:e,currentPage:t},n){let r=Array(e).fill("").map((e,n)=>n+1===t?c.createElement("span",{"data-lk-active":!0,key:n}):c.createElement("span",{key:n}));return c.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function ry({tracks:e,...t}){let n=c.createRef(),r=c.useMemo(()=>nT(t,{className:"lk-grid-layout"}),[t]),{layout:i}=function(e,t,n={}){let r=n.gridLayouts??tz,{width:i,height:o}=nI(e),a=function e(t,n,r,i){if(t.length<1)throw Error("At least one grid layout definition must be provided.");let o=[...t].map(e=>{var t,n;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:null!=(t=e.minWidth)?t:0,minHeight:null!=(n=e.minHeight)?n:0,orientation:e.orientation}}).sort((e,t)=>e.maxTiles!==t.maxTiles?e.maxTiles-t.maxTiles:0!==e.minWidth||0!==t.minWidth?e.minWidth-t.minWidth:0!==e.minHeight||0!==t.minHeight?e.minHeight-t.minHeight:0);if(r<=0||i<=0)return o[0];let a=0,l=r/i>1?"landscape":"portrait",c=o.find((e,t,r)=>{a=t;let i=-1!==r.findIndex((n,r)=>{let i=!n.orientation||n.orientation===l,o=n.maxTiles===e.maxTiles;return r>t&&o&&i});return e.maxTiles>=n&&!i});if(void 0===c){if(c=o[o.length-1])tV.warn(`No layout found for: participantCount: ${n}, width/height: ${r}/${i} fallback to biggest available layout (${c}).`);else throw Error("No layout or fallback layout found.")}if((r<c.minWidth||i<c.minHeight)&&a>0){let t=o[a-1];c=e(o.slice(0,a),t.maxTiles,r,i)}return c}(r,t,i,o);return c.useEffect(()=>{e.current&&a&&(e.current.style.setProperty("--lk-col-count",null==a?void 0:a.columns.toString()),e.current.style.setProperty("--lk-row-count",null==a?void 0:a.rows.toString()))},[e,a]),{layout:a,containerWidth:i,containerHeight:o}}(n,e.length),o=function(e,t){let[n,r]=c.useState(1),i=Math.max(Math.ceil(t.length/e),1);n>i&&r(i);let o=n*e,a=o-e,l=e=>{r(t=>"next"===e?t===i?t:t+1:1===t?t:t-1)},u=nZ(t,e).slice(a,o);return{totalPageCount:i,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:e=>{e>i?r(i):e<1?r(1):r(e)},firstItemIndex:a,lastItemIndex:o,tracks:u,currentPage:n}}(i.maxTiles,e);return function(e,t={}){let n=c.useRef(null),r=c.useRef(null),i=t.minSwipeDistance??50,o=e=>{r.current=null,n.current=e.targetTouches[0].clientX},a=e=>{r.current=e.targetTouches[0].clientX},l=c.useCallback(()=>{if(!n.current||!r.current)return;let e=n.current-r.current,o=e>i,a=e<-i;o&&t.onLeftSwipe&&t.onLeftSwipe(),a&&t.onRightSwipe&&t.onRightSwipe()},[i,t]);c.useEffect(()=>{let t=e.current;return t&&(t.addEventListener("touchstart",o,{passive:!0}),t.addEventListener("touchmove",a,{passive:!0}),t.addEventListener("touchend",l,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",o),t.removeEventListener("touchmove",a),t.removeEventListener("touchend",l))}},[e,l])}(n,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),c.createElement("div",{ref:n,"data-lk-pagination":o.totalPageCount>1,...r},c.createElement(rm,{tracks:o.tracks},t.children),e.length>i.maxTiles&&c.createElement(c.Fragment,null,c.createElement(rg,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),c.createElement(rv,{pagesContainer:n,...o})))}function rb({tracks:e,orientation:t,...n}){let r=c.useRef(null),[i,o]=c.useState(0),{width:a,height:l}=nI(r),u=t||(l>=a?"vertical":"horizontal"),s="vertical"===u?Math.max(.6000000000000001*a,130):Math.max(1.6*l,140),d=function(){let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);let n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}(),f=Math.max("vertical"===u?(l-d)/s:(a-d)/s,1),p=Math.round(f);.5>Math.abs(f-i)?p=Math.round(i):i!==f&&o(f);let h=nZ(e,p);return c.useLayoutEffect(()=>{r.current&&(r.current.dataset.lkOrientation=u,r.current.style.setProperty("--lk-max-visible-tiles",p.toString()))},[p,u]),c.createElement("aside",{key:u,className:"lk-carousel",ref:r,...n},c.createElement(rm,{tracks:h},n.children))}function rw({value:e,onPinChange:t,onWidgetChange:n,children:r}){let i=function(e){let[t,n]=c.useReducer(nc,tj),[r,i]=c.useReducer(nl,tF);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}(e);return c.useEffect(()=>{tV.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),c.useEffect(()=>{tV.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),c.createElement(nu.Provider,{value:i},r)}function rk({volume:e,muted:t}){let n=nV([u.fQ.Source.Microphone,u.fQ.Source.ScreenShareAudio,u.fQ.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(e=>!e.participant.isLocal&&e.publication.kind===u.fQ.Kind.Audio);return c.createElement("div",{style:{display:"none"}},n.map(n=>c.createElement(ru,{key:t_(n),trackRef:n,volume:e,muted:t})))}function rE(e){let t=c.useMemo(()=>nT(e,{className:"lk-toast"}),[e]);return c.createElement("div",{...t},e.children)}function rS(e){let[t,n]=c.useState(void 0),r=n_(e.room);return c.useEffect(()=>{switch(r){case u.em.Reconnecting:n(c.createElement(c.Fragment,null,c.createElement(n6,{className:"lk-spinner"})," Reconnecting"));break;case u.em.Connecting:n(c.createElement(c.Fragment,null,c.createElement(n6,{className:"lk-spinner"})," Connecting"));break;case u.em.Disconnected:n(c.createElement(c.Fragment,null,"Disconnected"));break;default:n(void 0)}},[r]),t?c.createElement(rE,{className:"lk-toast-connection-state"},t):c.createElement(c.Fragment,null)}let rx=c.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...i},o){var a,l,u,s;let d=c.useMemo(()=>r?r(e.message):e.message,[e.message,r]),f=!!e.editTimestamp,p=new Date(e.timestamp),h="u">typeof navigator?navigator.language:"en-US",m=(null==(a=e.from)?void 0:a.name)??(null==(l=e.from)?void 0:l.identity);return c.createElement("li",{ref:o,className:"lk-chat-entry",title:p.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":null!=(u=e.from)&&u.isLocal?"local":"remote",...i},(!n||!t||f)&&c.createElement("span",{className:"lk-meta-data"},!t&&c.createElement("strong",{className:"lk-participant-name"},m),(!n||f)&&c.createElement("span",{className:"lk-timestamp"},f&&"edited ",p.toLocaleTimeString(h,{timeStyle:"short"}))),c.createElement("span",{className:"lk-message-body"},d),c.createElement("span",{className:"lk-message-attachements"},null==(s=e.attachedFiles)?void 0:s.map(e=>e.type.startsWith("image/")&&c.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:e.name,src:URL.createObjectURL(e),alt:e.name}))))});function rC({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...i}){let o=c.useRef(null),a=c.useRef(null),{chatMessages:l,send:s,isSending:d}=function(e){let t=nb(),n=n_(t),r=c.useMemo(()=>n===u.em.Disconnected,[n]),i=c.useMemo(()=>(function(e,t){var n,r,i,o,a,l;let c=()=>{var t,n,r;return(null==(t=e.serverInfo)?void 0:t.edition)===1||!!(null!=(n=e.serverInfo)&&n.version)&&(0,u.n4)(null==(r=e.serverInfo)?void 0:r.version,"1.8.2")>0},s=new eq,d=null!=(n=null==t?void 0:t.channelTopic)?n:t3.CHAT,f=null!=(r=null==t?void 0:t.channelTopic)?r:t9.CHAT,p=!1;ne.has(e)||(p=!0);let h=null!=(i=ne.get(e))?i:new Map,m=null!=(o=h.get(d))?o:new eq;h.set(d,m),ne.set(e,h);let v=null!=(a=null==t?void 0:t.messageDecoder)?a:nt;if(p){e.registerTextStreamHandler(d,(t,n)=>tO(this,null,function*(){let{id:r,timestamp:i}=t.info;tl(t).pipe(tk((e,t)=>e+t),td(t=>({id:r,timestamp:i,message:t,from:e.getParticipantByIdentity(n.identity)}))).subscribe({next:e=>m.next(e)})}));let{messageObservable:t}=function(e,t,n){let r;let i=Array.isArray(t)?t:[t];return{messageObservable:t0(e,u.TQ.DataReceived).pipe(tb(([,,,e])=>void 0===t||void 0!==e&&i.includes(e)),td(([e,t,,n])=>({payload:e,topic:n,from:t}))),isSendingObservable:new ej(e=>{r=e}),send:(t,...n)=>tO(this,[t,...n],function*(t,n={}){r.next(!0);try{yield t8(e.localParticipant,t,tL({topic:i[0]},n))}finally{r.next(!1)}})}}(e,[f]);t.pipe(td(e=>{let t=v(e.payload);return!0==t.ignoreLegacy?void 0:tN(tL({},t),{from:e.from})}),tb(e=>!!e),tS(s)).subscribe(m)}let g=m.pipe(tk((e,t)=>{if("id"in t&&e.find(e=>{var n,r;return(null==(n=e.from)?void 0:n.identity)===(null==(r=t.from)?void 0:r.identity)&&e.id===t.id})){let n=e.findIndex(e=>e.id===t.id);if(n>-1){let r=e[n];e[n]=tN(tL({},t),{timestamp:r.timestamp,editTimestamp:t.timestamp})}return[...e]}return[...e,t]},[]),tS(s)),y=new eJ(!1),b=null!=(l=null==t?void 0:t.messageEncoder)?l:nn;return e.once(u.TQ.Disconnected,function(){s.next(),s.complete(),m.complete(),ne.delete(e),e.unregisterTextStreamHandler(d)}),{messageObservable:g,isSendingObservable:y,send:(t,n)=>tO(this,null,function*(){n||(n={}),null!=n.topic||(n.topic=d),y.next(!0);try{let r={id:(yield e.localParticipant.sendText(t,n)).id,timestamp:Date.now(),message:t},i=tN(tL({},r),{attachedFiles:n.attachments}),o=tN(tL({},i),{from:e.localParticipant,attributes:n.attributes});m.next(o);let a=b(tN(tL({},r),{ignoreLegacy:c()}));try{yield t8(e.localParticipant,a,{reliable:!0,topic:f})}catch(e){tV.info("could not send message in legacy chat format",e)}return o}finally{y.next(!1)}})}})(t,e),[t,e,r]),o=nD(i.isSendingObservable,!1),a=nD(i.messageObservable,[]);return{send:i.send,chatMessages:a,isSending:o}}(c.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r])),f=nd(),p=c.useRef(0);async function h(e){e.preventDefault(),a.current&&""!==a.current.value.trim()&&(await s(a.current.value),a.current.value="",a.current.focus())}return c.useEffect(()=>{var e;o&&(null==(e=o.current)||e.scrollTo({top:o.current.scrollHeight}))},[o,l]),c.useEffect(()=>{var e,t,n,r,i;if(!f||0===l.length)return;if(null!=(e=f.widget.state)&&e.showChat&&l.length>0&&p.current!==(null==(t=l[l.length-1])?void 0:t.timestamp)){p.current=null==(n=l[l.length-1])?void 0:n.timestamp;return}let o=l.filter(e=>!p.current||e.timestamp>p.current).length,{widget:a}=f;o>0&&(null==(r=a.state)?void 0:r.unreadMessages)!==o&&(null==(i=a.dispatch)||i.call(a,{msg:"unread_msg",count:o}))},[l,null==f?void 0:f.widget]),c.createElement("div",{...i,className:"lk-chat"},c.createElement("div",{className:"lk-chat-header"},"Messages",f&&c.createElement(nz,{className:"lk-close-button"},c.createElement(nU,null))),c.createElement("ul",{className:"lk-list lk-chat-messages",ref:o},i.children?l.map((t,n)=>nP(i.children,{entry:t,key:t.id??n,messageFormatter:e})):l.map((t,n,r)=>{let i=n>=1&&r[n-1].from===t.from,o=n>=1&&t.timestamp-r[n-1].timestamp<6e4;return c.createElement(rx,{key:t.id??n,hideName:i,hideTimestamp:!1!==i&&o,entry:t,messageFormatter:e})})),c.createElement("form",{className:"lk-chat-form",onSubmit:h},c.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:d,ref:a,type:"text",placeholder:"Enter a message...",onInput:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),onKeyUp:e=>e.stopPropagation()}),c.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:d},"Send")))}function rM({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...o}){let[a,l]=c.useState(!1),[u,f]=c.useState([]),[h,m]=c.useState(!0),[v,C]=c.useState(i),M=(e,t)=>{tV.debug("handle device change"),l(!1),null==n||n(e,t)},T=c.useRef(null),A=c.useRef(null);c.useLayoutEffect(()=>{a&&C(!0)},[a]),c.useLayoutEffect(()=>{let e;return T.current&&A.current&&(u||h)&&(e=function(e,t,n){return function(e,t,n,r){void 0===r&&(r={});let{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,u=J(e),f=i||o?[...u?W(u):[],...W(t)]:[];f.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});let h=u&&l?function(e,t){let n=null,r,i=O(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function a(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),o();let u=e.getBoundingClientRect(),{left:f,top:h,width:m,height:v}=u;if(l||t(),!m||!v)return;let g=p(h),y={rootMargin:-g+"px "+-p(i.clientWidth-(f+m))+"px "+-p(i.clientHeight-(h+v))+"px "+-p(f)+"px",threshold:d(0,s(1,c))||1},b=!0;function w(t){let n=t[0].intersectionRatio;if(n!==c){if(!b)return a();n?a(!1,n):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==n||ec(u,e.getBoundingClientRect())||a(),b=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}(!0),o}(u,n):null,m=-1,v=null;a&&(v=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=v)||e.observe(t)})),n()}),u&&!c&&v.observe(u),v.observe(t));let g,y=c?K(e):null;return c&&function t(){let r=K(e);y&&!ec(y,r)&&n(),y=r,g=requestAnimationFrame(t)}(),n(),()=>{var e;f.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=v)||e.disconnect(),v=null,c&&cancelAnimationFrame(g)}}(e,t,()=>tO(this,null,function*(){var r,i;let{x:o,y:a}=yield eu(e,t,{placement:"top",middleware:[{name:"offset",options:6,async fn(e){var t,n;let{x:r,y:i,placement:o,middlewareData:a}=e,l=await R(e,6);return o===(null==(t=a.offset)?void 0:t.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}},(void 0===r&&(r={}),{name:"flip",options:r,async fn(e){var t,n,i,o,a;let{placement:l,middlewareData:c,rects:u,initialPlacement:s,platform:d,elements:f}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:M=!0,...T}=g(r,e);if(null!=(t=c.arrow)&&t.alignmentOffset)return{};let R=y(l),A=E(s),L=y(s)===s,N=await (null==d.isRTL?void 0:d.isRTL(f.floating)),O=m||(L||!M?[x(s)]:function(e){let t=x(e);return[S(e),t,S(t)]}(s)),I="none"!==C;!m&&I&&O.push(...function(e,t,n,r){let i=b(e),o=function(e,t,n){let r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(y(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(S)))),o}(s,M,C,N));let D=[s,...O],_=await P(e,T),Q=[],Z=(null==(n=c.flip)?void 0:n.overflows)||[];if(p&&Q.push(_[R]),h){let e=function(e,t,n){void 0===n&&(n=!1);let r=b(e),i=w(E(e)),o=k(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=x(a)),[a,x(a)]}(l,u,N);Q.push(_[e[0]],_[e[1]])}if(Z=[...Z,{placement:l,overflows:Q}],!Q.every(e=>e<=0)){let e=((null==(i=c.flip)?void 0:i.index)||0)+1,t=D[e];if(t)return{data:{index:e,overflows:Z},reset:{placement:t}};let n=null==(o=Z.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:o.placement;if(!n)switch(v){case"bestFit":{let e=null==(a=Z.filter(e=>{if(I){let t=E(e.placement);return t===A||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(n=e);break}case"initialPlacement":n=s}if(l!==n)return{reset:{placement:n}}}return{}}}),{name:"shift",options:i={padding:5},async fn(e){let{x:t,y:n,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=g(i,e),u={x:t,y:n},f=await P(e,c),p=E(y(r)),h=w(p),m=u[h],v=u[p];if(o){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",n=m+f[e],r=m-f[t];m=d(n,s(m,r))}if(a){let e="y"===p?"top":"left",t="y"===p?"bottom":"right",n=v+f[e],r=v-f[t];v=d(n,s(v,r))}let b=l.fn({...e,[h]:m,[p]:v});return{...b,data:{x:b.x-t,y:b.y-n,enabled:{[h]:o,[p]:a}}}}}]});null==n||n(o,a)}))}(T.current,A.current,(e,t)=>{A.current&&Object.assign(A.current.style,{left:`${e}px`,top:`${t}px`})})),m(!1),()=>{null==e||e()}},[T,A,u,h]);let L=c.useCallback(e=>{A.current&&e.target!==T.current&&a&&!A.current.contains(e.target)&&l(!1)},[a,A,T]);return c.useEffect(()=>(document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}),[L]),c.createElement(c.Fragment,null,c.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":a,...o,onClick:()=>l(!a),ref:T},o.children),!o.disabled&&c.createElement("div",{className:"lk-device-menu",ref:A,style:{visibility:a?"visible":"hidden"}},e?c.createElement(n9,{initialSelection:t,onActiveDeviceChange:t=>M(e,t),onDeviceListChange:f,kind:e,track:null==r?void 0:r[e],requestPermissions:v}):c.createElement(c.Fragment,null,c.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),c.createElement(n9,{kind:"audioinput",onActiveDeviceChange:e=>M("audioinput",e),onDeviceListChange:f,track:null==r?void 0:r.audioinput,requestPermissions:v}),c.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),c.createElement(n9,{kind:"videoinput",onActiveDeviceChange:e=>M("videoinput",e),onDeviceListChange:f,track:null==r?void 0:r.videoinput,requestPermissions:v}))))}let rT=c.forwardRef(function(e,t){let{mergedProps:n}=function({props:e}){let{dispatch:t,state:n}=ns().widget,r="lk-button lk-settings-toggle";return{mergedProps:c.useMemo(()=>nC(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":null!=n&&n.showSettings?"true":"false"}),[e,r,t,n])}}({props:e});return c.createElement("button",{ref:t,...n},e.children)}),rP=e=>{switch(e){case u.fQ.Source.Camera:return 1;case u.fQ.Source.Microphone:return 2;case u.fQ.Source.ScreenShare:return 3;default:return 0}};function rR({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...i}){var o;let[a,l]=c.useState(!1),s=nd();c.useEffect(()=>{var e,t;(null==(e=null==s?void 0:s.widget.state)?void 0:e.showChat)!==void 0&&l(null==(t=null==s?void 0:s.widget.state)?void 0:t.showChat)},[null==(o=null==s?void 0:s.widget.state)?void 0:o.showChat]);let d=!function(e){let t=e=>"u">typeof window&&window.matchMedia(e).matches,[n,r]=c.useState(t(e));function i(){r(t(e))}return c.useEffect(()=>{let t=window.matchMedia(e);return i(),t.addListener?t.addListener(i):t.addEventListener("change",i),()=>{t.removeListener?t.removeListener(i):t.removeEventListener("change",i)}},[e]),n}(`(max-width: ${a?1e3:760}px)`)?"verbose":"minimal";e??(e=d);let f={leave:!0,...t},p=function(){let e=nb();return nD(c.useMemo(()=>{var t;return t6(t=e.localParticipant,u.dd.ParticipantPermissionsChanged).pipe(td(()=>t.permissions),tE(t.permissions))},[e]),e.localParticipant.permissions)}();if(p){let e=e=>p.canPublish&&(0===p.canPublishSources.length||p.canPublishSources.includes(rP(e)));f.camera??(f.camera=e(u.fQ.Source.Camera)),f.microphone??(f.microphone=e(u.fQ.Source.Microphone)),f.screenShare??(f.screenShare=e(u.fQ.Source.ScreenShare)),f.chat??(f.chat=p.canPublishData&&(null==t?void 0:t.chat))}else f.camera=!1,f.chat=!1,f.microphone=!1,f.screenShare=!1;let h=c.useMemo(()=>"minimal"===e||"verbose"===e,[e]),m=c.useMemo(()=>"textOnly"===e||"verbose"===e,[e]),v="u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia,[g,y]=c.useState(!1),b=c.useCallback(e=>{y(e)},[y]),w=nT({className:"lk-control-bar"},i),{saveAudioInputEnabled:k,saveVideoInputEnabled:E,saveAudioInputDeviceId:S,saveVideoInputDeviceId:x}=function(e={}){let[t,n]=c.useState(function(e,t=!1){var n,r,i,o,a;let l={videoEnabled:null!=(n=null==e?void 0:e.videoEnabled)?n:ni.videoEnabled,audioEnabled:null!=(r=null==e?void 0:e.audioEnabled)?r:ni.audioEnabled,videoDeviceId:null!=(i=null==e?void 0:e.videoDeviceId)?i:ni.videoDeviceId,audioDeviceId:null!=(o=null==e?void 0:e.audioDeviceId)?o:ni.audioDeviceId,username:null!=(a=null==e?void 0:e.username)?a:ni.username};if(t)return l;{let e=no();return tL(tL({},l),e??{})}}(e.defaults,e.preventLoad??!1)),r=c.useCallback(e=>{n(t=>({...t,audioEnabled:e}))},[]),i=c.useCallback(e=>{n(t=>({...t,videoEnabled:e}))},[]),o=c.useCallback(e=>{n(t=>({...t,audioDeviceId:e}))},[]),a=c.useCallback(e=>{n(t=>({...t,videoDeviceId:e}))},[]),l=c.useCallback(e=>{n(t=>({...t,username:e}))},[]);return c.useEffect(()=>{(function(e,t=!1){!0!==t&&na(e)})(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:l}}({preventSave:!n}),C=c.useCallback((e,t)=>t?k(e):null,[k]),M=c.useCallback((e,t)=>t?E(e):null,[E]);return c.createElement("div",{...w},f.microphone&&c.createElement("div",{className:"lk-button-group"},c.createElement(rt,{source:u.fQ.Source.Microphone,showIcon:h,onChange:C,onDeviceError:e=>null==r?void 0:r({source:u.fQ.Source.Microphone,error:e})},m&&"Microphone"),c.createElement("div",{className:"lk-button-group-menu"},c.createElement(rM,{kind:"audioinput",onActiveDeviceChange:(e,t)=>S(t??"default")}))),f.camera&&c.createElement("div",{className:"lk-button-group"},c.createElement(rt,{source:u.fQ.Source.Camera,showIcon:h,onChange:M,onDeviceError:e=>null==r?void 0:r({source:u.fQ.Source.Camera,error:e})},m&&"Camera"),c.createElement("div",{className:"lk-button-group-menu"},c.createElement(rM,{kind:"videoinput",onActiveDeviceChange:(e,t)=>x(t??"default")}))),f.screenShare&&v&&c.createElement(rt,{source:u.fQ.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:h,onChange:b,onDeviceError:e=>null==r?void 0:r({source:u.fQ.Source.ScreenShare,error:e})},m&&(g?"Stop screen share":"Share screen")),f.chat&&c.createElement(nz,null,h&&c.createElement(n$,null),m&&"Chat"),f.settings&&c.createElement(rT,null,h&&c.createElement(nB,null),m&&"Settings"),f.leave&&c.createElement(nj,null,h&&c.createElement(nJ,null),m&&"Leave"),c.createElement(n8,null))}function rA({chatMessageFormatter:e,chatMessageDecoder:t,chatMessageEncoder:n,SettingsComponent:r,...i}){var o,a,l;let[s,d]=c.useState({showChat:!1,unreadMessages:0,showSettings:!1}),f=c.useRef(null),p=nV([{source:u.fQ.Source.Camera,withPlaceholder:!0},{source:u.fQ.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[u.TQ.ActiveSpeakersChanged],onlySubscribed:!1}),h=function(){let[e,t]=c.useReducer(nc,tj),[n,r]=c.useReducer(nl,tF);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}(),m=p.filter(tI).filter(e=>e.publication.source===u.fQ.Source.ScreenShare),v=null==(l=function(e){let t=nd();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(l=h),o=c.useMemo(()=>(null==l?void 0:l.pin.state)!==void 0&&l.pin.state.length>=1?l.pin.state:[],[l.pin.state]))?void 0:o[0],g=p.filter(e=>void 0===e||void 0===v||(tI(e)&&tI(v)?e.publication.trackSid!==v.publication.trackSid:t_(e)!==t_(v)));return c.useEffect(()=>{var e,t,n,r,i,o;if(m.some(e=>e.publication.isSubscribed)&&null===f.current?(tV.debug("Auto set screen share focus:",{newScreenShareTrack:m[0]}),null==(t=(e=h.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:m[0]}),f.current=m[0]):f.current&&!m.some(e=>{var t,n;return e.publication.trackSid===(null==(n=null==(t=f.current)?void 0:t.publication)?void 0:n.trackSid)})&&(tV.debug("Auto clearing screen share focus."),null==(r=(n=h.pin).dispatch)||r.call(n,{msg:"clear_pin"}),f.current=null),v&&!tI(v)){let e=p.find(e=>e.participant.identity===v.participant.identity&&e.source===v.source);e!==v&&tI(e)&&(null==(o=(i=h.pin).dispatch)||o.call(i,{msg:"set_pin",trackReference:e}))}},[m.map(e=>`${e.publication.trackSid}_${e.publication.isSubscribed}`).join(),null==(a=null==v?void 0:v.publication)?void 0:a.trackSid,p]),c.useEffect(()=>{!function(e){var t,n;if("u">typeof window&&"u">typeof nS&&((null==(t=null==nS?void 0:nS.env)?void 0:t.NODE_ENV)==="dev"||(null==(n=null==nS?void 0:nS.env)?void 0:n.NODE_ENV)==="development")){let e=document.querySelector(".lk-room-container");e&&!getComputedStyle(e).getPropertyValue("--lk-has-imported-styles")&&tV.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}()},[]),c.createElement("div",{className:"lk-video-conference",...i},"u">typeof document&&c.createElement(rw,{value:h,onWidgetChange:e=>{tV.debug("updating widget state",e),d(e)}},c.createElement("div",{className:"lk-video-conference-inner"},v?c.createElement("div",{className:"lk-focus-layout-wrapper"},c.createElement(rp,null,c.createElement(rb,{tracks:g},c.createElement(rf,null)),v&&c.createElement(rh,{trackRef:v}))):c.createElement("div",{className:"lk-grid-layout-wrapper"},c.createElement(ry,{tracks:p},c.createElement(rf,null))),c.createElement(rR,{controls:{chat:!0,settings:!!r}})),c.createElement(rC,{style:{display:s.showChat?"grid":"none"},messageFormatter:e,messageEncoder:n,messageDecoder:t}),r&&c.createElement("div",{className:"lk-settings-menu-modal",style:{display:s.showSettings?"block":"none"}},c.createElement(r,null))),c.createElement(rk,null),c.createElement(rS,null))}},909:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});class r extends Map{constructor(e,t=o){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(i(this,e))}has(e){return super.has(i(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}(this,e))}}function i({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function o(e){return null!==e&&"object"==typeof e?e.valueOf():e}}}]);