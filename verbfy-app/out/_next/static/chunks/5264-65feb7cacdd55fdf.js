"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5264],{25264:function(e,s,t){t.d(s,{Z:function(){return i}});var a=t(85893),l=t(67294),r=t(32798);function i(e){var s;let{organizationId:t}=e,[i,d]=(0,l.useState)(null),[c,n]=(0,l.useState)(!0),[x,o]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[g,u]=(0,l.useState)("24h"),[p,j]=(0,l.useState)(!0);(0,l.useEffect)(()=>{if(y(),p){let e=setInterval(y,3e4);return()=>clearInterval(e)}},[t,g,p]);let y=async()=>{try{n(!0),o(null);let e=await r.ZP.get("/api/performance/dashboard",{params:{organizationId:t,timeRange:g}});d(e.data.data)}catch(t){var e,s;o((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"Failed to fetch performance data")}finally{n(!1)}},N=async e=>{try{await r.ZP.put("/api/performance/alerts/".concat(e,"/acknowledge")),y()}catch(e){}},v=async e=>{try{await r.ZP.put("/api/performance/alerts/".concat(e,"/resolve")),y()}catch(e){}},f=e=>{switch(e){case"healthy":return"text-green-600 bg-green-100";case"degraded":return"text-yellow-600 bg-yellow-100";case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},w=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB","TB"][s]},k=e=>"".concat(e.toFixed(1),"%");if(c&&!i)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(x)return(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:x})]})]})});if(!i)return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Performance Data"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Performance monitoring data is not available."})]});let{currentMetrics:C,summary:M,alerts:L}=i;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Performance Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Real-time system performance monitoring"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),(0,a.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"1h",children:"Last Hour"}),(0,a.jsx)("option",{value:"6h",children:"Last 6 Hours"}),(0,a.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"autoRefresh",checked:p,onChange:e=>j(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"autoRefresh",className:"text-sm font-medium text-gray-700",children:"Auto Refresh"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Overall Health"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(f(M.overallHealth)," px-2 py-1 rounded"),children:M.overallHealth})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"System"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(f(M.systemHealth)," px-2 py-1 rounded"),children:M.systemHealth})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Application"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(f(M.applicationHealth)," px-2 py-1 rounded"),children:M.applicationHealth})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Database"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(f(M.databaseHealth)," px-2 py-1 rounded"),children:M.databaseHealth})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"API"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(f(M.apiHealth)," px-2 py-1 rounded"),children:M.apiHealth})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Resources"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"CPU Usage"}),(0,a.jsx)("span",{children:k(C.system.cpu.usage)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(C.system.cpu.usage>80?"bg-red-500":C.system.cpu.usage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(C.system.cpu.usage,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Load: ",C.system.cpu.load.toFixed(2)," | Cores: ",C.system.cpu.cores]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"Memory Usage"}),(0,a.jsx)("span",{children:k(C.system.memory.usage)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(C.system.memory.usage>80?"bg-red-500":C.system.memory.usage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(C.system.memory.usage,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[w(C.system.memory.used)," / ",w(C.system.memory.total)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"Disk Usage"}),(0,a.jsx)("span",{children:k(C.system.disk.usage)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(C.system.disk.usage>80?"bg-red-500":C.system.disk.usage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(C.system.disk.usage,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[w(C.system.disk.used)," / ",w(C.system.disk.total)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Performance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Response Time"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.application.responseTime.average.toFixed(0),"ms"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["P95: ",C.application.responseTime.p95.toFixed(0),"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Throughput"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.application.throughput.requestsPerSecond.toFixed(1),"/s"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Success: ",k(C.application.throughput.successRate)]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Uptime"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(s=C.application.uptime,"".concat(Math.floor(s/3600),"h ").concat(Math.floor(s%3600/60),"m"))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Connections"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:C.application.activeConnections})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Memory Usage"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-blue-500",style:{width:"".concat(C.application.memory.heapUsed/C.application.memory.heapTotal*100,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[w(C.application.memory.heapUsed)," / ",w(C.application.memory.heapTotal)]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Performance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Connections"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.database.connections.active,"/",C.database.connections.max]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Usage: ",k(C.database.connections.usage)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Query Time"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.database.queries.averageTime.toFixed(0),"ms"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[C.database.queries.slow," slow queries"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Cache Hit Ratio"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:k(C.database.performance.cacheHitRatio)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Index Hit Ratio"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:k(C.database.performance.indexHitRatio)})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Performance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Request Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.api.requests.rate.toFixed(1),"/s"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Total: ",C.api.requests.total.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Latency"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[C.api.latency.average.toFixed(0),"ms"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["P95: ",C.api.latency.p95.toFixed(0),"ms"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Response Codes"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-green-600",children:C.api.responseCodes["2xx"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"2xx"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-blue-600",children:C.api.responseCodes["3xx"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"3xx"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-yellow-600",children:C.api.responseCodes["4xx"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"4xx"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-red-600",children:C.api.responseCodes["5xx"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"5xx"})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Alerts"})}),(0,a.jsx)("div",{className:"p-6",children:0===L.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Active Alerts"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All systems are running normally."})]}):(0,a.jsx)("div",{className:"space-y-4",children:L.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 ".concat(b(e.severity)),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:e.title}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(b(e.severity)),children:e.severity})]}),(0,a.jsx)("p",{className:"text-sm mt-1",children:e.description}),(0,a.jsxs)("p",{className:"text-xs mt-2",children:["Metric: ",e.metric," | Current: ",e.currentValue," | Threshold: ",e.threshold]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:["active"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>N(e._id),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Acknowledge"}),(0,a.jsx)("button",{onClick:()=>v(e._id),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Resolve"})]}),"acknowledged"===e.status&&(0,a.jsx)("button",{onClick:()=>v(e._id),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Resolve"})]})]})},e._id))})})]})]})}}}]);